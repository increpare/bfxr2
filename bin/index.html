<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="icon" type="image/png" href="favicon.png">
        
        <title>Bfxr.  Make sound effects for your games.</title>
        <meta name="description" content="Bfxr is a simple tool for creating unique sound effects for games.">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script>function copy_obj(e){return Object.assign({},e)}function step(t){return function(e){return e<=0||1<=e?0:(e*e*e*t-e*t)*(1-e)*-1.5}}function resize_fn(t,i,s,n,a){return function(e){return t((e-n)/(a-n)*(s-i)+i)}}function add_fns(...e){return function(i){return e.reduce((e,t)=>e+t(i),0)}}function isVisible(e,t){var i=e.offsetTop,e=i+e.clientHeight,s=t.scrollTop,t=s+t.clientHeight;return s<=i&&e<=t||i<s&&s<e||i<t&&t<e}function setVisible(e,t){isVisible(e,t)||(e.offsetTop<t.scrollTop?t.scrollTop=e.offsetTop:e.offsetTop+e.offsetHeight>t.scrollTop+t.offsetHeight&&(t.scrollTop=e.offsetTop-t.offsetHeight+e.offsetHeight))}function lerp(e,t,i){return e+i*(t-e)}Math.clamp=function(e,t,i){return Math.max(t,Math.min(e,i))};var AUDIO_CONTEXT,COSTABLENAME,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},windowIsDefined="object"===("undefined"==typeof window?"undefined":_typeof(window)),FastBase64_chars=((e=>{if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var t;try{t=require("jquery")}catch(e){t=null}module.exports=e(t)}else window&&(window.Slider=e(window.jQuery))})(function(e){var h,d,c,M,i,s,z,n="slider",a="bootstrapSlider";function t(){}function r(e,t){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1,tickIndex:null},this.ticksCallbackMap={},this.handleCallbackMap={},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),t=t||{};for(var i=Object.keys(this.defaultOptions),e=t.hasOwnProperty("min"),s=t.hasOwnProperty("max"),n=0;n<i.length;n++){var a=i[n],r=t[a];r=null!==(r=void 0!==r?r:((t,e)=>{e="data-slider-"+e.replace(/_/g,"-"),t=t.getAttribute(e);try{return JSON.parse(t)}catch(e){return t}})(this.element,a))?r:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=r}this.ticksAreValid=Array.isArray(this.options.ticks)&&0<this.options.ticks.length,this.ticksAreValid||(this.options.lock_to_ticks=!1),"auto"===this.options.rtl&&(u=window.getComputedStyle(this.element),this.options.rtl=null!=u?"rtl"===u.direction:"rtl"===this.element.style.direction),"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.rtl?this.options.tooltip_position="left":this.options.tooltip_position="right";var o,l,h,d,c,u=this.element.style.width,p=!1,f=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var m=document.createElement("div"),_=(m.className="slider-border",document.createElement("div")),g=(_.className="slider-track",(l=document.createElement("div")).className="slider-track-low",(o=document.createElement("div")).className="slider-selection",(h=document.createElement("div")).className="slider-track-high",(d=document.createElement("div")).className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),(c=document.createElement("div")).className="slider-handle max-slider-handle",c.setAttribute("role","slider"),c.setAttribute("aria-valuemin",this.options.min),c.setAttribute("aria-valuemax",this.options.max),_.appendChild(l),_.appendChild(o),_.appendChild(h),this.rangeHighlightElements=[],this.options.rangeHighlights);if(Array.isArray(g)&&0<g.length)for(var v=0;v<g.length;v++){var b=document.createElement("div"),y=g[v].class||"";b.className="slider-rangeHighlight slider-selection "+y,this.rangeHighlightElements.push(b),_.appendChild(b)}var w=Array.isArray(this.options.labelledby);if(w&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),w&&this.options.labelledby[1]&&c.setAttribute("aria-labelledby",this.options.labelledby[1]),!w&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),c.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&0<this.options.ticks.length){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",n=0;n<this.options.ticks.length;n++){var k=document.createElement("div"),x=(k.className="slider-tick",this.options.ticks_tooltip&&(x=(E=this._addTickListener()).addMouseEnter(this,k,n),E=E.addMouseLeave(this,k),this.ticksCallbackMap[n]={mouseEnter:x,mouseLeave:E}),this.options.min),E=x+(this.options.max-x)*n/(this.options.ticks.length-1);k.setAttribute("data-tick-value",E),this.ticks.push(k),this.ticksContainer.appendChild(k)}o.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&0<this.options.ticks_labels.length)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",n=0;n<this.options.ticks_labels.length;n++){var S=document.createElement("div"),C=0===this.options.ticks_positions.length,C=this.options.reversed&&C?this.options.ticks_labels.length-(n+1):n;S.className="slider-tick-label",S.innerHTML=this.options.ticks_labels[C],this.tickLabels.push(S),this.tickLabelContainer.appendChild(S)}var w=function(e){var t=document.createElement("div"),i=(t.className="arrow",document.createElement("div"));i.className="tooltip-inner",e.appendChild(t),e.appendChild(i)},T=document.createElement("div"),A=(T.className="tooltip tooltip-main",T.setAttribute("role","presentation"),w(T),document.createElement("div")),L=(A.className="tooltip tooltip-min",A.setAttribute("role","presentation"),w(A),document.createElement("div"));L.className="tooltip tooltip-max",L.setAttribute("role","presentation"),w(L),this.sliderElem.appendChild(m),this.sliderElem.appendChild(_),this.sliderElem.appendChild(T),this.sliderElem.appendChild(A),this.sliderElem.appendChild(L),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(d),this.sliderElem.appendChild(c),f.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(M&&(this.$element=M(this.element),this.$sliderElem=M(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),z[this.options.scale]&&(this.options.scale=z[this.options.scale]),!0===p&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach(function(e){this._removeProperty(this.trackLow,e),this._removeProperty(this.trackSelection,e),this._removeProperty(this.trackHigh,e)},this),[this.handle1,this.handle2].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"right"),this._removeProperty(e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(e){this._removeProperty(e,"bs-tooltip-left"),this._removeProperty(e,"bs-tooltip-right"),this._removeProperty(e,"bs-tooltip-top"),this._removeClass(e,"bs-tooltip-right"),this._removeClass(e,"bs-tooltip-left"),this._removeClass(e,"bs-tooltip-top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=u,this.options.orientation="horizontal",this.options.rtl?this.stylePos="right":this.stylePos="left",this.mousePos="clientX",this.sizePos="offsetWidth"),this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&0<this.options.ticks.length&&(s||(this.options.max=Math.max.apply(Math,this.options.ticks)),e||(this.options.min=Math.min.apply(Math,this.options.ticks))),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=l||this.trackLow,this.trackSelection=o||this.trackSelection,this.trackHigh=h||this.trackHigh,"none"===this.options.selection?(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")):"after"!==this.options.selection&&"before"!==this.options.selection||(this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=c||this.handle2,!0===p)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),n=0;n<this.ticks.length;n++)this._removeClass(this.ticks[n],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),n=0;n<this.ticks.length;n++)this._addClass(this.ticks[n],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip?(m=(w=this._addTickListener()).addMouseEnter(this,this.handle1),T=w.addMouseLeave(this,this.handle1),this.handleCallbackMap.handle1={mouseEnter:m,mouseLeave:T},m=w.addMouseEnter(this,this.handle2),T=w.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:m,mouseLeave:T}):this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.showTooltip,!1),this.sliderElem.addEventListener("touchmove",this.showTooltip,!1),this.sliderElem.addEventListener("touchend",this.hideTooltip,!1)),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1),this.touchCapable&&(this.handle1.addEventListener("touchstart",this.showTooltip,!1),this.handle1.addEventListener("touchmove",this.showTooltip,!1),this.handle1.addEventListener("touchend",this.hideTooltip,!1),this.handle2.addEventListener("touchstart",this.showTooltip,!1),this.handle2.addEventListener("touchmove",this.showTooltip,!1),this.handle2.addEventListener("touchend",this.hideTooltip,!1))),this.options.enabled?this.enable():this.disable()}return windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){}),c=Array.prototype.slice,(h=e)&&(d="undefined"==typeof console?t:function(e){console.error(e)},h.bridget=function(e,t){var i,o,l;(i=t).prototype.option||(i.prototype.option=function(e){h.isPlainObject(e)&&(this.options=h.extend(!0,this.options,e))}),o=e,l=t,h.fn[o]=function(t){var e;if("string"!=typeof t)return 1===(e=this.map(function(){var e=h.data(this,o);return e?(e.option(t),e._init()):(e=new l(this,t),h.data(this,o,e)),h(this)})).length?e[0]:e;for(var i=c.call(arguments,1),s=0,n=this.length;s<n;s++){var a=this[s],a=h.data(a,o);if(a)if(h.isFunction(a[t])&&"_"!==t.charAt(0)){var r=a[t].apply(a,i);if(void 0!==r&&r!==a)return r}else d("no such method '"+t+"' for "+o+" instance");else d("cannot call methods on "+o+" prior to initialization; attempted to call '"+t+"'")}return this}}),M=e,i=void 0,s=function(e){return"Invalid input value '"+e+"' passed in"},z={linear:{getValue:function(e,t){return e<t.min?t.min:e>t.max?t.max:e},toValue:function(e){var t=e/100*(this.options.max-this.options.min),i=!0;if(0<this.options.ticks_positions.length){for(var s,n,a,r=0,o=1;o<this.options.ticks_positions.length;o++)if(e<=this.options.ticks_positions[o]){s=this.options.ticks[o-1],a=this.options.ticks_positions[o-1],n=this.options.ticks[o],r=this.options.ticks_positions[o];break}t=s+(e-a)/(r-a)*(n-s),i=!1}i=(i?this.options.min:0)+Math.round(t/this.options.step)*this.options.step;return z.linear.getValue(i,this.options)},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(0<this.options.ticks_positions.length){for(var t,i,s,n=0,a=0;a<this.options.ticks.length;a++)if(e<=this.options.ticks[a]){t=0<a?this.options.ticks[a-1]:0,s=0<a?this.options.ticks_positions[a-1]:0,i=this.options.ticks[a],n=this.options.ticks_positions[a];break}if(0<a)return s+(e-t)/(i-t)*(n-s)}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=1-this.options.min,i=Math.log(this.options.min+t),s=Math.log(this.options.max+t),i=Math.exp(i+(s-i)*e/100)-t;return Math.round(i)===s?s:(i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,z.linear.getValue(i,this.options))},toPercentage:function(e){var t,i,s;return this.options.max===this.options.min?0:(t=1-this.options.min,i=Math.log(this.options.max+t),s=Math.log(this.options.min+t),100*(Math.log(e+t)-s)/(i-s))}}},(e=function(e,t){return r.call(this,e,t),this}).prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,lock_to_ticks:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,i){e=e||0;var s=this.getValue(),e=(this._state.value=this._validateInputValue(e),this._applyPrecision.bind(this)),e=(this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this.ticksAreValid&&this.options.lock_to_ticks&&(this._state.value[0]=this.options.ticks[this._getClosestTickIndex(this._state.value[0])],this._state.value[1]=this.options.ticks[this._getClosestTickIndex(this._state.value[1])]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this.ticksAreValid&&this.options.lock_to_ticks&&(this._state.value=this.options.ticks[this._getClosestTickIndex(this._state.value)]),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this._setTickIndex(),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout(),this.options.range?this._state.value:this._state.value[0]);this._setDataVal(e),!0===t&&this._trigger("slide",e);return(Array.isArray(e)?s[0]!==e[0]||s[1]!==e[1]:s!==e)&&!0===i&&this._trigger("change",{oldValue:s,newValue:e}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),M&&(this._unbindJQueryEventHandlers(),i===n&&this.$element.removeData(i),this.$element.removeData(a))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(e,t){return this._bindNonQueryEventHandler(e,t),this},off:function(e,t){M?(this.$element.off(e,t),this.$sliderElem.off(e,t)):this._unbindNonQueryEventHandler(e,t)},getAttribute:function(e){return e?this.options[e]:this.options},setAttribute:function(e,t){return this.options[e]=t,this},refresh:function(e){var t=this.getValue();return this._removeSliderEventHandlers(),r.call(this,this.element,this.options),e&&!0===e.useCurrentValue&&this.setValue(t),M&&(i===n&&M.data(this.element,n,this),M.data(this.element,a,this)),this},relayout:function(){return this._resize(),this},_removeTooltipListener:function(e,t){this.handle1.removeEventListener(e,t,!1),this.handle2.removeEventListener(e,t,!1)},_removeSliderEventHandlers:function(){if(this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.options.ticks_tooltip){for(var e=this.ticksContainer.getElementsByClassName("slider-tick"),t=0;t<e.length;t++)e[t].removeEventListener("mouseenter",this.ticksCallbackMap[t].mouseEnter,!1),e[t].removeEventListener("mouseleave",this.ticksCallbackMap[t].mouseLeave,!1);this.handleCallbackMap.handle1&&this.handleCallbackMap.handle2&&(this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,!1),this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1),this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1),this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1))}this.handleCallbackMap=null,this.ticksCallbackMap=null,this.showTooltip&&this._removeTooltipListener("focus",this.showTooltip),this.hideTooltip&&this._removeTooltipListener("blur",this.hideTooltip),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),this.touchCapable&&(this.showTooltip&&(this.handle1.removeEventListener("touchstart",this.showTooltip,!1),this.handle1.removeEventListener("touchmove",this.showTooltip,!1),this.handle2.removeEventListener("touchstart",this.showTooltip,!1),this.handle2.removeEventListener("touchmove",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("touchend",this.hideTooltip,!1),this.handle2.removeEventListener("touchend",this.hideTooltip,!1)),this.showTooltip&&(this.sliderElem.removeEventListener("touchstart",this.showTooltip,!1),this.sliderElem.removeEventListener("touchmove",this.showTooltip,!1)),this.hideTooltip&&this.sliderElem.removeEventListener("touchend",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1)),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(e,t){void 0===this.eventToCallbackMap[e]&&(this.eventToCallbackMap[e]=[]),this.eventToCallbackMap[e].push(t)},_unbindNonQueryEventHandler:function(e,t){var i=this.eventToCallbackMap[e];if(void 0!==i)for(var s=0;s<i.length;s++)if(i[s]===t){i.splice(s,1);break}},_cleanUpEventCallbacksMap:function(){for(var e=Object.keys(this.eventToCallbackMap),t=0;t<e.length;t++){var i=e[t];delete this.eventToCallbackMap[i]}},_showTooltip:function(){!1===this.options.tooltip_split?(this._addClass(this.tooltip,"show"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"show"),this._addClass(this.tooltip_max,"show"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){!1===this._state.inDrag&&!0!==this._alwaysShowTooltip&&(this._removeClass(this.tooltip,"show"),this._removeClass(this.tooltip_min,"show"),this._removeClass(this.tooltip_max,"show")),this._state.over=!1},_setToolTipOnMouseOver:function(e){var i=this,t=this.options.formatter((e||this._state).value[0]),e=s(e||this._state,this.options.reversed);function s(e,t){return t?[100-e.percentage[0],i.options.range?100-e.percentage[1]:e.percentage[1]]:[e.percentage[0],e.percentage[1]]}this._setText(this.tooltipInner,t),this.tooltip.style[this.stylePos]=e[0]+"%"},_copyState:function(){return{value:[this._state.value[0],this._state.value[1]],enabled:this._state.enabled,offset:this._state.offset,size:this._state.size,percentage:[this._state.percentage[0],this._state.percentage[1],this._state.percentage[2]],inDrag:this._state.inDrag,over:this._state.over,dragged:this._state.dragged,keyCtrl:this._state.keyCtrl}},_addTickListener:function(){return{addMouseEnter:function(s,n,a){function e(){var e=s._copyState(),t=n===s.handle1?e.value[0]:e.value[1],i=void 0,i=void 0!==a?(t=s.options.ticks[a],0<s.options.ticks_positions.length&&s.options.ticks_positions[a]||s._toPercentage(s.options.ticks[a])):s._toPercentage(t);e.value[0]=t,e.percentage[0]=i,s._setToolTipOnMouseOver(e),s._showTooltip()}return n.addEventListener("mouseenter",e,!1),e},addMouseLeave:function(e,t){function i(){e._hideTooltip()}return t.addEventListener("mouseleave",i,!1),i}}},_layout:function(){var e,t,i=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]];if(this.handle1.style[this.stylePos]=i[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),e=this.options.formatter(this._state.value[0]),isNaN(e)?this.handle1.setAttribute("aria-valuetext",e):this.handle1.removeAttribute("aria-valuetext"),this.handle2.style[this.stylePos]=i[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),e=this.options.formatter(this._state.value[1]),isNaN(e)?this.handle2.setAttribute("aria-valuetext",e):this.handle2.removeAttribute("aria-valuetext"),0<this.rangeHighlightElements.length&&Array.isArray(this.options.rangeHighlights)&&0<this.options.rangeHighlights.length)for(var s=0;s<this.options.rangeHighlights.length;s++){var n=this._toPercentage(this.options.rangeHighlights[s].start),a=this._toPercentage(this.options.rangeHighlights[s].end),r=(this.options.reversed&&(r=100-a,a=100-n,n=r),this._createHighlightRange(n,a));r?"vertical"===this.options.orientation?(this.rangeHighlightElements[s].style.top=r.start+"%",this.rangeHighlightElements[s].style.height=r.size+"%"):(this.options.rtl?this.rangeHighlightElements[s].style.right=r.start+"%":this.rangeHighlightElements[s].style.left=r.start+"%",this.rangeHighlightElements[s].style.width=r.size+"%"):this.rangeHighlightElements[s].style.display="none"}if(Array.isArray(this.options.ticks)&&0<this.options.ticks.length){var o="vertical"===this.options.orientation?"height":"width",l="vertical"===this.options.orientation?"marginTop":this.options.rtl?"marginRight":"marginLeft",h=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var d=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[l]=-h/2+"px"),d=this.tickLabelContainer.offsetHeight;else for(c=0;c<this.tickLabelContainer.childNodes.length;c++)this.tickLabelContainer.childNodes[c].offsetHeight>d&&(d=this.tickLabelContainer.childNodes[c].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=d+"px")}for(var c=0;c<this.options.ticks.length;c++){var u=this.options.ticks_positions[c]||this._toPercentage(this.options.ticks[c]);this.options.reversed&&(u=100-u),this.ticks[c].style[this.stylePos]=u+"%",this._removeClass(this.ticks[c],"in-selection"),this.options.range?u>=i[0]&&u<=i[1]&&this._addClass(this.ticks[c],"in-selection"):("after"===this.options.selection&&u>=i[0]||"before"===this.options.selection&&u<=i[0])&&this._addClass(this.ticks[c],"in-selection"),this.tickLabels[c]&&(this.tickLabels[c].style[o]=h+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[c]?(this.tickLabels[c].style.position="absolute",this.tickLabels[c].style[this.stylePos]=u+"%",this.tickLabels[c].style[l]=-h/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[c].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[c].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[l]=this.sliderElem.offsetWidth/2*-1+"px"),this._removeClass(this.tickLabels[c],"label-in-selection label-is-selection"),this.options.range?u>=i[0]&&u<=i[1]&&(this._addClass(this.tickLabels[c],"label-in-selection"),u!==i[0]&&!i[1]||this._addClass(this.tickLabels[c],"label-is-selection")):(("after"===this.options.selection&&u>=i[0]||"before"===this.options.selection&&u<=i[0])&&this._addClass(this.tickLabels[c],"label-in-selection"),u===i[0]&&this._addClass(this.tickLabels[c],"label-is-selection")))}}this.options.range?(t=this.options.formatter(this._state.value),this._setText(this.tooltipInner,t),this.tooltip.style[this.stylePos]=(i[1]+i[0])/2+"%",e=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner_min,e),e=this.options.formatter(this._state.value[1]),this._setText(this.tooltipInner_max,e),this.tooltip_min.style[this.stylePos]=i[0]+"%",this.tooltip_max.style[this.stylePos]=i[1]+"%"):(t=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,t),this.tooltip.style[this.stylePos]=i[0]+"%"),"vertical"===this.options.orientation?(this.trackLow.style.top="0",this.trackLow.style.height=Math.min(i[0],i[1])+"%",this.trackSelection.style.top=Math.min(i[0],i[1])+"%",this.trackSelection.style.height=Math.abs(i[0]-i[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(i[0],i[1])-Math.abs(i[0]-i[1])+"%"):("right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(i[0],i[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(i[0],i[1])+"%":this.trackSelection.style.left=Math.min(i[0],i[1])+"%",this.trackSelection.style.width=Math.abs(i[0]-i[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(i[0],i[1])-Math.abs(i[0]-i[1])+"%",e=this.tooltip_min.getBoundingClientRect(),t=this.tooltip_max.getBoundingClientRect(),"bottom"===this.options.tooltip_position?e.right>t.left?(this._removeClass(this.tooltip_max,"bs-tooltip-bottom"),this._addClass(this.tooltip_max,"bs-tooltip-top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"bs-tooltip-top"),this._addClass(this.tooltip_max,"bs-tooltip-bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):e.right>t.left?(this._removeClass(this.tooltip_max,"bs-tooltip-top"),this._addClass(this.tooltip_max,"bs-tooltip-bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bs-tooltip-bottom"),this._addClass(this.tooltip_max,"bs-tooltip-top"),this.tooltip_max.style.top=this.tooltip_min.style.top))},_createHighlightRange:function(e,t){return this._isHighlightRange(e,t)?t<e?{start:t,size:e-t}:{start:e,size:t-e}:null},_isHighlightRange:function(e,t){return 0<=e&&e<=100&&0<=t&&t<=100},_resize:function(e){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;e.preventDefault&&e.preventDefault(),this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t,i=this._getPercentage(e),s=(this.options.range?(s=Math.abs(this._state.percentage[0]-i),t=Math.abs(this._state.percentage[1]-i),this._state.dragged=s<t?0:1,this._adjustPercentageForRangeSliders(i)):this._state.dragged=0,this._state.percentage[this._state.dragged]=i,this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0,this.showTooltip(),this._calculateValue(!0));return this._trigger("slideStart",s),e.target.classList.contains("slider-tick")&&(s=parseFloat(e.target.getAttribute("data-tick-value"))),this.setValue(s,!1,!0),e.returnValue=!1,this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(e){this._mousedown(e)},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var i,s,n,a,r;switch(t.keyCode){case 37:case 40:i=-1;break;case 39:case 38:i=1}return i?(this.options.natural_arrow_keys&&(a="horizontal"===this.options.orientation,s="vertical"===this.options.orientation,r=this.options.rtl,n=this.options.reversed,a?r?n||(i=-i):n&&(i=-i):s&&!n&&(i=-i)),r=this.ticksAreValid&&this.options.lock_to_ticks?(a=void 0,-1===(a=this.options.ticks.indexOf(this._state.value[e]))&&(a=0,window.console.warn("(lock_to_ticks) _keydown: index should not be -1")),a+=i,a=Math.max(0,Math.min(this.options.ticks.length-1,a)),this.options.ticks[a]):this._state.value[e]+i*this.options.step,s=this._toPercentage(r),this._state.keyCtrl=e,r=this.options.range?(this._adjustPercentageForRangeSliders(s),n=this._state.keyCtrl?this._state.value[0]:r,a=this._state.keyCtrl?r:this._state.value[1],[Math.max(this.options.min,Math.min(this.options.max,n)),Math.max(this.options.min,Math.min(this.options.max,a))]):Math.max(this.options.min,Math.min(this.options.max,r)),this._trigger("slideStart",r),this.setValue(r,!0,!0),this._trigger("slideStop",r),this._pauseEvent(t),delete this._state.keyCtrl,!1):void 0},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){var t;return this._state.enabled&&(t=this._getPercentage(e),this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,t=this._calculateValue(!0),e.target.classList.contains("slider-tick")&&(t=parseFloat(e.target.getAttribute("data-tick-value"))),this.setValue(t,!0,!0)),!1},_touchmove:function(e){void 0!==e.changedTouches&&e.preventDefault&&e.preventDefault()},_adjustPercentageForRangeSliders:function(e){var t,i;this.options.range&&(t=this._getNumDigitsAfterDecimalPlace(e),i=this._applyToFixedAndParseFloat(e,t=t?t-1:0),0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<i?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>i?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._toPercentage(this._state.value[1])<e?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._toPercentage(this._state.value[0])>e&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus()))},_mouseup:function(e){var t;return this._state.enabled&&(t=this._getPercentage(e),this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this.hideTooltip(),!1===this._state.over&&this._hideTooltip(),t=this._calculateValue(!0),e.target.classList.contains("slider-tick")&&(t=parseFloat(e.target.getAttribute("data-tick-value"))),this.setValue(t,!1,!0),this._trigger("slideStop",t),this._state.dragged=null),!1},_setValues:function(e,t){this._state.percentage[e]!==(0===e?0:100)&&(t.data[e]=this._toValue(this._state.percentage[e]),t.data[e]=this._applyPrecision(t.data[e]))},_calculateValue:function(e){var t={};return this.options.range?(t.data=[this.options.min,this.options.max],this._setValues(0,t),this._setValues(1,t),e&&(t.data[0]=this._snapToClosestTick(t.data[0]),t.data[1]=this._snapToClosestTick(t.data[1]))):(t.data=this._toValue(this._state.percentage[0]),t.data=parseFloat(t.data),t.data=this._applyPrecision(t.data),e&&(t.data=this._snapToClosestTick(t.data))),t.data},_snapToClosestTick:function(e){for(var t=[e,1/0],i=0;i<this.options.ticks.length;i++){var s=Math.abs(this.options.ticks[i]-e);s<=t[1]&&(t=[this.options.ticks[i],s])}return t[1]<=this.options.ticks_snap_bounds?t[0]:e},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(e,t)},_getNumDigitsAfterDecimalPlace:function(e){e=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){e=e.toFixed(t);return parseFloat(e)},_getPercentage:function(e){e=(e=!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type&&"touchend"!==e.type?e:e.changedTouches[0])[this.mousePos]-this._state.offset[this.stylePos],e=(e="right"===this.stylePos?-e:e)/this._state.size*100,e=Math.round(e/this._state.percentage[2])*this._state.percentage[2];return this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(e){if(isNaN(+e)){if(Array.isArray(e))return this._validateArray(e),e;throw new Error(s(e))}return+e},_validateArray:function(e){for(var t=0;t<e.length;t++){var i=e[t];if("number"!=typeof i)throw new Error(s(i))}},_setDataVal:function(e){this.element.setAttribute("data-value",e),this.element.setAttribute("value",e),this.element.value=e},_trigger:function(e,t){t=t||0===t?t:void 0;var i=this.eventToCallbackMap[e];if(i&&i.length)for(var s=0;s<i.length;s++)(0,i[s])(t);M&&this._triggerJQueryEvent(e,t)},_triggerJQueryEvent:function(e,t){e={type:e,value:t};this.$element.trigger(e),this.$sliderElem.trigger(e)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){void 0!==e.textContent?e.textContent=t:void 0!==e.innerText&&(e.innerText=t)},_removeClass:function(e,t){for(var i=t.split(" "),s=e.className,n=0;n<i.length;n++)var a=i[n],a=new RegExp("(?:\\s|^)"+a+"(?:\\s|$)"),s=s.replace(a," ");e.className=s.trim()},_addClass:function(e,t){for(var i=t.split(" "),s=e.className,n=0;n<i.length;n++){var a=i[n];new RegExp("(?:\\s|^)"+a+"(?:\\s|$)").test(s)||(s+=" "+a)}e.className=s.trim()},_offsetLeft:function(e){return e.getBoundingClientRect().left},_offsetRight:function(e){return e.getBoundingClientRect().right},_offsetTop:function(e){for(var t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop,"BODY"!==e.tagName&&(t-=e.scrollTop);return t},_offset:function(e){return{left:this._offsetLeft(e),right:this._offsetRight(e),top:this._offsetTop(e)}},_css:function(e,t,i){M?M.style(e,t,i):(t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()}),e.style[t]=i)},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPosition:function(){var t,i,e=[this.tooltip,this.tooltip_min,this.tooltip_max];"vertical"===this.options.orientation?(t=this.options.tooltip_position||(this.options.rtl?"left":"right"),i="left"===t?"right":"left",e.forEach(function(e){this._addClass(e,"bs-tooltip-"+t),e.style[i]="100%"}.bind(this))):"bottom"===this.options.tooltip_position?e.forEach(function(e){this._addClass(e,"bs-tooltip-bottom"),e.style.top="22px"}.bind(this)):e.forEach(function(e){this._addClass(e,"bs-tooltip-top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))},_getClosestTickIndex:function(e){for(var t=Math.abs(e-this.options.ticks[0]),i=0,s=0;s<this.options.ticks.length;++s){var n=Math.abs(e-this.options.ticks[s]);n<t&&(t=n,i=s)}return i},_setTickIndex:function(){this.ticksAreValid&&(this._state.tickIndex=[this.options.ticks.indexOf(this._state.value[0]),this.options.ticks.indexOf(this._state.value[1])])}},M&&M.fn&&(i=M.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),a):(M.bridget(n,e),n),M.bridget(a,e),M(function(){M("input[data-provide=slider]")[i]()})),e}),window.addEventListener("load",()=>{let h=window.inputKnobsOptions||{};h.knobWidth=h.knobWidth||h.knobDiameter||64,h.knobHeight=h.knobHeight||h.knobDiameter||64,h.sliderWidth=h.sliderWidth||h.sliderDiameter||128,h.sliderHeight=h.sliderHeight||h.sliderDiameter||20,h.switchWidth=h.switchWidth||h.switchDiameter||24,h.switchHeight=h.switchHeight||h.switchDiameter||24,h.fgcolor=h.fgcolor||"#f00",h.bgcolor=h.bgcolor||"#000",h.knobMode=h.knobMode||"linear",h.sliderMode=h.sliderMode||"relative";var e=document.createElement("style");e.innerHTML=`input[type=range].input-knob,input[type=range].input-slider{
  -webkit-appearance:none;
  -moz-appearance:none;
  border:none;
  box-sizing:border-box;
  overflow:hidden;
  background-repeat:no-repeat;
  background-size:100% 100%;
  background-position:0px 0%;
  background-color:transparent;
  touch-action:none;
}
input[type=range].input-knob{
  width:${h.knobWidth}px; height:${h.knobHeight}px;
}
input[type=range].input-slider{
  width:${h.sliderWidth}px; height:${h.sliderHeight}px;
}
input[type=range].input-knob::-webkit-slider-thumb,input[type=range].input-slider::-webkit-slider-thumb{
  -webkit-appearance:none;
  opacity:0;
}
input[type=range].input-knob::-moz-range-thumb,input[type=range].input-slider::-moz-range-thumb{
  -moz-appearance:none;
  height:0;
  border:none;
}
input[type=range].input-knob::-moz-range-track,input[type=range].input-slider::-moz-range-track{
  -moz-appearance:none;
  height:0;
  border:none;
}
input[type=checkbox].input-switch,input[type=radio].input-switch {
  width:${h.switchWidth}px;
  height:${h.switchHeight}px;
  -webkit-appearance:none;
  -moz-appearance:none;
  background-size:100% 200%;
  background-position:0% 0%;
  background-repeat:no-repeat;
  border:none;
  border-radius:0;
  background-color:transparent;
}
input[type=checkbox].input-switch:checked,input[type=radio].input-switch:checked {
  background-position:0% 100%;
}`,document.head.appendChild(e);let r=(t,i,s)=>{let n="";var a,r,o,l,h;for(let e=0;e<8;e++)4!=e&&(l=45*e*Math.PI/180,a=32+27*Math.sin(l),r=32-27*Math.cos(l),o=32+32*Math.sin(l),l=32-32*Math.cos(l),h=0===e?i:s,n+=`<line x1="${a.toFixed(1)}" y1="${r.toFixed(1)}" x2="${o.toFixed(1)}" y2="${l.toFixed(1)}" stroke-width="5" stroke="${h}"/>`);let d=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="${64*t}" viewBox="0 0 64 ${64*t}" preserveAspectRatio="none">
<defs>
  <g id="K">
    <circle cx="32" cy="32" r="25" stroke="${i}" stroke-width="2" fill="none"/>
    <line x1="32" y1="28" x2="32" y2="7" stroke-width="6" stroke="${i}"/>
  </g>
</defs>`;for(let e=0;e<t;e++)d+=`<g transform="translate(0,${64*e})">
      ${n}
      <use xlink:href="#K" transform="rotate(${270*e/t-135},32,32)"/>
    </g>`;return d+"</svg>"},d=(t,e,i,s,n)=>{let a=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${s}" height="${t*n}" viewBox="0 0 ${s} ${t*n}" preserveAspectRatio="none">
<defs><g id="B"><rect x="0" y="0" width="${s}" height="${n}" rx="${n/2}" ry="${n/2}" fill="${i}"/></g>
<g id="K"><circle x="${s/2}" y="0" r="${n/2*.9}" fill="${e}"/></g></defs>`;for(let e=0;e<t;++e)a=(a+=`<use xlink:href="#B" transform="translate(0,${n*e})"/>`)+`<use xlink:href="#K" transform="translate(${n/2+(s-n)*e/100},${n/2+n*e})"/>`;return a+"</svg>"},c=(t,e,i,s,n)=>{let a=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${s}" height="${t*n}" viewBox="0 0 ${s} ${t*n}" preserveAspectRatio="none">
<defs><rect id="B" x="0" y="0" width="${s}" height="${n}" rx="${s/2}" ry="${s/2}" fill="${i}"/>
<circle id="K" x="0" y="0" r="${s/2*.9}" fill="${e}"/></defs>`;for(let e=0;e<t;++e)a=(a+=`<use xlink:href="#B" transform="translate(0,${n*e})"/>`)+`<use xlink:href="#K" transform="translate(${s/2} ${n*(e+1)-s/2-e*(n-s)/100})"/>`;return a+"</svg>"},i=i=>{let s,n,a,r,o;i.inputKnobs||(i.inputKnobs={},i.refresh=()=>{var e=i.getAttribute("data-src"),t=(a=+i.getAttribute("data-diameter"),document.defaultView.getComputedStyle(i,null));s=parseFloat(i.getAttribute("data-width")||a||t.width),n=parseFloat(i.getAttribute("data-height")||a||t.height),o=i.getAttribute("data-bgcolor")||h.bgcolor,r=i.getAttribute("data-fgcolor")||h.fgcolor,i.style.width=s+"px",i.style.height=n+"px",e?i.style.backgroundImage="url("+e+")":(t=Math.min(s,n),e=`<svg xmlns="http://www.w3.org/2000/svg" width="${s}" height="${2*n}" viewBox="0 0 ${s} ${2*n}" preserveAspectRatio="none">
<g><rect fill="${o}" x="1" y="1" width="${s-2}" height="${n-2}" rx="${.25*t}" ry="${.25*t}"/>
<rect fill="${o}" x="1" y="${n+1}" width="${s-2}" height="${n-2}" rx="${.25*t}" ry="${.25*t}"/>
<circle fill="${r}" cx="${.5*s}" cy="${1.5*n}" r="${.25*t}"/></g></svg>`,i.style.backgroundImage="url(data:image/svg+xml;base64,"+btoa(e)+")")},i.refresh())},s=l=>{let i,s,t,n,a;if(l.inputKnobs)l.redraw();else{let o=l.inputKnobs={};l.refresh=()=>{t=+l.getAttribute("data-diameter");var e=document.defaultView.getComputedStyle(l,null),e=(i=parseFloat(l.getAttribute("data-width")||t||e.width),s=parseFloat(l.getAttribute("data-height")||t||e.height),a=l.getAttribute("data-bgcolor")||h.bgcolor,n=l.getAttribute("data-fgcolor")||h.fgcolor,o.sensex=o.sensey=200,0<=l.className.indexOf("input-knob")?o.itype="k":i>=s?(o.itype="h",o.sensex=i-s,o.sensey=1/0,l.style.backgroundSize="auto 100%"):(o.itype="v",o.sensex=1/0,o.sensey=s-i,l.style.backgroundSize="100% auto"),l.style.width=i+"px",l.style.height=s+"px",o.frameheight=s,l.getAttribute("data-src"));if(e){l.style.backgroundImage=`url(${e})`;e=+l.getAttribute("data-sprites");o.sprites=e||0,1<=o.sprites?l.style.backgroundSize=`100% ${100*(o.sprites+1)}%`:"k"!=o.itype&&(l.style.backgroundColor=a,l.style.borderRadius=.25*Math.min(i,s)+"px")}else{let e;switch(o.itype){case"k":e=r(101,n,a);break;case"h":e=d(101,n,a,i,s);break;case"v":e=c(101,n,a,i,s)}o.sprites=100,l.style.backgroundImage="url(data:image/svg+xml;base64,"+btoa(e)+")",l.style.backgroundSize=`100% ${100*(o.sprites+1)}%`}o.valrange={min:+l.min,max:""==l.max?100:+l.max,step:""==l.step?1:+l.step},l.redraw(!0)},l.setValue=e=>{(e=(e=Math.round((e-o.valrange.min)/o.valrange.step)*o.valrange.step+o.valrange.min)<o.valrange.min?o.valrange.min:e)>o.valrange.max&&(e=o.valrange.max),l.value=e,l.value!=o.oldvalue&&(l.setAttribute("value",l.value),l.redraw(),(e=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),l.dispatchEvent(e),o.oldvalue=l.value)},o.pointerdown=e=>{l.focus();var t=e,i=(e.touches&&(e=e.touches[0]),l.getBoundingClientRect()),s=.5*(i.left+i.right),i=.5*(i.top+i.bottom),n=e.clientX,a=e.clientY,r=Math.atan2(e.clientX-s,i-e.clientY);"k"==o.itype&&"circularabs"==h.knobMode&&(dv=o.valrange.min+(r/Math.PI*.75+.5)*(o.valrange.max-o.valrange.min),l.setValue(dv)),"k"!=o.itype&&"abs"==h.sliderMode&&(dv=.5*(o.valrange.min+o.valrange.max)+((n-s)/o.sensex-(a-i)/o.sensey)*(o.valrange.max-o.valrange.min),l.setValue(dv)),o.dragfrom={x:e.clientX,y:e.clientY,a:Math.atan2(e.clientX-s,i-e.clientY),v:+l.value},document.addEventListener("mousemove",o.pointermove,{passive:!1}),document.addEventListener("mouseup",o.pointerup,{passive:!0}),document.addEventListener("touchmove",o.pointermove,{passive:!1}),document.addEventListener("touchend",o.pointerup,{passive:!0}),document.addEventListener("touchcancel",o.pointerup,{passive:!0}),document.addEventListener("touchstart",o.preventScroll,{passive:!1}),t.preventDefault(),t.stopPropagation()},o.pointermove=e=>{let t;var i=l.getBoundingClientRect(),s=.5*(i.left+i.right),i=.5*(i.top+i.bottom),n=(e=e.touches?e.touches[0]:e).clientX-o.dragfrom.x,a=e.clientY-o.dragfrom.y;let r=Math.atan2(e.clientX-s,i-e.clientY);switch(o.itype){case"k":switch(h.knobMode){case"linear":t=(n/o.sensex-a/o.sensey)*(o.valrange.max-o.valrange.min),e.shiftKey&&(t*=.2),l.setValue(o.dragfrom.v+t);break;case"circularabs":if(!e.shiftKey){t=o.valrange.min+(r/Math.PI*.75+.5)*(o.valrange.max-o.valrange.min),l.setValue(t);break}case"circularrel":r>o.dragfrom.a+Math.PI&&(r-=2*Math.PI),r<o.dragfrom.a-Math.PI&&(r+=2*Math.PI),r-=o.dragfrom.a,t=r/Math.PI/1.5*(o.valrange.max-o.valrange.min),e.shiftKey&&(t*=.2),l.setValue(o.dragfrom.v+t)}break;case"h":case"v":t=(n/o.sensex-a/o.sensey)*(o.valrange.max-o.valrange.min),e.shiftKey&&(t*=.2),l.setValue(o.dragfrom.v+t)}},o.pointerup=()=>{document.removeEventListener("mousemove",o.pointermove),document.removeEventListener("touchmove",o.pointermove),document.removeEventListener("mouseup",o.pointerup),document.removeEventListener("touchend",o.pointerup),document.removeEventListener("touchcancel",o.pointerup),document.removeEventListener("touchstart",o.preventScroll);var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),l.dispatchEvent(e)},o.preventScroll=e=>{e.preventDefault()},o.keydown=()=>{l.redraw()},o.wheel=e=>{let t=0<e.deltaY?-o.valrange.step:o.valrange.step;e.shiftKey||(t*=5),l.setValue(+l.value+t),e.preventDefault(),e.stopPropagation()},l.redraw=e=>{if(e||o.valueold!=l.value){var t=(l.value-o.valrange.min)/(o.valrange.max-o.valrange.min);if(1<=o.sprites)l.style.backgroundPosition="0px "+-(t*o.sprites|0)*o.frameheight+"px";else switch(o.itype){case"k":l.style.transform="rotate("+(270*t-135)+"deg)";break;case"h":l.style.backgroundPosition=(i-s)*t+"px 0px";break;case"v":l.style.backgroundPosition="0px "+(s-i)*(1-t)+"px"}o.valueold=l.value}},l.refresh(),l.redraw(!0),l.addEventListener("keydown",o.keydown,{passive:!0}),l.addEventListener("mousedown",o.pointerdown,{passive:!1}),l.addEventListener("touchstart",o.pointerdown,{passive:!1}),l.addEventListener("wheel",o.wheel,{passive:!1})}},n=()=>{let t=document.querySelectorAll("input.input-knob,input.input-slider");for(let e=0;e<t.length;++e)a.push([s,t[e]]);t=document.querySelectorAll("input[type=checkbox].input-switch,input[type=radio].input-switch");for(let e=0;e<t.length;++e)a.push([i,t[e]])},a=[];n(),setInterval(()=>{for(let e=0;0<a.length&&e<8;++e){var t=a.shift();t[0](t[1])}a.length<=0&&n()},50)}),!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(n,a,r){function o(i,e){if(!a[i]){if(!n[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}t=a[i]={exports:{}};n[i][0].call(t.exports,function(e){var t=n[i][1][e];return o(t||e)},t,t.exports,s,n,a,r)}return a[i].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)o(r[e]);return o}({1:[function(e,t,i){var c=e("./utils"),u=e("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,s,n,a,r,o=[],l=0,h=e.length,d="string"!==c.getTypeOf(e);l<e.length;)r=h-l,s=d?(t=e[l++],i=l<h?e[l++]:0,l<h?e[l++]:0):(t=e.charCodeAt(l++),i=l<h?e.charCodeAt(l++):0,l<h?e.charCodeAt(l++):0),n=(3&t)<<4|i>>4,a=1<r?(15&i)<<2|s>>6:64,r=2<r?63&s:64,o.push(p.charAt(t>>2)+p.charAt(n)+p.charAt(a)+p.charAt(r));return o.join("")},i.decode=function(e){var t,i,s,n,a,r,o=0,l=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&d--,e.charAt(e.length-2)===p.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=new(u.uint8array?Uint8Array:Array)(0|d);o<e.length;)s=p.indexOf(e.charAt(o++)),t=(15&(n=p.indexOf(e.charAt(o++))))<<4|(a=p.indexOf(e.charAt(o++)))>>2,i=(3&a)<<6|(r=p.indexOf(e.charAt(o++))),h[l++]=s<<2|n>>4,64!==a&&(h[l++]=t),64!==r&&(h[l++]=i);return h}},{"./support":30,"./utils":32}],2:[function(e,t,i){var s=e("./external"),n=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),r=e("./stream/DataLengthProbe");function o(e,t,i,s,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=s,this.compressedContent=n}o.prototype={getContentWorker:function(){var e=new n(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new n(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,i){return e.pipe(new a).pipe(new r("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new r("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){var f=e("./utils");var m=(()=>{for(var e=[],t=0;t<256;t++){for(var i=t,s=0;s<8;s++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e})();t.exports=function(e,t){if(void 0===e||!e.length)return 0;if("string"!==f.getTypeOf(e)){var i=0|t,s=e,n=e.length,a=0,r=m,o=a+n;i^=-1;for(var l=a;l<o;l++)i=i>>>8^r[255&(i^s[l])];return-1^i}var h=0|t,d=e,n=e.length,a=0,c=m,u=a+n;h^=-1;for(var p=a;p<u;p++)h=h>>>8^c[255&(h^d.charCodeAt(p))];return-1^h}},{"./utils":32}],5:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){var s=null,s="undefined"!=typeof Promise?Promise:e("lie");t.exports={Promise:s}},{lie:37}],7:[function(e,t,i){var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),a=e("./utils"),r=e("./stream/GenericWorker"),o=s?"uint8array":"array";function l(e,t){r.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",a.inherits(l,r),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},l.prototype.flush=function(){r.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},i.compressWorker=function(e){return new l("Deflate",e)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){function v(e,t){for(var i="",s=0;s<t;s++)i+=String.fromCharCode(255&e),e>>>=8;return i}function s(e,t,i,s,n,a){var r=e.file,o=e.compression,l=a!==y.utf8encode,h=b.transformTo("string",a(r.name)),d=b.transformTo("string",y.utf8encode(r.name)),c=r.comment,a=b.transformTo("string",a(c)),u=b.transformTo("string",y.utf8encode(c)),p=d.length!==r.name.length,c=u.length!==c.length,f="",m=r.dir,_=r.date,g={crc32:0,compressedSize:0,uncompressedSize:0},i=(t&&!i||(g.crc32=e.crc32,g.compressedSize=e.compressedSize,g.uncompressedSize=e.uncompressedSize),0),e=(t&&(i|=8),l||!p&&!c||(i|=2048),0),t=0,_=(m&&(e|=16),"UNIX"===n?(t=798,e|=(l=r.unixPermissions,n=m,(65535&(l?l:n?16893:33204))<<16)):(t=20,e|=63&(r.dosPermissions||0)),m=_.getUTCHours(),m<<=6,m=(m=(m|_.getUTCMinutes())<<5)|_.getUTCSeconds()/2,l=_.getUTCFullYear()-1980,l=(l=((l<<=4)|_.getUTCMonth()+1)<<5)|_.getUTCDate(),p&&(n=v(1,1)+v(w(h),4)+d,f+="up"+v(n.length,2)+n),c&&(r=v(1,1)+v(w(a),4)+u,f+="uc"+v(r.length,2)+r),""),_=(_=(_=(_=(_=(_=(_=(_=(_=(_+="\n\0")+v(i,2))+o.magic)+v(m,2))+v(l,2))+v(g.crc32,4))+v(g.compressedSize,4))+v(g.uncompressedSize,4))+v(h.length,2))+v(f.length,2);return{fileRecord:k.LOCAL_FILE_HEADER+_+h+f,dirRecord:k.CENTRAL_FILE_HEADER+v(t,2)+_+v(a.length,2)+"\0\0\0\0"+v(e,4)+v(s,4)+h+f+a}}var b=e("../utils"),n=e("../stream/GenericWorker"),y=e("../utf8"),w=e("../crc32"),k=e("../signature");function a(e,t,i,s){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=s,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(a,n),a.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,s=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,n.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-s-1))/i:100}}))},a.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;t?(e=s(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:e.fileRecord,meta:{percent:0}})):this.accumulate=!0},a.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,i=s(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),t)this.push({data:(t=e,k.DATA_DESCRIPTOR+v(t.crc32,4)+v(t.compressedSize,4)+v(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},a.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i=this.bytesWritten-e,i=((e,t,i,s,n)=>(n=b.transformTo("string",n(s)),k.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(e,2)+v(e,2)+v(t,4)+v(i,4)+v(n.length,2)+n))(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},a.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},a.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},a.prototype.error=function(e){var t=this._sources;if(!n.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(e){}return!0},a.prototype.lock=function(){n.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=a},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){var h=e("../compressions"),s=e("./ZipFileWorker");i.generateWorker=function(e,r,t){var o=new s(r.streamFiles,t,r.platform,r.encodeFileName),l=0;try{e.forEach(function(e,t){l++;var i=((e,t)=>{if(t=h[e=e||t])return t;throw new Error(e+" is not a valid compression method !")})(t.options.compression,r.compression),s=t.options.compressionOptions||r.compressionOptions||{},n=t.dir,a=t.date;t._compressWorker(i,s).withStreamInfo("file",{name:e,dir:n,date:a,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=l}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e,t=new s;for(e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(e,t){return(new s).loadAsync(e,t)},s.external=e("./external"),t.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){var l=e("./utils"),n=e("./external"),s=e("./utf8"),a=e("./zipEntries"),h=e("./stream/Crc32Probe"),d=e("./nodejsUtils");t.exports=function(e,r){var o=this;return r=l.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",e,!0,r.optimizedBinaryString,r.base64).then(function(e){var t=new a(r);return t.load(e),t}).then(function(e){var t=[n.Promise.resolve(e)],i=e.files;if(r.checkCRC32)for(var s=0;s<i.length;s++)t.push((s=>new n.Promise(function(e,t){var i=s.decompressed.getContentWorker().pipe(new h);i.on("error",function(e){t(e)}).on("end",function(){i.streamInfo.crc32!==s.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()}))(i[s]));return n.Promise.all(t)}).then(function(e){for(var e=e.shift(),t=e.files,i=0;i<t.length;i++){var s=t[i],n=s.fileNameStr,a=l.resolve(s.fileNameStr);o.file(a,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:r.createFolders}),s.dir||(o.file(a).unsafeOriginalName=n)}return e.zipComment.length&&(o.comment=e.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){var s=e("../utils"),n=e("../stream/GenericWorker");function a(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}s.inherits(a,n),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){var n=e("readable-stream").Readable;function s(e,t,i){n.call(this,t),this._helper=e;var s=this;e.on("data",function(e,t){s.push(e)||s._helper.pause(),i&&i(t)}).on("error",function(e){s.emit("error",e)}).on("end",function(){s.push(null)})}e("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},t.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){return Buffer.alloc?Buffer.alloc(e):((e=new Buffer(e)).fill(0),e)},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){function r(e){var t=(e="/"===e.slice(-1)?e.substring(0,e.length-1):e).lastIndexOf("/");return 0<t?e.substring(0,t):""}function o(e,t){return t=void 0!==t?t:d.createFolders,e=g(e),this.files[e]||_.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]}var n=e("./utf8"),l=e("./utils"),h=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),d=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),p=e("./generate"),f=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),_=function(e,t,i){var s=l.getTypeOf(t),n=l.extend(i||{},d),a=(n.date=n.date||new Date,null!==n.compression&&(n.compression=n.compression.toUpperCase()),"string"==typeof n.unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(e=g(e)),n.createFolders&&(a=r(e))&&o.call(this,a,!0),"string"===s&&!1===n.binary&&!1===n.base64);i&&void 0!==i.binary||(n.binary=!a);(t instanceof c&&0===t.uncompressedSize||n.dir||!t||0===t.length)&&(n.base64=!1,n.binary=!0,t="",n.compression="STORE");s=null,s=t instanceof c||t instanceof h?t:f.isNode&&f.isStream(t)?new m(e,t):l.prepareContent(e,t,n.binary,n.optimizedBinaryString,n.base64),i=new u(e,s,n);this.files[e]=i},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,s;for(t in this.files)s=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,s)},filter:function(i){var s=[];return this.forEach(function(e,t){i(e,t)&&s.push(t)}),s},file:function(e,t,i){var s,n;return 1===arguments.length?v(e)?(s=e,this.filter(function(e,t){return!t.dir&&s.test(e)})):(n=this.files[this.root+e])&&!n.dir?n:null:(e=this.root+e,_.call(this,e,t,i),this)},folder:function(i){var e,t;return i?v(i)?this.filter(function(e,t){return t.dir&&i.test(e)}):(e=this.root+i,e=o.call(this,e),(t=this.clone()).root=e.name,t):this},remove:function(i){i=this.root+i;var e=this.files[i];if(e||("/"!==i.slice(-1)&&(i+="/"),e=this.files[i]),e&&!e.dir)delete this.files[i];else for(var t=this.filter(function(e,t){return t.name.slice(0,i.length)===i}),s=0;s<t.length;s++)delete this.files[t[s].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t={};try{if((t=l.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");l.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var i=t.comment||this.comment||"",s=p.generateWorker(this,t,i)}catch(e){(s=new h("error")).error(e)}return new a(s,t.type||"string",t.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){var s=e("./DataReader");function n(e){s.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,s),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),s=e.charCodeAt(2),n=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===i&&this.data[a+2]===s&&this.data[a+3]===n)return a-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),s=e.charCodeAt(2),e=e.charCodeAt(3),n=this.readData(4);return t===n[0]&&i===n[1]&&s===n[2]&&e===n[3]},n.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?[]:(t=this.data.slice(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){var s=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return s.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,i){var s=e("./Uint8ArrayReader");function n(e){s.call(this,e)}e("../utils").inherits(n,s),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){var s=e("./DataReader");function n(e){s.call(this,e)}e("../utils").inherits(n,s),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){var s=e("./ArrayReader");function n(e){s.call(this,e)}e("../utils").inherits(n,s),n.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?new Uint8Array(0):(t=this.data.subarray(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){var s=e("../utils"),n=e("../support"),a=e("./ArrayReader"),r=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=s.getTypeOf(e);return s.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new o(e):n.uint8array?new l(s.transformTo("uint8array",e)):new a(s.transformTo("array",e)):new r(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,i){var s=e("./GenericWorker"),n=e("../utils");function a(e){s.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(a,s),a.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){var s=e("./GenericWorker"),n=e("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,s),a.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){var s=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}s.inherits(a,n),a.prototype.processChunk=function(e){var t;e&&(t=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=t+e.data.length),n.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){var s=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=s.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}s.inherits(a,n),a.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){function s(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var e;return!(!this.isPaused||this.isFinished||(e=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),e))},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=s},{}],29:[function(e,t,i){var l=e("../utils"),n=e("./ConvertWorker"),a=e("./GenericWorker"),h=e("../base64"),s=e("../support"),r=e("../external"),o=null;if(s.nodestream)try{o=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,o){return new r.Promise(function(t,i){var s=[],n=e._internalType,a=e._outputType,r=e._mimeType;e.on("data",function(e,t){s.push(e),o&&o(t)}).on("error",function(e){s=[],i(e)}).on("end",function(){try{var e=((e,t,i)=>{switch(e){case"blob":return l.newBlob(l.transformTo("arraybuffer",t),i);case"base64":return h.encode(t);default:return l.transformTo(e,t)}})(a,((e,t)=>{for(var i=0,s=null,n=0,a=0;a<t.length;a++)n+=t[a].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(s=new Uint8Array(n),a=0;a<t.length;a++)s.set(t[a],i),i+=t[a].length;return s;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}})(n,s),r);t(e)}catch(e){i(e)}s=[]}).resume()})}function c(e,t,i){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=i,l.checkSupport(s),this._worker=e.pipe(new n(s)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}c.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,function(e){t.call(i,e.data,e.meta)}):this._worker.on(e,function(){l.delay(t,arguments,i)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(l.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=0===new Blob([s],{type:"application/zip"}).size}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(s),i.blob=0===n.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var l=e("./utils"),h=e("./support"),d=e("./nodejsUtils"),i=e("./stream/GenericWorker"),c=new Array(256),s=0;s<256;s++)c[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;c[254]=c[254]=1;function a(){i.call(this,"utf-8 decode"),this.leftOver=null}function r(){i.call(this,"utf-8 encode")}n.utf8encode=function(e){if(h.nodebuffer)return d.newBufferFrom(e,"utf-8");for(var t,i,s,n,a=e,r=a.length,o=0,l=0;l<r;l++)55296==(64512&(i=a.charCodeAt(l)))&&l+1<r&&56320==(64512&(s=a.charCodeAt(l+1)))&&(i=65536+(i-55296<<10)+(s-56320),l++),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new(h.uint8array?Uint8Array:Array)(o),l=n=0;n<o;l++)55296==(64512&(i=a.charCodeAt(l)))&&l+1<r&&56320==(64512&(s=a.charCodeAt(l+1)))&&(i=65536+(i-55296<<10)+(s-56320),l++),i<128?t[n++]=i:(i<2048?t[n++]=192|i>>>6:(i<65536?t[n++]=224|i>>>12:(t[n++]=240|i>>>18,t[n++]=128|i>>>12&63),t[n++]=128|i>>>6&63),t[n++]=128|63&i);return t},n.utf8decode=function(e){if(h.nodebuffer)return l.transformTo("nodebuffer",e).toString("utf-8");for(var t,i,s=e=l.transformTo(h.uint8array?"uint8array":"array",e),n=s.length,a=new Array(2*n),r=0,o=0;o<n;)if((t=s[o++])<128)a[r++]=t;else if(4<(i=c[t]))a[r++]=65533,o+=i-1;else{for(t&=2===i?31:3===i?15:7;1<i&&o<n;)t=t<<6|63&s[o++],i--;1<i?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),l.applyFromCharCode(a)},l.inherits(a,i),a.prototype.processChunk=function(e){var t=l.transformTo(h.uint8array?"uint8array":"array",e.data),i=(this.leftOver&&this.leftOver.length&&(h.uint8array?(i=t,(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)):t=this.leftOver.concat(t),this.leftOver=null),((e,t)=>{for(var i=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+c[e[i]]>t?i:t})(t)),s=t;i!==t.length&&(h.uint8array?(s=t.subarray(0,i),this.leftOver=t.subarray(i,t.length)):(s=t.slice(0,i),this.leftOver=t.slice(i,t.length))),this.push({data:n.utf8decode(s),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=a,l.inherits(r,i),r.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=r},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){var o=e("./support"),l=e("./base64"),i=e("./nodejsUtils"),h=e("./external");function s(e){return e}function d(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}e("setimmediate"),r.newBlob=function(t,i){r.checkSupport("blob");try{return new Blob([t],{type:i})}catch(e){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(t),s.getBlob(i)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(e,t,i){var s=[],n=0,a=e.length;if(a<=i)return String.fromCharCode.apply(null,e);for(;n<a;)s.push("array"===t||"nodebuffer"===t?String.fromCharCode.apply(null,e.slice(n,Math.min(n+i,a))):String.fromCharCode.apply(null,e.subarray(n,Math.min(n+i,a)))),n+=i;return s.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:(()=>{try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}})(),nodebuffer:(()=>{try{return o.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}})()}};function a(e){var t=65536,i=r.getTypeOf(e),s=!0;if("uint8array"===i?s=n.applyCanBeUsed.uint8array:"nodebuffer"===i&&(s=n.applyCanBeUsed.nodebuffer),s)for(;1<t;)try{return n.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return n.stringifyByChar(e)}function c(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}r.applyFromCharCode=a;var u={};u.string={string:s,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:function(e){return d(e,i.allocBuffer(e.length))}},u.array={string:a,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},u.arraybuffer={string:function(e){return a(new Uint8Array(e))},array:function(e){return c(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},u.uint8array={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return i.newBufferFrom(e)}},u.nodebuffer={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:s},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var i=r.getTypeOf(t);return u[i][e](t)},r.resolve=function(e){for(var t=e.split("/"),i=[],s=0;s<t.length;s++){var n=t[s];"."===n||""===n&&0!==s&&s!==t.length-1||(".."===n?i.pop():i.push(n))}return i.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":o.nodebuffer&&i.isBuffer(e)?"nodebuffer":o.uint8array&&e instanceof Uint8Array?"uint8array":o.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){for(var t,i="",s=0;s<(e||"").length;s++)i+="\\x"+((t=e.charCodeAt(s))<16?"0":"")+t.toString(16).toUpperCase();return i},r.delay=function(e,t,i){setImmediate(function(){e.apply(i||null,t||[])})},r.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},r.extend=function(){for(var e,t={},i=0;i<arguments.length;i++)for(e in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],e)&&void 0===t[e]&&(t[e]=arguments[i][e]);return t},r.prepareContent=function(i,e,s,n,a){return h.Promise.resolve(e).then(function(s){return o.blob&&(s instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(s)))&&"undefined"!=typeof FileReader?new h.Promise(function(t,i){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){i(e.target.error)},e.readAsArrayBuffer(s)}):s}).then(function(e){var t=r.getTypeOf(e);return t?("arraybuffer"===t?e=r.transformTo("uint8array",e):"string"===t&&(a?e=l.decode(e):s&&!0!==n&&(e=d(t=e,new(o.uint8array?Uint8Array:Array)(t.length)))),e):h.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){var s=e("./reader/readerFor"),n=e("./utils"),a=e("./signature"),r=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){var t;if(!this.reader.readAndCheckSignature(e))throw this.reader.index-=4,t=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);e=this.reader.readString(4)===t;return this.reader.setIndex(i),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",t=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,s=this.zip64EndOfCentralSize-44;0<s;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var e,t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}e=this.centralDirOffset+this.centralDirSize,e=t-(e=this.zip64?e+20+(12+this.zip64EndOfCentralSize):e);if(0<e)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(e){this.reader=s(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){var s=e("./reader/readerFor"),n=e("./utils"),a=e("./compressedObject"),r=e("./crc32"),o=e("./utf8"),l=e("./compressions"),h=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=(e=>{for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null})(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){var e;this.extraFields[1]&&(e=s(this.extraFields[1].value),this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS)&&(this.diskNumberStart=e.readInt(4))},readExtraFields:function(e){var t,i,s,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),i=e.readInt(2),s=e.readData(i),this.extraFields[t]={id:t,length:i,value:s};e.setIndex(n)},handleUTF8:function(){var e,t=h.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment)):(null!==(e=this.findExtraFieldUnicodePath())?this.fileNameStr=e:(e=n.transformTo(t,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(e)),null!==(e=this.findExtraFieldUnicodeComment())?this.fileCommentStr=e:(e=n.transformTo(t,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(e)))},findExtraFieldUnicodePath:function(){var e,t=this.extraFields[28789];return!t||1!==(e=s(t.value)).readInt(1)||r(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))},findExtraFieldUnicodeComment:function(){var e,t=this.extraFields[25461];return!t||1!==(e=s(t.value)).readInt(1)||r(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){for(var a=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),r=e("./utf8"),n=e("./compressedObject"),o=e("./stream/GenericWorker"),l=function(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}},h=(l.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var s="string"===(i=e.toLowerCase())||"text"===i,n=("binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker(),!this._dataBinary);n&&!s&&(t=t.pipe(new r.Utf8EncodeWorker)),!n&&s&&(t=t.pipe(new r.Utf8DecodeWorker))}catch(e){(t=new o("error")).error(e)}return new a(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){var i;return this._data instanceof n&&this._data.compression.magic===e.magic?this._data.getCompressedWorker():(i=this._decompressWorker(),this._dataBinary||(i=i.pipe(new r.Utf8EncodeWorker)),n.createWorkerFrom(i,e,t))},_decompressWorker:function(){return this._data instanceof n?this._data.getContentWorker():this._data instanceof o?this._data:new s(this._data)}},["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"]),d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<h.length;c++)l.prototype[h[c]]=d;t.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,h,t){!function(t){var e,i,s,n,a=t.MutationObserver||t.WebKitMutationObserver,r=a?(e=0,a=new a(l),i=t.document.createTextNode(""),a.observe(i,{characterData:!0}),function(){i.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)}:((s=new t.MessageChannel).port1.onmessage=l,function(){s.port2.postMessage(0)}),o=[];function l(){n=!0;for(var e,t,i=o.length;i;){for(t=o,o=[],e=-1;++e<i;)t[e]();i=o.length}n=!1}h.exports=function(e){1!==o.push(e)||n||r()}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){var n=e("immediate");function l(){}var h={},a=["REJECTED"],r=["FULFILLED"],s=["PENDING"];function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==l&&p(this,e)}function d(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function c(t,i,s){n(function(){var e;try{e=i(s)}catch(e){return h.reject(t,e)}e===t?h.reject(t,new TypeError("Cannot resolve promise with itself")):h.resolve(t,e)})}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(t,e){var i=!1;function s(e){i||(i=!0,h.reject(t,e))}function n(e){i||(i=!0,h.resolve(t,e))}var a=f(function(){e(n,s)});"error"===a.status&&s(a.value)}function f(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}(t.exports=o).prototype.finally=function(t){var i;return"function"!=typeof t?this:(i=this.constructor,this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})}))},o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var i;return"function"!=typeof e&&this.state===r||"function"!=typeof t&&this.state===a?this:(i=new this.constructor(l),this.state!==s?c(i,this.state===r?e:t,this.outcome):this.queue.push(new d(i,e,t)),i)},d.prototype.callFulfilled=function(e){h.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){c(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){h.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){c(this.promise,this.onRejected,e)},h.resolve=function(e,t){var i=f(u,t);if("error"===i.status)return h.reject(e,i.value);i=i.value;if(i)p(e,i);else{e.state=r,e.outcome=t;for(var s=-1,n=e.queue.length;++s<n;)e.queue[s].callFulfilled(t)}return e},h.reject=function(e,t){e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callRejected(t);return e},o.resolve=function(e){if(e instanceof this)return e;return h.resolve(new this(l),e)},o.reject=function(e){var t=new this(l);return h.reject(t,e)},o.all=function(e){var i=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var s=e.length,n=!1;if(!s)return this.resolve([]);var a=new Array(s),r=0,t=-1,o=new this(l);for(;++t<s;)((e,t)=>{i.resolve(e).then(function(e){a[t]=e,++r!==s||n||(n=!0,h.resolve(o,a))},function(e){n||(n=!0,h.reject(o,e))})})(e[t],t);return o},o.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,s=!1;if(!i)return this.resolve([]);var n=-1,a=new this(l);for(;++n<i;)(e=>{t.resolve(e).then(function(e){s||(s=!0,h.resolve(a,e))},function(e){s||(s=!0,h.reject(a,e))})})(e[n]);return a}},{immediate:36}],38:[function(e,t,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){var r=e("./zlib/deflate"),o=e("./utils/common"),l=e("./utils/strings"),s=e("./zlib/messages"),n=e("./zlib/zstream"),h=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});e=this.options;if(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,(this.strm.avail_out=0)!==(t=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy)))throw new Error(s[t]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var t,e="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if(0!==(t=r.deflateSetDictionary(this.strm,e)))throw new Error(s[t]);this._dict_set=!0}}function d(e,t){t=new a(t);if(t.push(e,!0),t.err)throw t.msg||s[t.err];return t.result}a.prototype.push=function(e,t){var i,s,n=this.strm,a=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?n.input=l.string2buf(e):"[object ArrayBuffer]"===h.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(a),n.next_out=0,n.avail_out=a),1!==(i=r.deflate(n,s))&&0!==i)return this.onEnd(i),!(this.ended=!0)}while(0!==n.avail_out&&(0!==n.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out))),(0<n.avail_in||0===n.avail_out)&&1!==i);return 4===s?(i=r.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==s||(this.onEnd(0),!(n.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=a,i.deflate=d,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){var c=e("./zlib/inflate"),u=e("./utils/common"),p=e("./utils/strings"),f=e("./zlib/constants"),s=e("./zlib/messages"),n=e("./zlib/zstream"),a=e("./zlib/gzheader"),m=Object.prototype.toString;function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0,c.inflateInit2(this.strm,t.windowBits));if(e!==f.Z_OK)throw new Error(s[e]);this.header=new a,c.inflateGetHeader(this.strm,this.header)}function o(e,t){t=new r(t);if(t.push(e,!0),t.err)throw t.msg||s[t.err];return t.result}r.prototype.push=function(e,t){var i,s,n,a,r,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof e?o.input=p.binstring2buf(e):"[object ArrayBuffer]"===m.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new u.Buf8(l),o.next_out=0,o.avail_out=l),(i=c.inflate(o,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&h&&(r="string"==typeof h?p.string2buf(h):"[object ArrayBuffer]"===m.call(h)?new Uint8Array(h):h,i=c.inflateSetDictionary(this.strm,r)),i===f.Z_BUF_ERROR&&!0===d&&(i=f.Z_OK,d=!1),i!==f.Z_STREAM_END&&i!==f.Z_OK)return this.onEnd(i),!(this.ended=!0)}while(!o.next_out||0!==o.avail_out&&i!==f.Z_STREAM_END&&(0!==o.avail_in||s!==f.Z_FINISH&&s!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(r=p.utf8border(o.output,o.next_out),n=o.next_out-r,a=p.buf2string(o.output,r),o.next_out=n,o.avail_out=l-n,n&&u.arraySet(o.output,o.output,r,n,0),this.onData(a)):this.onData(u.shrinkBuf(o.output,o.next_out))),0===o.avail_in&&0===o.avail_out&&(d=!0),(0<o.avail_in||0===o.avail_out)&&i!==f.Z_STREAM_END);return(s=i===f.Z_STREAM_END?f.Z_FINISH:s)===f.Z_FINISH?(i=c.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f.Z_OK):s!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(o.avail_out=0))},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=r,i.inflate=o,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},i.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,n=(i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}}return e},i.shrinkBuf=function(e,t){if(e.length!==t){if(e.subarray)return e.subarray(0,t);e.length=t}return e},{arraySet:function(e,t,i,s,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+s),n);else for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){for(var t,i,s,n=0,a=0,r=e.length;a<r;a++)n+=e[a].length;for(s=new Uint8Array(n),a=t=0,r=e.length;a<r;a++)i=e[a],s.set(i,t),t+=i.length;return s}}),a={arraySet:function(e,t,i,s,n){for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(e,t,i){var l=e("./common"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var h=new l.Buf8(256),s=0;s<256;s++)h[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function d(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(e,t));for(var i="",s=0;s<t;s++)i+=String.fromCharCode(e[s]);return i}h[254]=h[254]=1,i.string2buf=function(e){for(var t,i,s,n,a=e.length,r=0,o=0;o<a;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(s=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(s-56320),o++),r+=i<128?1:i<2048?2:i<65536?3:4;for(t=new l.Buf8(r),o=n=0;n<r;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(s=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(s-56320),o++),i<128?t[n++]=i:(i<2048?t[n++]=192|i>>>6:(i<65536?t[n++]=224|i>>>12:(t[n++]=240|i>>>18,t[n++]=128|i>>>12&63),t[n++]=128|i>>>6&63),t[n++]=128|63&i);return t},i.buf2binstring=function(e){return d(e,e.length)},i.binstring2buf=function(e){for(var t=new l.Buf8(e.length),i=0,s=t.length;i<s;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){for(var i,s,n=t||e.length,a=new Array(2*n),r=0,o=0;o<n;)if((i=e[o++])<128)a[r++]=i;else if(4<(s=h[i]))a[r++]=65533,o+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&o<n;)i=i<<6|63&e[o++],s--;1<s?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return d(a,r)},i.utf8border=function(e,t){for(var i=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+h[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){t.exports=function(e,t,i,s){for(var n=65535&e|0,a=e>>>16&65535|0,r=0;0!==i;){for(i-=r=2e3<i?2e3:i;a=a+(n=n+t[s++]|0)|0,--r;);n%=65521,a%=65521}return n|a<<16|0}},{}],44:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){var o=(()=>{for(var e=[],t=0;t<256;t++){for(var i=t,s=0;s<8;s++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e})();t.exports=function(e,t,i,s){var n=o,a=s+i;e^=-1;for(var r=s;r<a;r++)e=e>>>8^n[255&(e^t[r])];return-1^e}},{}],46:[function(e,P,t){var o,c=e("../utils/common"),l=e("./trees"),u=e("./adler32"),p=e("./crc32"),j=e("./messages"),h=0,d=4,f=0,m=-2,D=-1,N=4,R=2,_=8,X=9,i=286,q=30,U=19,W=2*i+1,H=15,g=3,v=258,b=v+g+1,y=42,w=113,k=1,x=2,E=3,S=4;function C(e,t){return e.msg=j[t],t}function T(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function L(e){var t=e.state,i=t.pending;0!==(i=e.avail_out<i?e.avail_out:i)&&(c.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending)&&(t.pending_out=0)}function M(e,t){l._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,L(e.strm)}function z(e,t){e.pending_buf[e.pending++]=t}function I(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function a(e,t){var i,s,n=e.max_chain_length,a=e.strstart,r=e.prev_length,o=e.nice_match,l=e.w_size-b<e.strstart?e.strstart-(e.w_size-b):0,h=e.window,d=e.w_mask,c=e.prev,u=e.strstart+v,p=h[a+r-1],f=h[a+r];e.good_match<=e.prev_length&&(n>>=2),e.lookahead<o&&(o=e.lookahead);do{if(h[(i=t)+r]===f&&h[i+r-1]===p&&h[i]===h[a]&&h[++i]===h[a+1]){for(a+=2,i++;h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&a<u;);if(s=v-(u-a),a=u-v,r<s){if(e.match_start=t,o<=(r=s))break;p=h[a+r-1],f=h[a+r]}}}while((t=c[t&d])>l&&0!=--n);return r<=e.lookahead?r:e.lookahead}function O(e){var t,i,s,n,a,r,o,l,h,d=e.w_size;do{if(l=e.window_size-e.lookahead-e.strstart,d+(d-b)<=e.strstart){for(c.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=i=e.hash_size;s=e.head[--t],e.head[t]=d<=s?s-d:0,--i;);for(t=i=d;s=e.prev[--t],e.prev[t]=d<=s?s-d:0,--i;);l+=d}if(0===e.strm.avail_in)break;if(r=e.window,o=e.strstart+e.lookahead,l=l,h=void 0,h=(a=e.strm).avail_in,i=0===(h=l<h?l:h)?0:(a.avail_in-=h,c.arraySet(r,a.input,a.next_in,h,o),1===a.state.wrap?a.adler=u(a.adler,r,h,o):2===a.state.wrap&&(a.adler=p(a.adler,r,h,o)),a.next_in+=h,a.total_in+=h,h),e.lookahead+=i,g<=e.lookahead+e.insert)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=(e.ins_h<<e.hash_shift^e.window[n+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[n+g-1])&e.hash_mask,e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<g)););}while(e.lookahead<b&&0!==e.strm.avail_in)}function s(e,t){for(var i,s;;){if(e.lookahead<b){if(O(e),e.lookahead<b&&t===h)return k;if(0===e.lookahead)break}if(i=0,g<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-b&&(e.match_length=a(e,i)),g<=e.match_length)if(s=l._tr_tally(e,e.strstart-e.match_start,e.match_length-g),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=g){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=e.strstart<g-1?e.strstart:g-1,t===d?(M(e,!0),0===e.strm.avail_out?E:S):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:x}function n(e,t){for(var i,s,n;;){if(e.lookahead<b){if(O(e),e.lookahead<b&&t===h)return k;if(0===e.lookahead)break}if(i=0,g<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=g-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-b&&(e.match_length=a(e,i),e.match_length<=5)&&(1===e.strategy||e.match_length===g&&4096<e.strstart-e.match_start)&&(e.match_length=g-1),g<=e.prev_length&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-g,s=l._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-g),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=g-1,e.strstart++,s&&(M(e,!1),0===e.strm.avail_out))return k}else if(e.match_available){if((s=l._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return k}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=l._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<g-1?e.strstart:g-1,t===d?(M(e,!0),0===e.strm.avail_out?E:S):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:x}function r(e,t,i,s,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=s,this.func=n}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*W),this.dyn_dtree=new c.Buf16(2*(2*q+1)),this.bl_tree=new c.Buf16(2*(2*U+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(H+1),this.heap=new c.Buf16(2*i+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*i+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=R,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?y:w,e.adler=2===t.wrap?0:1,t.last_flush=h,l._tr_init(t),f):C(e,m)}function F(e){var t=B(e);return t===f&&((e=e.state).window_size=2*e.w_size,A(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=g-1,e.match_available=0,e.ins_h=0),t}function Z(e,t,i,s,n,a){if(!e)return m;var r=1;if(t===D&&(t=6),s<0?(r=0,s=-s):15<s&&(r=2,s-=16),n<1||X<n||i!==_||s<8||15<s||t<0||9<t||a<0||N<a)return C(e,m);8===s&&(s=9);var o=new V;return(e.state=o).strm=e,o.wrap=r,o.gzhead=null,o.w_bits=s,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+g-1)/g),o.window=new c.Buf8(2*o.w_size),o.head=new c.Buf16(o.hash_size),o.prev=new c.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new c.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=i,F(e)}o=[new r(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(O(e),0===e.lookahead&&t===h)return k;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+i;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,M(e,!1),0===e.strm.avail_out))return k;if(e.w_size-b<=e.strstart-e.block_start&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===d?(M(e,!0),0===e.strm.avail_out?E:S):(e.block_start<e.strstart&&(M(e,!1),e.strm.avail_out),k)}),new r(4,4,8,4,s),new r(4,5,16,8,s),new r(4,6,32,32,s),new r(4,4,16,16,n),new r(8,16,32,32,n),new r(8,16,128,128,n),new r(8,32,128,256,n),new r(32,128,258,1024,n),new r(32,258,258,4096,n)],t.deflateInit=function(e,t){return Z(e,t,_,15,8,0)},t.deflateInit2=Z,t.deflateReset=F,t.deflateResetKeep=B,t.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?m:(e.state.gzhead=t,f)},t.deflate=function(e,t){var i,s,n,a;if(!e||!e.state||5<t||t<0)return e?C(e,m):m;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&t!==d)return C(e,0===e.avail_out?-5:m);if(s.strm=e,i=s.last_flush,s.last_flush=t,s.status===y&&(2===s.wrap?(e.adler=0,z(s,31),z(s,139),z(s,8),s.gzhead?(z(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),z(s,255&s.gzhead.time),z(s,s.gzhead.time>>8&255),z(s,s.gzhead.time>>16&255),z(s,s.gzhead.time>>24&255),z(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),z(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(z(s,255&s.gzhead.extra.length),z(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=p(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(z(s,0),z(s,0),z(s,0),z(s,0),z(s,0),z(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),z(s,3),s.status=w)):(r=_+(s.w_bits-8<<4)<<8,r|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(r|=32),r+=31-r%31,s.status=w,I(s,r),0!==s.strstart&&(I(s,e.adler>>>16),I(s,65535&e.adler)),e.adler=1)),69===s.status)if(s.gzhead.extra){for(n=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),L(e),n=s.pending,s.pending!==s.pending_buf_size));)z(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),L(e),n=s.pending,s.pending===s.pending_buf_size)){a=1;break}}while(a=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,z(s,a),0!==a);s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),0===a&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),L(e),n=s.pending,s.pending===s.pending_buf_size)){a=1;break}}while(a=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,z(s,a),0!==a);s.gzhead.hcrc&&s.pending>n&&(e.adler=p(e.adler,s.pending_buf,s.pending-n,n)),0===a&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&L(e),s.pending+2<=s.pending_buf_size&&(z(s,255&e.adler),z(s,e.adler>>8&255),e.adler=0,s.status=w)):s.status=w),0!==s.pending){if(L(e),0===e.avail_out)return s.last_flush=-1,f}else if(0===e.avail_in&&T(t)<=T(i)&&t!==d)return C(e,-5);if(666===s.status&&0!==e.avail_in)return C(e,-5);if(0!==e.avail_in||0!==s.lookahead||t!==h&&666!==s.status){var r=2===s.strategy?((e,t)=>{for(var i;;){if(0===e.lookahead&&(O(e),0===e.lookahead)){if(t===h)return k;break}if(e.match_length=0,i=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===d?(M(e,!0),0===e.strm.avail_out?E:S):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:x})(s,t):3===s.strategy?((e,t)=>{for(var i,s,n,a,r=e.window;;){if(e.lookahead<=v){if(O(e),e.lookahead<=v&&t===h)return k;if(0===e.lookahead)break}if(e.match_length=0,g<=e.lookahead&&0<e.strstart&&(s=r[n=e.strstart-1])===r[++n]&&s===r[++n]&&s===r[++n]){for(a=e.strstart+v;s===r[++n]&&s===r[++n]&&s===r[++n]&&s===r[++n]&&s===r[++n]&&s===r[++n]&&s===r[++n]&&s===r[++n]&&n<a;);e.match_length=v-(a-n),e.lookahead<e.match_length&&(e.match_length=e.lookahead)}if(g<=e.match_length?(i=l._tr_tally(e,1,e.match_length-g),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===d?(M(e,!0),0===e.strm.avail_out?E:S):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:x})(s,t):o[s.level].func(s,t);if(r!==E&&r!==S||(s.status=666),r===k||r===E)return 0===e.avail_out&&(s.last_flush=-1),f;if(r===x&&(1===t?l._tr_align(s):5!==t&&(l._tr_stored_block(s,0,0,!1),3===t)&&(A(s.head),0===s.lookahead)&&(s.strstart=0,s.block_start=0,s.insert=0),L(e),0===e.avail_out))return s.last_flush=-1,f}return t!==d||!(s.wrap<=0)&&(2===s.wrap?(z(s,255&e.adler),z(s,e.adler>>8&255),z(s,e.adler>>16&255),z(s,e.adler>>24&255),z(s,255&e.total_in),z(s,e.total_in>>8&255),z(s,e.total_in>>16&255),z(s,e.total_in>>24&255)):(I(s,e.adler>>>16),I(s,65535&e.adler)),L(e),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending)?f:1},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==y&&69!==t&&73!==t&&91!==t&&103!==t&&t!==w&&666!==t?C(e,m):(e.state=null,t===w?C(e,-3):f):m},t.deflateSetDictionary=function(e,t){var i,s,n,a,r,o,l,h=t.length;if(!e||!e.state)return m;if(2===(a=(i=e.state).wrap)||1===a&&i.status!==y||i.lookahead)return m;for(1===a&&(e.adler=u(e.adler,t,h,0)),i.wrap=0,i.w_size<=h&&(0===a&&(A(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new c.Buf8(i.w_size),c.arraySet(l,t,h-i.w_size,i.w_size,0),t=l,h=i.w_size),l=e.avail_in,r=e.next_in,o=e.input,e.avail_in=h,e.next_in=0,e.input=t,O(i);i.lookahead>=g;){for(s=i.strstart,n=i.lookahead-(g-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+g-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++,--n;);i.strstart=s,i.lookahead=g-1,O(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=g-1,i.match_available=0,e.next_in=r,e.input=o,e.avail_in=l,i.wrap=a,f},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){t.exports=function(e,t){var i,s,n,a,r,o,l=e.state,h=e.next_in,d=e.input,c=h+(e.avail_in-5),u=e.next_out,p=e.output,f=u-(t-e.avail_out),m=u+(e.avail_out-257),_=l.dmax,g=l.wsize,v=l.whave,b=l.wnext,y=l.window,w=l.hold,k=l.bits,x=l.lencode,E=l.distcode,S=(1<<l.lenbits)-1,C=(1<<l.distbits)-1;e:do{for(k<15&&(w+=d[h++]<<k,k+=8,w+=d[h++]<<k,k+=8),i=x[w&S];;){if(w>>>=s=i>>>24,k-=s,0===(s=i>>>16&255))p[u++]=65535&i;else{if(!(16&s)){if(0==(64&s)){i=x[(65535&i)+(w&(1<<s)-1)];continue}if(32&s){l.mode=12;break e}e.msg="invalid literal/length code",l.mode=30;break e}for(n=65535&i,(s&=15)&&(k<s&&(w+=d[h++]<<k,k+=8),n+=w&(1<<s)-1,w>>>=s,k-=s),k<15&&(w+=d[h++]<<k,k+=8,w+=d[h++]<<k,k+=8),i=E[w&C];;){if(w>>>=s=i>>>24,k-=s,!(16&(s=i>>>16&255))){if(0==(64&s)){i=E[(65535&i)+(w&(1<<s)-1)];continue}e.msg="invalid distance code",l.mode=30;break e}if(a=65535&i,k<(s&=15)&&(w+=d[h++]<<k,(k+=8)<s)&&(w+=d[h++]<<k,k+=8),_<(a+=w&(1<<s)-1)){e.msg="invalid distance too far back",l.mode=30;break e}if(w>>>=s,k-=s,(s=u-f)<a){if(v<(s=a-s)&&l.sane){e.msg="invalid distance too far back",l.mode=30;break e}if(o=y,(r=0)===b){if(r+=g-s,s<n){for(n-=s;p[u++]=y[r++],--s;);r=u-a,o=p}}else if(b<s){if(r+=g+b-s,(s-=b)<n){for(n-=s;p[u++]=y[r++],--s;);if(r=0,b<n){for(n-=s=b;p[u++]=y[r++],--s;);r=u-a,o=p}}}else if(r+=b-s,s<n){for(n-=s;p[u++]=y[r++],--s;);r=u-a,o=p}for(;2<n;)p[u++]=o[r++],p[u++]=o[r++],p[u++]=o[r++],n-=3;n&&(p[u++]=o[r++],1<n)&&(p[u++]=o[r++])}else{for(r=u-a;p[u++]=p[r++],p[u++]=p[r++],p[u++]=p[r++],2<(n-=3););n&&(p[u++]=p[r++],1<n)&&(p[u++]=p[r++])}break}}break}}while(h<c&&u<m);w&=(1<<(k-=(n=k>>3)<<3))-1,e.next_in=h-=n,e.next_out=u,e.avail_in=h<c?c-h+5:5-(h-c),e.avail_out=u<m?m-u+257:257-(u-m),l.hold=w,l.bits=k}},{}],49:[function(e,t,i){var z=e("../utils/common"),I=e("./adler32"),O=e("./crc32"),B=e("./inffast"),F=e("./inftrees"),P=1,j=2,D=0,N=-2,R=1,s=852,n=592;function X(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new z.Buf16(320),this.work=new z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=R,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new z.Buf32(s),t.distcode=t.distdyn=new z.Buf32(n),t.sane=1,t.back=-1,D):N}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,r(e)):N}function l(e,t){var i,s;return!e||!e.state||(s=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?N:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=i,s.wbits=t,o(e))}function h(e,t){var i;return e?(i=new a,(e.state=i).window=null,(i=l(e,t))!==D&&(e.state=null),i):N}var q,U,W=!0;function H(e,t,i,s){var n,e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new z.Buf8(e.wsize)),e.wsize<=s?(z.arraySet(e.window,t,i-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(s<(n=e.wsize-e.wnext)&&(n=s),z.arraySet(e.window,t,i-s,n,e.wnext),(s-=n)?(z.arraySet(e.window,t,i-s,s,0),e.wnext=s,e.whave=e.wsize):(e.wnext+=n,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=n))),0}i.inflateReset=o,i.inflateReset2=l,i.inflateResetKeep=r,i.inflateInit=function(e){return h(e,15)},i.inflateInit2=h,i.inflate=function(e,t){var i,s,n,a,r,o,l,h,d,c,u,p,f,m,_,g,v,b,y,w,k,x,E,S,C=0,T=new z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return N;12===(i=e.state).mode&&(i.mode=13),r=e.next_out,n=e.output,a=e.next_in,s=e.input,h=i.hold,d=i.bits,c=o=e.avail_in,u=l=e.avail_out,x=D;e:for(;;)switch(i.mode){case R:if(0===i.wrap)i.mode=13;else{for(;d<16;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(2&i.wrap&&35615===h)T[i.check=0]=255&h,T[1]=h>>>8&255,i.check=O(i.check,T,2,0),d=h=0,i.mode=2;else if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&h)<<8)+(h>>8))%31)e.msg="incorrect header check",i.mode=30;else if(8!=(15&h))e.msg="unknown compression method",i.mode=30;else{if(d-=4,k=8+(15&(h>>>=4)),0===i.wbits)i.wbits=k;else if(k>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<k,e.adler=i.check=1,i.mode=512&h?10:12,d=h=0}}break;case 2:for(;d<16;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(i.flags=h,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=h>>8&1),512&i.flags&&(T[0]=255&h,T[1]=h>>>8&255,i.check=O(i.check,T,2,0)),d=h=0,i.mode=3;case 3:for(;d<32;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.head&&(i.head.time=h),512&i.flags&&(T[0]=255&h,T[1]=h>>>8&255,T[2]=h>>>16&255,T[3]=h>>>24&255,i.check=O(i.check,T,4,0)),d=h=0,i.mode=4;case 4:for(;d<16;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.head&&(i.head.xflags=255&h,i.head.os=h>>8),512&i.flags&&(T[0]=255&h,T[1]=h>>>8&255,i.check=O(i.check,T,2,0)),d=h=0,i.mode=5;case 5:if(1024&i.flags){for(;d<16;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.length=h,i.head&&(i.head.extra_len=h),512&i.flags&&(T[0]=255&h,T[1]=h>>>8&255,i.check=O(i.check,T,2,0)),d=h=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((p=o<(p=i.length)?o:p)&&(i.head&&(k=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),z.arraySet(i.head.extra,s,a,p,k)),512&i.flags&&(i.check=O(i.check,s,p,a)),o-=p,a+=p,i.length-=p),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break e;for(p=0;k=s[a+p++],i.head&&k&&i.length<65536&&(i.head.name+=String.fromCharCode(k)),k&&p<o;);if(512&i.flags&&(i.check=O(i.check,s,p,a)),o-=p,a+=p,k)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break e;for(p=0;k=s[a+p++],i.head&&k&&i.length<65536&&(i.head.comment+=String.fromCharCode(k)),k&&p<o;);if(512&i.flags&&(i.check=O(i.check,s,p,a)),o-=p,a+=p,k)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;d<16;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(h!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}d=h=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;d<32;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}e.adler=i.check=X(h),d=h=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=h,i.bits=d,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last)h>>>=7&d,d-=7&d,i.mode=27;else{for(;d<3;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}switch(i.last=1&h,--d,3&(h>>>=1)){case 0:i.mode=14;break;case 1:L=M=void 0;var L,M=i;if(W){for(q=new z.Buf32(512),U=new z.Buf32(32),L=0;L<144;)M.lens[L++]=8;for(;L<256;)M.lens[L++]=9;for(;L<280;)M.lens[L++]=7;for(;L<288;)M.lens[L++]=8;for(F(P,M.lens,0,288,q,0,M.work,{bits:9}),L=0;L<32;)M.lens[L++]=5;F(j,M.lens,0,32,U,0,M.work,{bits:5}),W=!1}if(M.lencode=q,M.lenbits=9,M.distcode=U,M.distbits=5,i.mode=20,6!==t)break;h>>>=2,d-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}h>>>=2,d-=2}break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&h,d=h=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(p=i.length){if(0===(p=l<(p=o<p?o:p)?l:p))break e;z.arraySet(n,s,a,p,r),o-=p,a+=p,l-=p,r+=p,i.length-=p}else i.mode=12;break;case 17:for(;d<14;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(i.nlen=257+(31&h),h>>>=5,d-=5,i.ndist=1+(31&h),h>>>=5,d-=5,i.ncode=4+(15&h),h>>>=4,d-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;d<3;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.lens[A[i.have++]]=7&h,h>>>=3,d-=3}for(;i.have<19;)i.lens[A[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,E={bits:i.lenbits},x=F(0,i.lens,0,19,i.lencode,0,i.work,E),i.lenbits=E.bits,x){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;g=(C=i.lencode[h&(1<<i.lenbits)-1])>>>16&255,v=65535&C,!((_=C>>>24)<=d);){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(v<16)h>>>=_,d-=_,i.lens[i.have++]=v;else{if(16===v){for(S=_+2;d<S;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(h>>>=_,d-=_,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}k=i.lens[i.have-1],p=3+(3&h),h>>>=2,d-=2}else if(17===v){for(S=_+3;d<S;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}k=0,p=3+(7&(h>>>=_)),h>>>=3,d=d-_-3}else{for(S=_+7;d<S;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}k=0,p=11+(127&(h>>>=_)),h>>>=7,d=d-_-7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;p--;)i.lens[i.have++]=k}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,E={bits:i.lenbits},x=F(P,i.lens,0,i.nlen,i.lencode,0,i.work,E),i.lenbits=E.bits,x){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,E={bits:i.distbits},x=F(j,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,E),i.distbits=E.bits,x){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=o&&258<=l){e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=h,i.bits=d,B(e,u),r=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,s=e.input,o=e.avail_in,h=i.hold,d=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;g=(C=i.lencode[h&(1<<i.lenbits)-1])>>>16&255,v=65535&C,!((_=C>>>24)<=d);){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(g&&0==(240&g)){for(b=_,y=g,w=v;g=(C=i.lencode[w+((h&(1<<b+y)-1)>>b)])>>>16&255,v=65535&C,!(b+(_=C>>>24)<=d);){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}h>>>=b,d-=b,i.back+=b}if(h>>>=_,d-=_,i.back+=_,i.length=v,0===g){i.mode=26;break}if(32&g){i.back=-1,i.mode=12;break}if(64&g){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&g,i.mode=22;case 22:if(i.extra){for(S=i.extra;d<S;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;g=(C=i.distcode[h&(1<<i.distbits)-1])>>>16&255,v=65535&C,!((_=C>>>24)<=d);){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(0==(240&g)){for(b=_,y=g,w=v;g=(C=i.distcode[w+((h&(1<<b+y)-1)>>b)])>>>16&255,v=65535&C,!(b+(_=C>>>24)<=d);){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}h>>>=b,d-=b,i.back+=b}if(h>>>=_,d-=_,i.back+=_,64&g){e.msg="invalid distance code",i.mode=30;break}i.offset=v,i.extra=15&g,i.mode=24;case 24:if(i.extra){for(S=i.extra;d<S;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===l)break e;if(i.offset>(p=u-l)){if((p=i.offset-p)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}f=p>i.wnext?(p-=i.wnext,i.wsize-p):i.wnext-p,p>i.length&&(p=i.length),m=i.window}else m=n,f=r-i.offset,p=i.length;for(l-=p=l<p?l:p,i.length-=p;n[r++]=m[f++],--p;);0===i.length&&(i.mode=21);break;case 26:if(0===l)break e;n[r++]=i.length,l--,i.mode=21;break;case 27:if(i.wrap){for(;d<32;){if(0===o)break e;o--,h|=s[a++]<<d,d+=8}if(u-=l,e.total_out+=u,i.total+=u,u&&(e.adler=i.check=(i.flags?O:I)(i.check,n,u,r-u)),u=l,(i.flags?h:X(h))!==i.check){e.msg="incorrect data check",i.mode=30;break}d=h=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;d<32;){if(0===o)break e;o--,h+=s[a++]<<d,d+=8}if(h!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}d=h=0}i.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;default:return N}return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=h,i.bits=d,(i.wsize||u!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&H(e,e.output,e.next_out,u-e.avail_out)?(i.mode=31,-4):(u-=e.avail_out,e.total_in+=c-=e.avail_in,e.total_out+=u,i.total+=u,i.wrap&&u&&(e.adler=i.check=(i.flags?O:I)(i.check,n,u,e.next_out-u)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==c&&0===u||4===t)&&x===D?-5:x)},i.inflateEnd=function(e){var t;return e&&e.state?((t=e.state).window&&(t.window=null),e.state=null,D):N},i.inflateGetHeader=function(e,t){return!e||!e.state||0==(2&(e=e.state).wrap)?N:((e.head=t).done=!1,D)},i.inflateSetDictionary=function(e,t){var i,s=t.length;return!e||!e.state||0!==(i=e.state).wrap&&11!==i.mode?N:11===i.mode&&I(1,t,s,0)!==i.check?-3:H(e,t,s,s)?(i.mode=31,-4):(i.havedict=1,D)},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){var B=e("../utils/common"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],P=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,s,n,a,r,o){for(var l,h,d,c,u,p,f,m,_,g=o.bits,v=0,b=0,y=0,w=0,k=0,x=0,E=0,S=0,C=0,T=0,A=null,L=0,M=new B.Buf16(16),z=new B.Buf16(16),I=null,O=0,v=0;v<=15;v++)M[v]=0;for(b=0;b<s;b++)M[t[i+b]]++;for(k=g,w=15;1<=w&&0===M[w];w--);if(w<k&&(k=w),0===w)n[a++]=20971520,n[a++]=20971520,o.bits=1;else{for(y=1;y<w&&0===M[y];y++);for(k<y&&(k=y),v=S=1;v<=15;v++)if((S=(S<<=1)-M[v])<0)return-1;if(0<S&&(0===e||1!==w))return-1;for(z[1]=0,v=1;v<15;v++)z[v+1]=z[v]+M[v];for(b=0;b<s;b++)0!==t[i+b]&&(r[z[t[i+b]]++]=b);if(p=0===e?(A=I=r,19):1===e?(A=F,L-=257,I=P,O-=257,256):(A=j,I=D,-1),v=y,u=a,E=b=T=0,d=-1,c=(C=1<<(x=k))-1,1===e&&852<C||2===e&&592<C)return 1;for(;;){for(_=r[b]<p?(m=0,r[b]):r[b]>p?(m=I[O+r[b]],A[L+r[b]]):(m=96,0),l=1<<(f=v-E),y=h=1<<x;n[u+(T>>E)+(h-=l)]=f<<24|m<<16|_|0,0!==h;);for(l=1<<v-1;T&l;)l>>=1;if(T=0!==l?(T&l-1)+l:0,b++,0==--M[v]){if(v===w)break;v=t[i+r[b]]}if(k<v&&(T&c)!==d){for(u+=y,S=1<<(x=v-(E=0===E?k:E));x+E<w&&!((S-=M[x+E])<=0);)x++,S<<=1;if(C+=1<<x,1===e&&852<C||2===e&&592<C)return 1;n[d=T&c]=k<<24|x<<16|u-a|0}}0!==T&&(n[u+T]=v-E<<24|64<<16|0),o.bits=k}return 0}},{"../utils/common":41}],51:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,a,e){var r=i("../utils/common"),d=0,c=1;function t(e){for(var t=e.length;0<=--t;)e[t]=0}var o,l,h,u=29,p=256,f=p+1+u,m=30,_=19,S=2*f+1,C=15,s=16,N=7,g=256,v=16,b=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(f+2)),T=(t(E),new Array(2*m)),A=(t(T),new Array(512)),L=(t(A),new Array(256)),M=(t(L),new Array(u)),z=(t(M),new Array(m));function I(e,t,i,s,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=s,this.max_length=n,this.has_stree=e&&e.length}function O(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function B(e){return e<256?A[e]:A[256+(e>>>7)]}function n(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function F(e,t,i){e.bi_valid>s-i?(e.bi_buf|=t<<e.bi_valid&65535,n(e,e.bi_buf),e.bi_buf=t>>s-e.bi_valid,e.bi_valid+=i-s):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function P(e,t,i){F(e,i[2*t],i[2*t+1])}function X(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function q(e,t,i){for(var s,n=new Array(C+1),a=0,r=1;r<=C;r++)n[r]=a=a+i[r-1]<<1;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=X(n[o]++,o))}}function U(e){for(var t=0;t<f;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<_;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function W(e){8<e.bi_valid?n(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,i,s){var n=2*t,a=2*i;return e[n]<e[a]||e[n]===e[a]&&s[t]<=s[i]}function j(e,t,i){for(var s=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&H(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!H(t,s,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=s}function V(e,t,i){var s,n,a,r,o=0;if(0!==e.last_lit)for(;s=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],n=e.pending_buf[e.l_buf+o],o++,0==s?P(e,n,t):(P(e,(a=L[n])+p+1,t),0!==(r=w[a])&&F(e,n-=M[a],r),P(e,a=B(--s),i),0!==(r=k[a])&&F(e,s-=z[a],r)),o<e.last_lit;);P(e,g,t)}function D(e,t){var i,s,n,a=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=S,i=0;i<l;i++)0!==a[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=r[2*n+1]);for(t.max_code=h,i=e.heap_len>>1;1<=i;i--)j(e,a,i);for(n=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],j(e,a,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,a[2*n]=a[2*i]+a[2*s],e.depth[n]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,a[2*i+1]=a[2*s+1]=n,e.heap[1]=n++,j(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var d,c,u,p,f,m=e,_=t.dyn_tree,g=t.max_code,v=t.stat_desc.static_tree,b=t.stat_desc.has_stree,y=t.stat_desc.extra_bits,w=t.stat_desc.extra_base,k=t.stat_desc.max_length,x=0,E=0;E<=C;E++)m.bl_count[E]=0;for(_[2*m.heap[m.heap_max]+1]=0,d=m.heap_max+1;d<S;d++)k<(E=_[2*_[2*(c=m.heap[d])+1]+1]+1)&&(E=k,x++),_[2*c+1]=E,g<c||(m.bl_count[E]++,p=0,w<=c&&(p=y[c-w]),f=_[2*c],m.opt_len+=f*(E+p),b&&(m.static_len+=f*(v[2*c+1]+p)));if(0!==x){do{for(E=k-1;0===m.bl_count[E];)E--}while(m.bl_count[E]--,m.bl_count[E+1]+=2,m.bl_count[k]--,0<(x-=2));for(E=k;0!==E;E--)for(c=m.bl_count[E];0!==c;)g<(u=m.heap[--d])||(_[2*u+1]!==E&&(m.opt_len+=(E-_[2*u+1])*_[2*u],_[2*u+1]=E),c--)}q(a,h,e.bl_count)}function Z(e,t,i){var s,n,a=-1,r=t[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),t[2*(i+1)+1]=65535,s=0;s<=i;s++)n=r,r=t[2*(s+1)+1],++o<l&&n===r||(o<h?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[2*v]++):o<=10?e.bl_tree[2*b]++:e.bl_tree[2*y]++,a=n,h=(o=0)===r?(l=138,3):n===r?(l=6,3):(l=7,4))}function $(e,t,i){var s,n,a=-1,r=t[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),s=0;s<=i;s++)if(n=r,r=t[2*(s+1)+1],!(++o<l&&n===r)){if(o<h)for(;P(e,n,e.bl_tree),0!=--o;);else 0!==n?(n!==a&&(P(e,n,e.bl_tree),o--),P(e,v,e.bl_tree),F(e,o-3,2)):o<=10?(P(e,b,e.bl_tree),F(e,o-3,3)):(P(e,y,e.bl_tree),F(e,o-11,7));a=n,h=(o=0)===r?(l=138,3):n===r?(l=6,3):(l=7,4)}}t(z);var K=!1;function J(e,t,i,s){F(e,0+(s?1:0),3),s=t,t=i,i=!0,W(e=e),i&&(n(e,t),n(e,~t)),r.arraySet(e.pending_buf,e.window,s,t,e.pending),e.pending+=t}e._tr_init=function(e){if(!K){for(var t,i,s,n=new Array(C+1),a=0,r=0;r<u-1;r++)for(M[r]=a,t=0;t<1<<w[r];t++)L[a++]=r;for(L[a-1]=r,r=s=0;r<16;r++)for(z[r]=s,t=0;t<1<<k[r];t++)A[s++]=r;for(s>>=7;r<m;r++)for(z[r]=s<<7,t=0;t<1<<k[r]-7;t++)A[256+s++]=r;for(i=0;i<=C;i++)n[i]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,n[8]++;for(;t<=255;)E[2*t+1]=9,t++,n[9]++;for(;t<=279;)E[2*t+1]=7,t++,n[7]++;for(;t<=287;)E[2*t+1]=8,t++,n[8]++;for(q(E,f+1,n),t=0;t<m;t++)T[2*t+1]=5,T[2*t]=X(t,5);o=new I(E,w,p+1,f,C),l=new I(T,k,0,m,C),h=new I(new Array(0),R,0,_,N),K=!0}e.l_desc=new O(e.dyn_ltree,o),e.d_desc=new O(e.dyn_dtree,l),e.bl_desc=new O(e.bl_tree,h),e.bi_buf=0,e.bi_valid=0,U(e)},e._tr_stored_block=J,e._tr_flush_block=function(e,t,i,s){var n,a,r=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=(e=>{for(var t=4093624447,i=0;i<=31;i++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*i])return d;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return c;for(i=32;i<p;i++)if(0!==e.dyn_ltree[2*i])return c;return d})(e)),D(e,e.l_desc),D(e,e.d_desc),r=(e=>{var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=_-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),(a=e.static_len+3+7>>>3)<=(n=e.opt_len+3+7>>>3)&&(n=a)):n=a=i+5,i+4<=n&&-1!==t)J(e,t,i,s);else if(4===e.strategy||a===n)F(e,2+(s?1:0),3),V(e,E,T);else{F(e,4+(s?1:0),3);var o,l=e,t=e.l_desc.max_code+1,i=e.d_desc.max_code+1,h=r+1;for(F(l,t-257,5),F(l,i-1,5),F(l,h-4,4),o=0;o<h;o++)F(l,l.bl_tree[2*x[o]+1],3);$(l,l.dyn_ltree,t-1),$(l,l.dyn_dtree,i-1),V(e,e.dyn_ltree,e.dyn_dtree)}U(e),s&&W(e)},e._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(L[i]+p+1)]++,e.dyn_dtree[2*B(t)]++),e.last_lit===e.lit_bufsize-1},e._tr_align=function(e){F(e,2,3),P(e,g,E),16===(e=e).bi_valid?(n(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,i){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){!function(e){function a(e){delete l[e]}function r(e){if(h)setTimeout(r,0,e);else{var t=l[e];if(t){h=!0;try{var i=t,s=i.callback,n=i.args;switch(n.length){case 0:s();break;case 1:s(n[0]);break;case 2:s(n[0],n[1]);break;case 3:s(n[0],n[1],n[2]);break;default:s.apply(o,n)}}finally{a(e),h=!1}}}}function t(){function e(e){e.source===i&&"string"==typeof e.data&&0===e.data.indexOf(t)&&r(+e.data.slice(t.length))}var t="setImmediate$"+Math.random()+"$";i.addEventListener?i.addEventListener("message",e,!1):i.attachEvent("onmessage",e),d=function(e){i.postMessage(t+e,"*")}}var i,o,s,l,h,n,d,c,u;(i="undefined"==typeof self?void 0===e?this:e:self).setImmediate||(s=1,h=!(l={}),n=i.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(i))&&e.setTimeout?e:i,"[object process]"==={}.toString.call(i.process)?d=function(e){process.nextTick(function(){r(e)})}:(()=>{var e,t;return i.postMessage&&!i.importScripts&&(e=!0,t=i.onmessage,i.onmessage=function(){e=!1},i.postMessage("","*"),i.onmessage=t,e)})()?t():d=i.MessageChannel?((u=new MessageChannel).port1.onmessage=function(e){r(e.data)},function(e){u.port2.postMessage(e)}):n&&"onreadystatechange"in n.createElement("script")?(c=n.documentElement,function(e){var t=n.createElement("script");t.onreadystatechange=function(){r(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(r,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];return l[s]={callback:e,args:t},d(s),s++},e.clearImmediate=a)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),FastBase64_encLookup=[];function FastBase64_Init(){for(var e=0;e<4096;e++)FastBase64_encLookup[e]=FastBase64_chars[e>>6]+FastBase64_chars[63&e]}function FastBase64_Encode(e){for(var t,i,s=e.length,a="",r=0;2<s;)n=e[r]<<16|e[r+1]<<8|e[r+2],a+=FastBase64_encLookup[n>>12]+FastBase64_encLookup[4095&n],s-=3,r+=3;return 0<s&&(i=(252&e[r])>>2,t=(3&e[r])<<4,1<s&&(t|=(240&e[++r])>>4),a=(a+=FastBase64_chars[i])+FastBase64_chars[t],2==s&&(i=(15&e[r++])<<2,a+=FastBase64_chars[i|=(192&e[r])>>6]),1==s&&(a+="="),a+="="),a}function u32ToArray(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function u16ToArray(e){return[255&e,e>>8&255]}function split16bitArray(e){for(var t=[],i=0,s=e.length,n=0;n<s;n++)t[i++]=255&e[n],t[i++]=e[n]>>8&255;return t}function MakeRiff(e,t,i){e={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:e,byteRate:0,blockAlign:0,bitsPerSample:t,subChunk2Id:[100,97,116,97],subChunk2Size:0};return e.byteRate=e.sampleRate*e.numChannels*e.bitsPerSample>>3,e.blockAlign=e.numChannels*e.bitsPerSample>>3,e.subChunk2Size=i.length*(e.bitsPerSample>>3),e.chunkSize=36+e.subChunk2Size,{dat:[],wav:t=e.chunkId.concat(u32ToArray(e.chunkSize),e.format,e.subChunk1Id,u32ToArray(e.subChunk1Size),u16ToArray(e.audioFormat),u16ToArray(e.numChannels),u32ToArray(e.sampleRate),u32ToArray(e.byteRate),u16ToArray(e.blockAlign),u16ToArray(e.bitsPerSample),e.subChunk2Id,u32ToArray(e.subChunk2Size),16===e.bitsPerSample?split16bitArray(i):i),header:e,dataURI:"data:audio/wav;base64,"+FastBase64_Encode(t)}}FastBase64_Init(),"undefined"!=typeof exports&&(exports.RIFFWAVE=RIFFWAVE);let SAMPLE_RATE=44100,CONVERSION_FACTOR=2*Math.PI/SAMPLE_RATE;function checkAudioContextExists(){try{null==AUDIO_CONTEXT&&("undefined"!=typeof AudioContext?AUDIO_CONTEXT=new AudioContext:"undefined"!=typeof webkitAudioContext&&(AUDIO_CONTEXT=new webkitAudioContext))}catch(e){window.console.log(e)}}function ULBS(){var e;"suspended"===AUDIO_CONTEXT.state&&(e=function(){AUDIO_CONTEXT.resume().then(function(){document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),document.body.removeEventListener("mousedown",e),document.body.removeEventListener("mouseup",e),document.body.removeEventListener("keydown",e),document.body.removeEventListener("keyup",e)})},document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1),document.body.addEventListener("mousedown",e,!1),document.body.addEventListener("mouseup",e,!1),document.body.addEventListener("keydown",e,!1),document.body.addEventListener("keyup",e,!1))}checkAudioContextExists();let TEMPLATES_JSON={Bfxr:{pickup_coin:{Coin:{masterVolume:[.85185],waveType:[0],attackTime:[0],sustainTime:[.016874472672728978,.10333],sustainPunch:[.30333,.60333],decayTime:[.16312552732727104,.50333],compressionAmount:[0],frequency_start:[.4,.9],min_frequency_relative_to_starting_frequency:[0],frequency_slide:[0],frequency_acceleration:[0],vibratoDepth:[0],vibratoSpeed:[0],overtones:[0],overtoneFalloff:[0],pitch_jump_repeat_speed:[0],pitch_jump_amount:[0],pitch_jump_onset_percent:[0],pitch_jump_2_amount:[0],pitch_jump_onset2_percent:[0],squareDuty:[0],dutySweep:[0],repeatSpeed:[0],flangerOffset:[0],flangerSweep:[0],lpFilterCutoff:[1],lpFilterCutoffSweep:[0],lpFilterResonance:[0],hpFilterCutoff:[0],hpFilterCutoffSweep:[0],bitCrush:[0],bitCrushSweep:[0]},Coin2:{masterVolume:[.85185],waveType:[0,2,4,1,7,11,5,10],attackTime:[0],sustainTime:[.016874472672728978,.10333],sustainPunch:[.30333,.60333],decayTime:[.16312552732727104,.50333],compressionAmount:[0],frequency_start:[.4,.9],min_frequency_relative_to_starting_frequency:[0],frequency_slide:[0,.05333],frequency_acceleration:[0,.09333],vibratoDepth:[0],vibratoSpeed:[0],overtones:[0],overtoneFalloff:[0],pitch_jump_repeat_speed:[0],pitch_jump_amount:[.34667,.38667],pitch_jump_onset_percent:[.32667,.29333],pitch_jump_2_amount:[0],pitch_jump_onset2_percent:[0],squareDuty:[0],dutySweep:[0],repeatSpeed:[0],flangerOffset:[0],flangerSweep:[0],lpFilterCutoff:[1],lpFilterCutoffSweep:[0],lpFilterResonance:[0],hpFilterCutoff:[0],hpFilterCutoffSweep:[0],bitCrush:[0],bitCrushSweep:[0]}}}};class AKWF{static hvoice_0012=[33078,34077,35044,36007,36938,37805,38590,39410,40186,40979,41828,42751,43765,44750,45625,46506,47377,48459,49580,50412,51254,52132,53054,53969,55064,56224,57157,57762,58474,59326,60025,60421,60707,60933,61192,61199,60011,57771,55825,55237,55020,53932,51409,48089,45399,44422,44106,42490,39350,35232,30729,27122,25230,23798,21402,18034,14910,12701,11362,10543,9717,8561,7008,4596,1765,131,201,1146,2023,2735,3299,3911,5049,7131,9717,11930,13324,14032,14722,16044,18235,21043,24261,27245,29408,31047,33083,35737,38158,39841,40886,41556,42213,43245,44552,45917,47119,47870,48264,48770,49539,49925,49668,49229,48873,48432,47913,47384,46902,46605,46302,45760,45142,44704,44318,43802,43332,43042,42636,41996,41337,40780,40348,40072,39783,39377,39035,38729,38329,37958,37837,37831,37639,37223,36573,35566,34312,33093,32117,31428,30844,30079,29059,27979,27098,26276,25428,24454,23049,21274,19381,17785,16557,15675,15e3,14446,13983,13647,13422,13168,12982,12753,12429,12068,11998,12294,12943,13955,15251,16750,18381,20097,21804,23476,25102,26674,28171,29696,31260,32930,34804,36952,39192,41282,43127,44699,46099,47372,48514,49476,50175,50618,50888,51099,51305,51404,51383,51221,50812,50133,49166,47971,46660,45347,44055,42645,40991,39107,37176,35376,33764,32251,30646,28956,27272,25659,24192,22866,21633,20368,19107,17971,16966,16123,15408,14840,14468,14309,14374,14559,14792,14960,15096,15298,15643,16099,16589,17068,17606,18341,19312,20471,21661,22740,23624,24392,25151,25945,26715,27439,28051,28700,29403,30342,31272,32180];static hvoice_0008=[33181,35486,37968,40376,42771,45080,47364,49564,51743,53835,55881,57791,59589,61183,62575,63700,64584,65156,65464,65532,65397,65033,64481,63756,62857,61795,60589,59244,57769,56187,54493,52700,50804,48810,46710,44526,42252,39909,37506,35065,32606,30170,27780,25481,23312,21314,19526,17987,16727,15759,15085,14680,14507,14529,14701,14981,15335,15729,16131,16520,16883,17220,17530,17823,18107,18405,18742,19133,19600,20152,20793,21528,22346,23219,24124,25037,25940,26826,27679,28455,29125,29658,30037,30271,30376,30375,30291,30150,29969,29778,29596,29441,29340,29318,29391,29570,29865,30266,30762,31336,31959,32594,33218,33807,34355,34865,35333,35749,36106,36392,36606,36762,36877,36973,37079,37206,37368,37560,37770,37977,38155,38274,38317,38275,38137,37905,37573,37132,36575,35905,35127,34265,33341,32369,31357,30322,29276,28227,27188,26149,25114,24089,23079,22088,21128,20203,19329,18525,17801,17168,16639,16221,15920,15747,15693,15744,15903,16162,16516,16965,17495,18088,18756,19498,20308,21208,22190,23241,24387,25619,26888,28221,29593,30838,31899,32887,33833,34687,35481,36256,37010,37776,38593,39464,40400,41413,42484,43599,44747,45894,47011,48063,48999,49776,50378,50781,50983,50998,50824,50475,49983,49374,48691,47998,47342,46758,46270,45870,45527,45218,44900,44544,44118,43587,42913,42071,41043,39822,38423,36863,35174,33393,31568,29740,27974,26304,24772,23384,22152,21048,20083,19228,18476,17792,17155,16532,15920,15312,14725,14184,13722,13384,13196,13215,13436,13915,14619,15604,16811,18301,19969,21884,23902,26136,28375,30869];static fmsynth_0012=[33063,33949,34766,35596,36388,37173,37929,38666,39379,40067,40731,41364,41976,42552,43106,43625,44121,44580,45016,45417,45794,46139,46456,46745,47012,47248,47464,47656,47829,47980,48113,48229,48329,48416,48490,48551,48601,48643,48676,48703,48723,48736,48745,48748,48747,48741,48728,48714,48693,48667,48635,48595,48550,48497,48436,48364,48284,48193,48090,47974,47846,47706,47550,47380,47192,46991,46774,46540,46289,46023,45740,45441,45125,44794,44446,44084,43708,43316,42915,42499,42073,41634,41187,40727,40263,39791,39311,38826,38337,37843,37348,36850,36350,35850,35350,34852,34356,33862,33369,32882,32401,31923,31451,30983,30524,30072,29626,29187,28759,28338,27928,27527,27135,26754,26385,26024,25678,25343,25020,24708,24412,24128,23858,23602,23360,23134,22922,22727,22547,22383,22235,22105,21991,21894,21816,21755,21711,21687,21680,21693,21724,21775,21845,21934,22044,22172,22320,22487,22677,22885,23113,23363,23631,23921,24229,24558,24908,25279,25671,26081,26514,26965,27437,27932,28443,28979,29533,30108,30703,31318,31954,32607,33281,33975,34687,35416,36163,36925,37703,38490,39289,40096,40909,41719,42527,43324,44108,44867,45598,46286,46925,47500,47996,48401,48694,48858,48869,48707,48340,47746,46886,45734,44239,42380,40091,37352,34077,30264,25772,21005,16784,13147,10049,7453,5312,3592,2252,1258,572,166,4,62,308,722,1277,1954,2735,3599,4533,5522,6558,7622,8712,9817,10931,12049,13166,14275,15381,16475,17558,18628,19685,20730,21760,22777,23780,24757,25723,26697,27638,28588,29498,30430,31300,32236];static granular_0044=[32869,33554,33950,34774,35134,36047,36319,37297,37454,38494,38511,39617,39443,40664,40161,41814,38882,23368,22518,21974,20997,20545,19523,19169,18210,17982,17163,17128,16552,16803,16594,17281,17607,18928,20002,22162,24166,27270,30129,33900,37194,41086,44210,47679,50274,53080,55123,57263,58843,60380,61646,62635,63750,64193,65294,65e3,65535,64171,65114,62655,64487,59956,65114,36210,212,3832,99,1558,1,510,0,197,120,547,1094,1697,2901,3914,5892,7586,10533,13157,17216,20988,26107,30361,35515,39386,43777,46670,49891,51621,53703,54463,55644,55730,56241,55895,55900,55320,54914,54268,53486,52949,51761,51561,49784,50399,47306,51139,28999,14730,19959,17550,20023,18982,20690,20318,21655,21737,22859,23286,24286,24994,25914,26840,27701,28756,29549,30623,31268,32196,32566,33184,33197,33422,33100,32970,32677,32843,32704,32820,32726,32801,32745,32785,32759,32771,32771,32760,32779,32753,32784,32751,32787,32749,32786,32751,32785,32753,32782,32756,32779,32759,32775,32762,32773,32765,32771,32768,32768,32769,32767,32769,32766,32770,32766,32769,32767,32770,32767,32769,32767,32770,32768,32768,32768,32768,32768,32768,32768,32768,32768,32767,32767,32768,32767,32768,32767,32768,32769,32768,32768,32768,32768,32768,32768,32768,32767,32768,32768,32768,32769,32768,32768,32768,32767,32768,32768,32769,32768,32768,32767,32769,32767,32769,32768,32769,32767,32768,32767,32768,32768,32768,32768,32767,32770,32767,32770,32766,32771,32765,32772,32762,32775,32757,32786,32653,32303,32073,32011,32104,32434,32756,32768,32767]}class RealizedSound{static MIN_SAMPLE_RATE=SAMPLE_RATE;constructor(e,t){this._buffer=AUDIO_CONTEXT.createBuffer(1,e,t)}getBuffer(){return this._buffer.getChannelData(0)}source=null;play(){ULBS(),null!=this.source&&this.stop(),this.source=AUDIO_CONTEXT.createBufferSource(),this.source.buffer=this._buffer,this.source.connect(AUDIO_CONTEXT.destination);var e=AUDIO_CONTEXT.currentTime;void 0!==this.source.start?this.source.start(e):this.source.noteOn(e),this.source.onended=function(){this.source&&this.source.disconnect()}}stop(){null!=this.source&&(this.source.stop(),this.source.disconnect(),this.source=null)}getDataUri(){for(var e=this.getBuffer(),t=new Array(e.length),i=0;i<e.length;i++)t[i]=0|Math.floor(32768*Math.max(-1,Math.min(e[i],1)));return MakeRiff(SAMPLE_RATE,16,t).dataURI}static from_buffer(e){var t=new RealizedSound(e.length,RealizedSound.MIN_SAMPLE_RATE);return t._buffer.copyToChannel(e,0),t}}let PD_COSTABLESIZE=2048,PD_UNITBIT32=1572864,PD_HIOFFSET=1,PD_LOWOFFSET=0;function generate_tables(){COSTABLENAME=new Float32Array(PD_COSTABLESIZE+1);for(let e=0;e<PD_COSTABLESIZE;e++)COSTABLENAME[e]=Math.cos(2*Math.PI*e/PD_COSTABLESIZE);COSTABLENAME[0]=1,COSTABLENAME[PD_COSTABLESIZE]=1,COSTABLENAME[PD_COSTABLESIZE/4|0]=0,COSTABLENAME[3*PD_COSTABLESIZE/4|0]=0,COSTABLENAME[PD_COSTABLESIZE/2|0]=-1}function gt(t,i){var s=new Float32Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]<i[e]?1:0;return s}generate_tables();var puredata_stream_length=0;function pd_set_stream_length_seconds(e){puredata_stream_length=e*SAMPLE_RATE}function pd_fn(t){var i=new Float32Array(puredata_stream_length);for(let e=0;e<i.length;e++)i[e]=t(e/SAMPLE_RATE);return i}function pd_noise(){var t=new Float32Array(puredata_stream_length);for(let e=0;e<t.length;e++)t[e]=2*Math.random()-1;return t}function pd_clip(t,i,s){var n=new Float32Array(t.length);for(let e=0;e<t.length;e++)n[e]=Math.max(i[e],Math.min(t[e],s[e]));return n}function pd_osc(t){var i=new Float32Array(t.length),s=(PD_UNITBIT32,2*Math.PI/SAMPLE_RATE);let n=0;for(let e=0;e<t.length;e++){for(n+=t[e]*s;n>=Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;var a=(n+Math.PI)/(2*Math.PI)*PD_COSTABLESIZE|0,r=Math.floor(a)%PD_COSTABLESIZE,o=(1+r)%PD_COSTABLESIZE,l=COSTABLENAME[r],o=COSTABLENAME[o];i[e]=l+(a-r)*(o-l)}return i}function pd_mul(t,i){var s=new Float32Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]*i[e];return s}function pd_div(t,i){var s=new Float32Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]/i[e];return s}function pd_add(t,i){var s=new Float32Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]+i[e];return s}function pd_polyadd(...i){var s=new Float32Array(i[0].length);for(let t=0;t<s.length;t++){s[t]=i[0][t];for(let e=1;e<i.length;e++)s[t]+=i[e][t]}return s}function pd_c(e){var t=new Float32Array(puredata_stream_length);return t.fill(e),t}function pd_abs(t){var i=new Float32Array(t.length);for(let e=0;e<t.length;e++)i[e]=Math.abs(t[e]);return i}function pd_sqrt(t){var i=new Float32Array(t.length);for(let e=0;e<t.length;e++)i[e]=Math.sqrt(t[e]);return i}function sigbp_qcos(e){return e>=-.5*Math.PI&&e<=.5*Math.PI?(e=e*e)*e*e*(-1/720)+e*e*(1/24)-.5*e+1:0}function pd_bp(n,a,r){var o=new Float32Array(n.length);let l=n[0],h=n[0];for(let s=0;s<n.length;s++){let e=a[s],t=r[s];e<.001&&(e=10),t<0&&(t=0);var d=e*(2*Math.PI)/SAMPLE_RATE;let i;var c=1-(i=1<(i=t<.001?1:d/t)?1:i),u=2*sigbp_qcos(d)*c,d=2*i*(i+c*d),u=n[s]+u*l+-c*c*h;o[s]=d*u,h=l,l=u}return o}function pd_lop(i,s){var n=new Float32Array(i.length);let a=i[0];for(let t=0;t<i.length;t++){let e=s[t]*CONVERSION_FACTOR;(e=1<e?1:e)<0&&(e=0),a=e*i[t]+(1-e)*a,n[t]=a}return n}function pd_hip(i,s){var n,a,r=new Float32Array(i.length);let o=i[0];for(let t=0;t<i.length;t++){let e=1-s[t]*CONVERSION_FACTOR;e<0?e=0:1<e&&(e=1),e<1?(n=.5*(1+e),a=i[t]+e*o,r[t]=n*(a-o),o=a):r[t]=i[t]}return r}function pd_vcf(s,n,a){var r=new Float32Array(s.length);let o=0,l=0;var h={d:0,i:new Uint32Array(2)},d=(h.d=PD_UNITBIT32,h.i[PD_HIOFFSET]);for(let i=0;i<s.length;i++){var c=a[i],u=0<c?1/c:0,c=2-2/(c+2),p=COSTABLENAME;let e=n[i]*CONVERSION_FACTOR;var f=(e=e<0?0:e)*(PD_COSTABLESIZE/6.28318);let t=0<u?1-e*u:0;var u=1-(t=t<0?0:t),f=f+PD_UNITBIT32,f=(h.d=f,h.i[PD_HIOFFSET]&PD_COSTABLESIZE-1),m=(h.i[PD_HIOFFSET]=d,h.d-PD_UNITBIT32),_=p[f],g=p[1+f],v=t*(_+m*(g-_)),_=p[f=f-PD_COSTABLESIZE/4&PD_COSTABLESIZE-1],g=p[1+f],p=t*(_+m*(g-_)),f=s[i],m=o;o=c*u*f+v*m-p*l,l=p*m+v*l,Math.abs(o)<1e-10&&(o=0),Math.abs(l)<1e-10&&(l=0),r[i]=o}return r}let puredata_modules={dirt:"#N canvas 283 84 1002 691 12;\r\n#X obj 54 309 *~;\r\n#X obj 72 47 inlet~;\r\n#X obj 76 443 outlet~;\r\n#X obj 138 59 switch~;\r\n#X obj 138 33 inlet;\r\n#X obj 128 221 osc~;\r\n#X obj 127 157 *~;\r\n#X obj 150 82 noise~;\r\n#X obj 150 127 *~ 70;\r\n#X obj 150 104 lop~ 80;\r\n#X obj 100 127 +~ 0.3;\r\n#X obj 128 242 hip~ 200;\r\n#X obj 71 126 *~;\r\n#X obj 70 148 *~;\r\n#X obj 18 250 osc~ 80;\r\n#X obj 18 228 +~ 40;\r\n#X obj 19 202 *~ 500;\r\n#X obj 77 394 +~;\r\n#X obj 127 264 clip~ -1 1;\r\n#X obj 128 179 *~ 70;\r\n#X obj 126 330 *~ 0.04;\r\n#X obj 55 332 *~ 0.5;\r\n#X obj 128 200 +~ 70;\r\n#X connect 0 0 21 0;\r\n#X connect 1 0 10 0;\r\n#X connect 1 0 12 0;\r\n#X connect 1 0 12 1;\r\n#X connect 4 0 3 0;\r\n#X connect 5 0 11 0;\r\n#X connect 6 0 19 0;\r\n#X connect 7 0 9 0;\r\n#X connect 8 0 6 1;\r\n#X connect 9 0 8 0;\r\n#X connect 10 0 6 0;\r\n#X connect 11 0 18 0;\r\n#X connect 12 0 13 0;\r\n#X connect 12 0 13 1;\r\n#X connect 13 0 0 1;\r\n#X connect 13 0 16 0;\r\n#X connect 14 0 0 0;\r\n#X connect 15 0 14 0;\r\n#X connect 16 0 15 0;\r\n#X connect 17 0 2 0;\r\n#X connect 18 0 20 0;\r\n#X connect 19 0 22 0;\r\n#X connect 20 0 17 1;\r\n#X connect 21 0 17 0;\r\n#X connect 22 0 5 0;\r\n",grass:"#N canvas 136 86 1002 691 12;\r\n#X obj 293 399 *~;\r\n#X obj 311 137 inlet~;\r\n#X obj 401 564 outlet~;\r\n#X obj 310 216 *~;\r\n#X obj 309 238 *~;\r\n#X obj 257 340 osc~ 80;\r\n#X obj 401 527 +~;\r\n#X obj 294 422 *~ 0.8;\r\n#X obj 257 318 +~ 30;\r\n#X obj 257 292 *~ 600;\r\n#X obj 257 364 clip~ 0 0.5;\r\n#X obj 591 98 noise~;\r\n#X obj 598 269 lop~ 16;\r\n#X obj 493 231 *~;\r\n#X obj 493 255 *~;\r\n#X obj 599 295 *~ 23800;\r\n#X obj 492 159 /~;\r\n#X obj 521 132 lop~ 2000;\r\n#X obj 459 132 lop~ 300;\r\n#X obj 492 298 clip~ -0.9 0.9;\r\n#X obj 599 317 +~ 3400;\r\n#X obj 492 276 *~ 1e-05;\r\n#X obj 492 196 hip~ 2500;\r\n#X obj 477 472 *~;\r\n#X obj 599 342 clip~ 2000 10000;\r\n#X obj 493 418 hip~ 900;\r\n#X obj 493 450 *~ 0.3;\r\n#X obj 493 388 vcf~ 3333 1;\r\n#X connect 0 0 7 0;\r\n#X connect 1 0 3 0;\r\n#X connect 1 0 3 1;\r\n#X connect 1 0 23 0;\r\n#X connect 3 0 4 0;\r\n#X connect 3 0 4 1;\r\n#X connect 4 0 0 1;\r\n#X connect 4 0 9 0;\r\n#X connect 5 0 10 0;\r\n#X connect 6 0 2 0;\r\n#X connect 7 0 6 0;\r\n#X connect 8 0 5 0;\r\n#X connect 9 0 8 0;\r\n#X connect 10 0 0 0;\r\n#X connect 11 0 12 0;\r\n#X connect 11 0 17 0;\r\n#X connect 11 0 18 0;\r\n#X connect 12 0 15 0;\r\n#X connect 13 0 14 0;\r\n#X connect 13 0 14 1;\r\n#X connect 14 0 21 0;\r\n#X connect 15 0 20 0;\r\n#X connect 16 0 22 0;\r\n#X connect 17 0 16 1;\r\n#X connect 18 0 16 0;\r\n#X connect 19 0 27 0;\r\n#X connect 20 0 24 0;\r\n#X connect 21 0 19 0;\r\n#X connect 22 0 13 0;\r\n#X connect 22 0 13 1;\r\n#X connect 23 0 6 1;\r\n#X connect 24 0 27 1;\r\n#X connect 25 0 26 0;\r\n#X connect 26 0 23 1;\r\n#X connect 27 0 25 0;\r\n",gravel:"#N canvas 772 379 1002 691 12;\n#X obj 123 19 inlet~;\n#X obj 123 499 outlet~;\n#X obj 252 14 noise~;\n#X obj 136 160 *~;\n#X obj 136 107 /~;\n#X obj 166 70 lop~ 2000;\n#X obj 104 70 lop~ 300;\n#X obj 137 241 clip~ -0.9 0.9;\n#X obj 122 475 *~;\n#X obj 156 380 clip~ 500 10000;\n#X obj 154 271 lop~ 50;\n#X obj 137 134 hip~ 400;\n#X obj 137 219 *~ 0.01;\n#X obj 155 297 *~ 50000;\n#X obj 138 430 hip~ 200;\n#X obj 138 453 *~ 2;\n#X obj 156 355 +~;\n#X obj 173 330 *~ 1000;\n#X obj 138 406 vcf~ 200 3;\n#X connect 0 0 8 0;\n#X connect 0 0 17 0;\n#X connect 2 0 5 0;\n#X connect 2 0 6 0;\n#X connect 2 0 10 0;\n#X connect 3 0 12 0;\n#X connect 4 0 11 0;\n#X connect 5 0 4 1;\n#X connect 6 0 4 0;\n#X connect 7 0 18 0;\n#X connect 8 0 1 0;\n#X connect 9 0 18 1;\n#X connect 10 0 13 0;\n#X connect 11 0 3 0;\n#X connect 11 0 3 1;\n#X connect 12 0 7 0;\n#X connect 13 0 16 0;\n#X connect 14 0 15 0;\n#X connect 15 0 8 1;\n#X connect 16 0 9 0;\n#X connect 17 0 16 1;\n#X connect 18 0 14 0;\n",snow:"#N canvas 768 303 857 606 12;\r\n#X obj 161 453 *~;\r\n#X obj 109 225 noise~;\r\n#X obj 102 270 /~;\r\n#X obj 103 343 clip~ -1 1;\r\n#X obj 60 247 lop~ 110;\r\n#X obj 121 246 lop~ 900;\r\n#X obj 166 169 noise~;\r\n#X obj 165 219 /~;\r\n#X obj 123 196 lop~ 50;\r\n#X obj 184 195 lop~ 70;\r\n#X obj 103 290 *~;\r\n#X obj 192 220 lop~ 10;\r\n#X obj 191 241 *~ 17;\r\n#X obj 190 264 *~;\r\n#X obj 103 313 *~;\r\n#X obj 189 286 +~ 0.5;\r\n#X obj 424 130 inlet~;\r\n#X obj 160 507 outlet~;\r\n#X obj 102 365 hip~ 300;\r\n#X obj 185 389 +~ 700;\r\n#X obj 185 365 *~ 9000;\r\n#X obj 162 476 *~ 0.2;\r\n#X obj 146 412 vcf~ 200 0.5;\r\n#X connect 0 0 21 0;\r\n#X connect 1 0 4 0;\r\n#X connect 1 0 5 0;\r\n#X connect 2 0 10 0;\r\n#X connect 3 0 18 0;\r\n#X connect 4 0 2 0;\r\n#X connect 5 0 2 1;\r\n#X connect 6 0 8 0;\r\n#X connect 6 0 9 0;\r\n#X connect 6 0 11 0;\r\n#X connect 7 0 10 1;\r\n#X connect 8 0 7 0;\r\n#X connect 9 0 7 1;\r\n#X connect 10 0 14 0;\r\n#X connect 11 0 12 0;\r\n#X connect 12 0 13 0;\r\n#X connect 12 0 13 1;\r\n#X connect 13 0 15 0;\r\n#X connect 14 0 3 0;\r\n#X connect 15 0 14 1;\r\n#X connect 16 0 0 1;\r\n#X connect 16 0 20 0;\r\n#X connect 18 0 22 0;\r\n#X connect 19 0 22 1;\r\n#X connect 20 0 19 0;\r\n#X connect 21 0 17 0;\r\n#X connect 22 0 0 0;\r\n",wood:"#N canvas 945 155 1270 731 12;\r\n#X obj 470 445 *~;\r\n#X obj 181 142 inlet~;\r\n#X obj 401 564 outlet~;\r\n#X obj 180 221 *~;\r\n#X obj 401 527 +~;\r\n#X obj 466 255 noise~;\r\n#X obj 419 322 *~ 6;\r\n#X obj 801 262 noise~;\r\n#X obj 355 423 *~;\r\n#X obj 737 287 bp~ 123 20;\r\n#X obj 180 251 *~ 2;\r\n#X obj 336 293 bp~ 95 90;\r\n#X obj 411 291 bp~ 134 90;\r\n#X obj 489 290 bp~ 139 90;\r\n#X obj 567 290 bp~ 154 90;\r\n#X obj 815 286 bp~ 156 90;\r\n#X obj 893 286 bp~ 189 90;\r\n#X obj 745 318 *~ 8;\r\n#X obj 662 289 bp~ 201 70;\r\n#X obj 243 258 sqrt~;\r\n#X obj 356 449 *~ 0.5;\r\n#X obj 469 469 *~ 0.6;\r\n#X connect 0 0 21 0;\r\n#X connect 1 0 3 0;\r\n#X connect 1 0 3 1;\r\n#X connect 1 0 19 0;\r\n#X connect 3 0 10 0;\r\n#X connect 4 0 2 0;\r\n#X connect 5 0 11 0;\r\n#X connect 5 0 12 0;\r\n#X connect 5 0 13 0;\r\n#X connect 5 0 14 0;\r\n#X connect 6 0 8 1;\r\n#X connect 7 0 9 0;\r\n#X connect 7 0 15 0;\r\n#X connect 7 0 16 0;\r\n#X connect 7 0 18 0;\r\n#X connect 8 0 20 0;\r\n#X connect 9 0 17 0;\r\n#X connect 10 0 0 0;\r\n#X connect 11 0 6 0;\r\n#X connect 12 0 6 0;\r\n#X connect 13 0 6 0;\r\n#X connect 14 0 6 0;\r\n#X connect 15 0 17 0;\r\n#X connect 16 0 17 0;\r\n#X connect 17 0 0 1;\r\n#X connect 18 0 17 0;\r\n#X connect 19 0 8 0;\r\n#X connect 20 0 4 0;\r\n#X connect 21 0 4 1;\r\n"};var puredata_functions={},puredata_function_names=Object.keys(puredata_modules);function pd_compile(e){var t=(t=(e=(e=e.replace(/;/g,"")).replace(/\r/g,"")).split("\n")).map(e=>e.split(" ")),i=[],s=[];for(let e=0;e<t.length;e++){var n=t[e];switch(n[1]){case"obj":i.push(n.slice(4));break;case"msg":i.push(["sig~",n[4]]);break;case"connect":var a={from_ob:parseInt(n[2]),from_slot:parseInt(n[3]),to_ob:parseInt(n[4]),to_slot:parseInt(n[5])};s.push(a)}}e=i.findIndex(e=>"outlet~"===e[0]),e=build_function_body(build_function_tree(i,s,e));return new Function("envelope_signal",e)}var function_info={"outlet~":{input_slots:1,parameter_indices:[],js_name:"outlet~"},"inlet~":{input_slots:0,parameter_indices:[],js_name:"inlet~"},"*~":{input_slots:2,parameter_indices:[1],js_name:"pd_mul"},"/~":{input_slots:2,parameter_indices:[1],js_name:"pd_div"},"+~":{input_slots:2,parameter_indices:[1],js_name:"pd_add"},"sig~":{input_slots:1,parameter_indices:[0],js_name:"pd_c"},"vcf~":{input_slots:3,parameter_indices:[2],js_name:"pd_vcf"},"hip~":{input_slots:2,parameter_indices:[1],js_name:"pd_hip"},"lop~":{input_slots:2,parameter_indices:[1],js_name:"pd_lop"},"noise~":{input_slots:0,parameter_indices:[],js_name:"pd_noise"},"clip~":{input_slots:3,parameter_indices:[1,2],js_name:"pd_clip"},"osc~":{input_slots:1,parameter_indices:[0],js_name:"pd_osc"},"bp~":{input_slots:3,parameter_indices:[1,2],js_name:"pd_bp"},"sqrt~":{input_slots:1,parameter_indices:[0],js_name:"pd_sqrt"}};function build_function_tree(t,i,s){var e=t[s],n=e[0],e=e.slice(1);function_info.hasOwnProperty(n)||console.error("Unknown function: "+n);var a=function_info[n].input_slots,r=Array(a).fill().map(()=>[]),o=i.filter(e=>e.to_ob===s);for(let e=0;e<o.length;e++){var l=o[e],h=build_function_tree(t,i,l.from_ob);r[l.to_slot].push(h)}return{node_name:n,inputs:r,constructor_arguments:e,node_id:s}}function assign_variable_names(i,s,n){(!n.hasOwnProperty(i.node_id)||n[i.node_id]<s)&&(n[i.node_id]=s),s++;for(let t=0;t<i.inputs.length;t++)for(let e=0;e<i.inputs[t].length;e++)s=assign_variable_names(i.inputs[t][e],s,n);return s}function reslot_constructor_arguments(e,t){var i=function_info[e];if("vcf~"===e&&2===t.length)return[-1,t[0],t[1]];var s=i.input_slots,n=i.parameter_indices,a=Array(s).fill(-1);for(let e=0;e<s;e++)a[n[e]]=t[e];return a}function flatten_syntax_tree(t,i,s){var n={node_name:t.node_name,node_id:t.node_id,node_idx:s[t.node_id],constructor_arguments:reslot_constructor_arguments(t.node_name,t.constructor_arguments),inputs:[]};for(let e=0;e<t.inputs.length;e++){var a=t.inputs[e],r=[];for(let e=0;e<a.length;e++){var o=a[e],l=s[o.node_id];r.push(l),flatten_syntax_tree(o,i,s)}n.inputs.push(r)}i.push(n)}function strip_duplicate_nodes(t){var i=[];for(let e=0;e<t.length;e++){var s=t[e];i.includes(s.node_id)&&(t.splice(e,1),e--),i.push(s.node_id)}}function build_function_body(e){var t={},i=(assign_variable_names(e,0,t),[]),s=(flatten_syntax_tree(e,i,t),strip_duplicate_nodes(i),i.sort((e,t)=>t.node_idx-e.node_idx),"");for(let e=0;e<i.length;e++){var n=i[e],a="";for(let e=0;e<n.inputs.length;e++){0<e&&(a+=",");var r=n.inputs[e];0===r.length?-1===n.constructor_arguments[e]?a+="NULL":a+=`pd_c(${n.constructor_arguments[e]})`:1===r.length?a+="s_"+r[0]:a+=`pd_polyadd(${r.map(e=>"s_"+e).join(",")})`}var o=n.node_name;"inlet~"===o?s+=`const s_${n.node_idx} = envelope_signal;
`:"outlet~"===o?s+=`const s_${n.node_idx} = ${a};
`:(function_info.hasOwnProperty(n.node_name)?o=function_info[n.node_name].js_name:console.error("Unknown function: "+n.node_name),s+=`const s_${n.node_idx} = ${o}(${a});
`)}return s+=`return s_0;
`}for(let e=0;e<puredata_function_names.length;e++){var function_name=puredata_function_names[e],pd_source=puredata_modules[function_name],pd_compiled=pd_compile(pd_source);puredata_functions[function_name]=pd_compiled}class Bfxr_DSP{static version="1.0.4";static MIN_LENGTH=.18;static LoResNoisePeriod=8;static sampleRate=44100;static bitDepth=16;constructor(e,t){this.params=e,this.param_info=t,this.reset(!0)}reset(e=!0){var t=this.params,i=(this.frequency_period_samples=100/(t.frequency_start*t.frequency_start+.001),Math.pow(t.min_frequency_relative_to_starting_frequency,.4)*t.frequency_start);if(this.frequency_maxPeriod_samples=100/(i*i+.001),this.pitch_jump_reached=!1,this.pitch_jump_2_reached=!1,e){this.masterVolume=t.masterVolume*t.masterVolume,this.waveType=0|t.waveType,t.sustainTime<.01&&(t.sustainTime=.01),this.clampTotalLength(t),this.sustainPunch=t.sustainPunch,this.phase=0,this.minFreqency=t.min_frequency_relative_to_starting_frequency,this.muted=!1,this.overtones=10*t.overtones,this.overtoneFalloff=t.overtoneFalloff,this.compression_factor=1/(1+4*t.compressionAmount),this.filters=1!=t.lpFilterCutoff||0!=t.hpFilterCutoff,this.vibratoPhase=0,this.vibratoSpeed=t.vibratoSpeed*t.vibratoSpeed*.01,this.vibratoAmplitude=.5*t.vibratoDepth,this.envelopeVolume=0,this.envelopeStage=0,this.envelopeTime=0,this.envelopeLength0=t.attackTime*t.attackTime*1e5,this.envelopeLength1=t.sustainTime*t.sustainTime*1e5,this.envelopeLength2=t.decayTime*t.decayTime*1e5+10,this.attack_length_samples=this.envelopeLength0,this.envelope_full_length_samples=this.envelopeLength0+this.envelopeLength1+this.envelopeLength2,this.bitcrush_freq_sweep=-t.bitCrushSweep/this.envelope_full_length_samples,this.bitcrush_phase=0,this.bitcrush_last=0,this.envelopeOverLength0=1/this.envelopeLength0,this.envelopeOverLength1=1/this.envelopeLength1,this.envelopeOverLength2=1/this.envelopeLength2,this.flanger=0!=t.flangerOffset||0!=t.flangerSweep,this.flangerDeltaOffset=t.flangerSweep*t.flangerSweep*t.flangerSweep*.2,this.flangerPos=0,this.flangerBuffer||(this.flangerBuffer=new Float32Array(1024)),this.noiseBuffer||(this.noiseBuffer=new Float32Array(32)),this.pinkNoiseBuffer||(this.pinkNoiseBuffer=new Float32Array(32)),this.loResNoiseBuffer||(this.loResNoiseBuffer=new Float32Array(32)),this.oneBitNoiseState=16384,this.oneBitNoise=0,this.buzzState=16384;for(var s=this.buzz=0;s<1024;s++)this.flangerBuffer[s]=0;for(s=0;s<32;s++)this.noiseBuffer[s]=2*Math.random()-1;for(s=0;s<32;s++)this.loResNoiseBuffer[s]=s%Bfxr_DSP.LoResNoisePeriod==0?2*Math.random()-1:this.loResNoiseBuffer[s-1];this.repeat_timestamp_samples=0,this.pitch_jump_repeat_length_samples=lerp(this.envelope_full_length_samples,Bfxr_DSP.sampleRate/50,t.pitch_jump_repeat_speed)+32;var n,a,r,o,l,i=this.envelope_full_length_samples;0<this.pitch_jump_repeat_length_samples&&(i=this.pitch_jump_repeat_length_samples),0<t.pitch_jump_amount?this.pitch_jump_amount=1-t.pitch_jump_amount*t.pitch_jump_amount*.9:this.pitch_jump_amount=1+t.pitch_jump_amount*t.pitch_jump_amount*10,0<t.pitch_jump_2_amount?this.pitch_jump_2_amount=1-t.pitch_jump_2_amount*t.pitch_jump_2_amount*.9:this.pitch_jump_2_amount=1+t.pitch_jump_2_amount*t.pitch_jump_2_amount*10,this.pitch_jump_current_timestamp_samples=0,1==t.pitch_jump_onset_percent?this.pitch_jump_timestamp_sample=0:this.pitch_jump_timestamp_sample=t.pitch_jump_onset_percent*i+32,1==t.pitch_jump_onset2_percent?this.pitch_jump_2_timestamp_sample=0:this.pitch_jump_2_timestamp_sample=t.pitch_jump_onset2_percent*i+32,9===this.waveType&&(e=t.frequency_start,i=t.min_frequency_relative_to_starting_frequency,n=this.param_info.param_min("frequency_start"),r=((a=this.param_info.param_max("frequency_start"))+n)/2,o=this.param_info.param_min("min_frequency_relative_to_starting_frequency"),i=((l=this.param_info.param_max("min_frequency_relative_to_starting_frequency"))+o)/2+(i-o)/(l-o),this.frequency_period_samples=100/((e=r+(e-n)/(a-n))*e+.001),this.frequency_maxPeriod_samples=100/(i*i+.001))}this.slide=1-t.frequency_slide*t.frequency_slide*t.frequency_slide*.01,this.frequency_acceleration=-t.frequency_acceleration*t.frequency_acceleration*t.frequency_acceleration*1e-6,this.flangerOffset=t.flangerOffset*t.flangerOffset*1020,t.flangerOffset<0&&(this.flangerOffset=-this.flangerOffset),this.bitcrush_freq=1-Math.pow(t.bitCrush,1/3),!0|t.waveType&&(this.squareDuty=.5-.5*t.squareDuty,this.dutySweep=5e-5*-t.dutySweep),this.lpFilterCutoff=t.lpFilterCutoff*t.lpFilterCutoff*t.lpFilterCutoff*.1,this.lpFilterDeltaCutoff=1+1e-4*t.lpFilterCutoffSweep,this.lpFilterDamping=5/(1+t.lpFilterResonance*t.lpFilterResonance*20)*(.01+this.lpFilterCutoff),.8<this.lpFilterDamping&&(this.lpFilterDamping=.8),this.lpFilterDamping=1-this.lpFilterDamping,this.lpFilterOn=1!=t.lpFilterCutoff,this.lpFilterPos=0,this.lpFilterDeltaPos=0,this.hpFilterPos=0,this.hpFilterCutoff=t.hpFilterCutoff*t.hpFilterCutoff*.1,this.hpFilterDeltaCutoff=1+3e-4*t.hpFilterCutoffSweep,this.param_reset_period_samples=lerp(this.envelope_full_length_samples,Bfxr_DSP.sampleRate/10,t.repeatSpeed),this.param_reset_current_timestamp_samples=0}clampTotalLength(e){var t=e.attackTime+e.sustainTime+e.decayTime;t<Bfxr_DSP.MIN_LENGTH&&(t=Bfxr_DSP.MIN_LENGTH/t,e.attackTime=e.attackTime*t,e.sustainTime=e.sustainTime*t,e.decayTime=e.decayTime*t)}generate_sound(){for(var e=new Float32Array(this.envelope_full_length_samples),t=(this.sampleCount=0,this.envelope_full_length_samples),i=!1,s=-1,n=0;n<t;n++){if(i)return!0;if(0!=this.param_reset_period_samples&&(this.param_reset_current_timestamp_samples++,this.param_reset_current_timestamp_samples>=this.param_reset_period_samples)&&(this.param_reset_current_timestamp_samples=0,this.reset(!1)),this.pitch_jump_current_timestamp_samples++,this.pitch_jump_current_timestamp_samples>=this.pitch_jump_repeat_length_samples&&(this.pitch_jump_current_timestamp_samples=0,this.pitch_jump_reached&&(this.frequency_period_samples/=this.pitch_jump_amount,this.pitch_jump_reached=!1),this.pitch_jump_2_reached)&&(this.frequency_period_samples/=this.pitch_jump_2_amount,this.pitch_jump_2_reached=!1),this.pitch_jump_reached||this.pitch_jump_current_timestamp_samples>=this.pitch_jump_timestamp_sample&&(this.pitch_jump_reached=!0,this.frequency_period_samples*=this.pitch_jump_amount),this.pitch_jump_2_reached||this.pitch_jump_current_timestamp_samples>=this.pitch_jump_2_timestamp_sample&&(this.frequency_period_samples*=this.pitch_jump_2_amount,this.pitch_jump_2_reached=!0),this.slide+=this.frequency_acceleration,this.frequency_period_samples*=this.slide,this.frequency_period_samples>this.frequency_maxPeriod_samples&&(this.frequency_period_samples=this.frequency_maxPeriod_samples,0<this.minFreqency)&&(this.muted=!0),this.periodTemp=this.frequency_period_samples,0<this.vibratoAmplitude&&(this.vibratoPhase+=this.vibratoSpeed,this.periodTemp=this.frequency_period_samples*(1+Math.sin(this.vibratoPhase)*this.vibratoAmplitude)),this.periodTemp=0|this.periodTemp,this.periodTemp<8&&(this.periodTemp=8),0===this.waveType&&(this.squareDuty+=this.dutySweep,this.squareDuty<0?this.squareDuty=.001:.5<this.squareDuty&&(this.squareDuty=.5)),++this.envelopeTime>this.attack_length_samples)switch(this.envelopeTime=0,++this.envelopeStage){case 1:this.attack_length_samples=this.envelopeLength1;break;case 2:this.attack_length_samples=this.envelopeLength2}switch(this.envelopeStage){case 0:this.envelopeVolume=this.envelopeTime*this.envelopeOverLength0;break;case 1:this.envelopeVolume=1+2*(1-this.envelopeTime*this.envelopeOverLength1)*this.sustainPunch;break;case 2:this.envelopeVolume=1-this.envelopeTime*this.envelopeOverLength2;break;case 3:i=!(this.envelopeVolume=0)}this.flanger&&(this.flangerOffset+=this.flangerDeltaOffset,this.flangerInt=0|this.flangerOffset,this.flangerInt<0?this.flangerInt=-this.flangerInt:1023<this.flangerInt&&(this.flangerInt=1023)),this.filters&&0!=this.hpFilterDeltaCutoff&&(this.hpFilterCutoff*=this.hpFilterDeltaCutoff,this.hpFilterCutoff<1e-5?this.hpFilterCutoff=1e-5:.1<this.hpFilterCutoff&&(this.hpFilterCutoff=.1));for(var a=this.superSample=0;a<8;a++){if(this.phase++,this.phase>=this.periodTemp)switch(this.phase=this.phase-this.periodTemp,this.waveType){case 3:for(var r=0;r<32;r++)this.noiseBuffer[r]=2*Math.random()-1;break;case 6:for(r=0;r<32;r++)this.loResNoiseBuffer[r]=r%Bfxr_DSP.LoResNoisePeriod==0?2*Math.random()-1:this.loResNoiseBuffer[r-1];break;case 9:var o=this.oneBitNoiseState>>1&1^1&this.oneBitNoiseState;this.oneBitNoiseState=this.oneBitNoiseState>>1|o<<14,this.oneBitNoise=(1&~this.oneBitNoiseState)-.5}for(var l=1,h=this.sample=0;h<=this.overtones;h++){var d=this.phase*(h+1)%this.periodTemp;switch(this.waveType){case 0:this.sample+=l*(d/this.periodTemp<this.squareDuty?.5:-.5);break;case 1:this.sample+=l*(1-d/this.periodTemp*2);break;case 2:this.pos=d/this.periodTemp,this.pos=.5<this.pos?6.28318531*(this.pos-1):6.28318531*this.pos;var c=this.pos<0?1.27323954*this.pos+.405284735*this.pos*this.pos:1.27323954*this.pos-.405284735*this.pos*this.pos;this.sample+=l*(c<0?.225*(c*-c-c)+c:.225*(c*c-c)+c);break;case 3:this.sample+=l*this.noiseBuffer[(32*d/(0|this.periodTemp)|0)%32];break;case 4:this.sample+=l*(Math.abs(1-d/this.periodTemp*2)-1);break;case 5:var u=(256*d/(0|this.periodTemp)|0)%256,p=AKWF.granular_0044[u]/32768-1;this.sample+=l*p;break;case 6:this.sample+=Math.tan(Math.PI*d/this.periodTemp)*l;break;case 7:this.pos=d/this.periodTemp,this.pos=.5<this.pos?6.28318531*(this.pos-1):6.28318531*this.pos;var f=.75*((c=this.pos<0?1.27323954*this.pos+.405284735*this.pos*this.pos:1.27323954*this.pos-.405284735*this.pos*this.pos)<0?.225*(c*-c-c)+c:.225*(c*c-c)+c);this.pos=20*d%this.periodTemp/this.periodTemp,this.pos=.5<this.pos?6.28318531*(this.pos-1):6.28318531*this.pos,f+=.25*((c=this.pos<0?1.27323954*this.pos+.405284735*this.pos*this.pos:1.27323954*this.pos-.405284735*this.pos*this.pos)<0?.225*(c*-c-c)+c:.225*(c*c-c)+c),this.sample+=l*f;break;case 8:f=d/this.periodTemp;this.sample+=l*(Math.abs(1-f*f*2)-1);break;case 9:this.sample+=l*this.oneBitNoise;break;case 10:u=(256*d/(0|this.periodTemp)|0)%256,p=AKWF.fmsynth_0012[u]/32768-1;this.sample+=l*p;break;case 11:u=(256*d/(0|this.periodTemp)|0)%256,p=AKWF.hvoice_0012[u]/32768-1;this.sample+=l*p}l*=1-this.overtoneFalloff}this.filters&&(this.lpFilterOldPos=this.lpFilterPos,this.lpFilterCutoff*=this.lpFilterDeltaCutoff,this.lpFilterCutoff<0?this.lpFilterCutoff=0:.1<this.lpFilterCutoff&&(this.lpFilterCutoff=.1),this.lpFilterOn?(this.lpFilterDeltaPos+=(this.sample-this.lpFilterPos)*this.lpFilterCutoff,this.lpFilterDeltaPos*=this.lpFilterDamping):(this.lpFilterPos=this.sample,this.lpFilterDeltaPos=0),this.lpFilterPos+=this.lpFilterDeltaPos,this.hpFilterPos+=this.lpFilterPos-this.lpFilterOldPos,this.hpFilterPos*=1-this.hpFilterCutoff,this.sample=this.hpFilterPos),this.flanger&&(this.flangerBuffer[1023&this.flangerPos]=this.sample,this.sample+=this.flangerBuffer[this.flangerPos-this.flangerInt+1024&1023],this.flangerPos=this.flangerPos+1&1023),this.superSample+=this.sample}8<this.superSample?this.superSample=8:this.superSample<-8&&(this.superSample=-8),this.bitcrush_phase+=this.bitcrush_freq,1<this.bitcrush_phase&&(this.bitcrush_phase=0,this.bitcrush_last=this.superSample);var m=lerp(1,50*this.bitcrush_freq,Math.sqrt(this.bitcrush_freq));if(this.bitcrush_freq=Math.max(Math.min(this.bitcrush_freq+m*this.bitcrush_freq_sweep,1),1e-5),this.superSample=this.bitcrush_last,this.superSample=this.masterVolume*this.envelopeVolume*this.superSample*.125,0<this.superSample?this.superSample=Math.pow(this.superSample,this.compression_factor):this.superSample=-Math.pow(-this.superSample,this.compression_factor),this.muted){e=e.slice(0,n);break}.002<Math.abs(this.superSample)&&(s=n),e[n]=Math.clamp(this.superSample,-1,1)}s<e.length-1&&(s=Math.max(s,10),e=e.slice(0,s+1)),this.buffer=e}}class SynthBase{sound=null;params={};locked_params=null;default_params(){for(var e={},t=0;t<this.param_info.length;t++){var i=this.param_info[t];if(i.constructor===Array){var s=i[2],n=i[3];e[s]=n}else switch(i.type){case"BUTTONSELECT":e[i.name]=i.default_value;break;case"KNOB_TRANSITION":e[i.name]=i.default_value_l;break;default:console.error("Unknown param type: "+i.type)}}return e}create_random_template(){this.reset_params();var e=Math.floor(Math.random()*this.templates.length),e=this.templates[e],t=(e[0],e[3]);return this[e[2]](),[t,this.params]}apply_params(e,t=!1){for(var i in e)t&&this.locked_param(i)||(this.params[i]=e[i])}param_is_disabled(e){return!1}reset_params(e=!1){var t=this.default_params();this.apply_params(t,e)}post_initialize(){this.params=this.default_params(),this.create_locked_params_array(),this.load_bcol_tempaltes()}load_bcol_tempaltes(){if(TEMPLATES_JSON.hasOwnProperty(this.name))for(var e=TEMPLATES_JSON[this.name],t=Object.keys(e),i=0;i<t.length;i++){var s=t[i],n="generate_"+t[i],s=e[s];this[n]=this.generate_template_function_from_bounds_dictionary(s)}}create_locked_params_array(){if(!this.locked_params){this.locked_params={};for(var e=0;e<this.param_info.length;e++){var t=this.get_param_normalized(this.param_info[e]);this.locked_params[t.name]=!1}for(e=0;e<this.permalocked.length;e++)this.locked_params[this.permalocked[e]]=!0}}get_param_normalized(e){var t={};if(e.constructor===Array)t.name=e[2],t.default_value=e[3],t.min_value=e[4],t.max_value=e[5],t.type="RANGE";else switch(e.type){case"BUTTONSELECT":t.name=e.name,t.default_value=e.default_value,t.min_value=0,t.max_value=e.values.length,t.type="BUTTONSELECT";break;case"KNOB_TRANSITION":t.name=e.name,t.default_value=e.default_value_l,t.min_value=e.min,t.max_value=e.max,t.type="KNOB_TRANSITION";break;default:console.error("Don't know how to uniformize param type: "+e.type)}return t}param_min(e){for(var t=0;t<this.param_info.length;t++){var i=this.param_info[t],i=this.get_param_normalized(i);if(i.name===e)return i.min_value}return console.error("Could not find param: "+e),0}param_max(e){for(var t=0;t<this.param_info.length;t++){var i=this.param_info[t],i=this.get_param_normalized(i);if(i.name===e)return i.max_value}return console.error("Could not find param: "+e),1}param_default(e){for(var t=0;t<this.param_info.length;t++){var i=this.param_info[t],i=this.get_param_normalized(i);if(i.name===e)return i.default_value}return console.error("Could not find param: "+e),0}set_param(e,t,i=!1){var s;e in this.params?i&&this.locked_params[e]||(i=this.param_min(e),s=this.param_max(e),this.params[e]=Math.clamp(t,i,s)):console.error("Could not set parameter (not found): "+e)}get_param(e){return e in this.params?this.params[e]:(console.error("Could not get parameter (not found): "+e),0)}get_param_info(e){for(var t=0;t<this.param_info.length;t++){var i=this.param_info[t];if(i.constructor===Array){if(i[2]===e)return i}else if(i.name===e)return i}return console.error("Could not find param: "+e),null}randomize_params(){this.reset_params(!0);for(var e=0;e<this.param_info.length;e++){var t=this.param_info[e],t=this.get_param_normalized(t),i=t.min_value,s=t.max_value,i=Math.random()*(s-i)+i;"BUTTONSELECT"===t.type&&s<=(i=Math.floor(i))&&(i=s-1),this.set_param(t.name,i,!0)}}mutate_params(){for(var e,t,i=0;i<this.param_info.length;i++)Math.random()<.5||(e=this.param_info[i],"RANGE"===(e=this.get_param_normalized(e)).type&&(t=e.max_value-e.min_value,t=.1*(Math.random()-.5)*t,t=this.params[e.name]+t,this.set_param(e.name,t,!0)))}play(){this.sound&&this.sound.stop(),this.generate_sound(),this.sound.play()}generate_sound_uri(){return this.sound||this.generate_sound(),this.sound.getDataUri()}generate_sound_blob(){this.sound||this.generate_sound();for(var i=this.sound,s=[],e=0,n=0,t=0;t<i.numberOfChannels;t++)s.push(i.getChannelData(t)),e+=s[t].length,0==t&&(n=s[t].length);var a=new Float32Array(e);for(let e=0,t=0;e<n;e++,t+=i.numberOfChannels)for(var r=0;r<i.numberOfChannels;r++)a[t+r]=s[r][e];var o=this.getWavBytes(a.buffer,{isFloat:!0,numChannels:i.numberOfChannels,sampleRate:48e3});return new Blob([o],{type:"audio/wav"})}generateSilhouette(e){for(var t=[],i=this.sound.getBuffer(),s=0,n=i[0],a=i[0],r=i.length,o=0;o<r;o++){var l=i[o];s/e<o/r?(Math.abs(n-a)<.01&&(n+=.005,a-=.005),t.push(n),t.push(a),s++,n=a=l):(l<a&&(a=l),n<l&&(n=l))}return t.push(n),t.push(a),t}drawWaveform(e){for(var t=e.canvas.width,i=e.canvas.height,s=this.generateSilhouette(i),n=(e.beginPath(),e.lineWidth="1",e.strokeStyle="#663931",t/2),a=0,r=0,o=0;o<i;o++){var l=n+ +s[2*o+0]*n,h=n+ +s[2*o+1]*n;e.lineTo(l,i-o),e.lineTo(h,i-o),a=l,r=h}e.lineTo(a,i-i),e.lineTo(r,i-i),e.stroke()}generate_sound(){console.error("generate_sound not implemented");var e=new Float32Array(1);this.sound&&this.sound.stop(),this.sound=RealizedSound.from_buffer(e)}set_sound(e){this.sound=e}pick_variety(e){for(var t={},i=0;i<e.length;i++){var s=1;(a=e[i]).match(/^\d+$/)&&(s=parseInt(a)),t[a]=s}console.log("weights",t);var n=0;for(a in t)n+=t[a];var a,r=Math.random()*n,o=0;for(a in t)if(r<=(o+=t[a]))return a;return e[0]}generate_template_function_from_bounds_dictionary(l){return function(){var e,t=Object.keys(l),t=this.pick_variety(t),i=l[t];for(e in i){var s=i[e],n=this.get_param_info(e);switch(this.get_param_normalized(n).type){case"BUTTONSELECT":var a=s[Math.floor(Math.random()*s.length)];this.set_param(e,a,!0);break;case"RANGE":var r=Math.min(...s),o=Math.max(...s),a=Math.random()*(o-r)+r;this.set_param(e,a,!0);break;default:console.error("Unknown param type: "+n.type)}}}}locked_param(e){return!!this.permalocked.includes(e)||this.locked_params[e]}set_locked_param(e,t){this.permalocked.includes(e)?this.locked_params[e]=!0:this.locked_params[e]=t}lerp_params(e,t){for(var i in e){var s,n;this.get_param_info(i).constructor===Array&&(s=e[i],n=this.get_param(i),this.set_param(i,n+(s-n)*t,!0))}}}class Bfxr extends SynthBase{name="Bfxr";version=Bfxr_DSP.version;tooltip="Bfxr is a simple sound effect generator, based on DrPetter's Sfxr.";canvas_bg_logo="img/logo_bfxr.png";header_properties=["waveType"];permalocked=["masterVolume"];hide_params=["masterVolume"];param_info=[["Sound Volume","Overall volume of the current sound.","masterVolume",.5,0,1],{type:"BUTTONSELECT",name:"waveType",display_name:"",tooltip:"",default_value:0,columns:4,header:!0,values:[["Triangle","Triangle waves are robust at all frequencies, stand out quite well in most situations, and have a clear, resonant quality.",4],["Sin","Sin waves are the most elementary of all wave-types.  However, they can be sensitive to context (background noise or accoustics can drown them out sometimes), so be careful.",2],["Square","quare waves can be quite powerful.  They have two extra properties, Square Duty and Duty Sweep, that can further control the timbre of the wave.",0],["Saw","Saw waves are pretty raspy",1],["Breaker","These are defined by a quadratic equation (a=t*t%1, giving a toothed-shaped), making them a little more hi-fi than other wave-types on this list.  For the most part, like a smoother, slicker triangle wave.",8],["Tan","A potentially crazy wave.  Does strange things.  Tends to produce plenty of distortion\t (because the basic shape goes outside of the standard waveform range).",6],["Whistle","A sin wave with an additional sine wave overlayed at a lower amplitude and 20x the frequency.  It can end up sounding buzzy, hollow, resonant, or breathy.",7],["White","White noise is your bog standard random number stream.  Quite hard-sounding, compared to pink noise.",3],["Voice","A digital voice sample.",11],["Bitnoise",'Periodic 1-bit "white" noise. Useful for glitchy and punky sound effects.',9],["Rasp","Periodic 1-bit noise with a shortened period. It makes a nice digital buzz or clang sound.",5],["FMSyn","A pretty dense mix of lots of waveforms.  Breathier/distorteder than the classic ones.",10]]},["Attack Time","Length of the volume envelope attack.","attackTime",0,0,1],["Sustain Time","Length of the volume envelope sustain.","sustainTime",.3,0,1],["Punch","Tilts the sustain envelope for more 'pop'.","sustainPunch",0,0,1],["Decay Time","Length of the volume envelope decay (yes, I know it's called release).","decayTime",.4,.03,1],["Compression","Pushes amplitudes together into a narrower range to make them stand out more.  Very good for sound effects, where you want them to stick out against background music. If unlocked, this is set to zero during randomization.","compressionAmount",0,0,1],["Frequency","Base note of the sound.","frequency_start",.3,0,1],["Frequency Slide","Slides the frequency up or down.","frequency_slide",0,-.5,.5],["Delta Slide","Accelerates the frequency.  Can be used to get the frequency to change direction.","frequency_acceleration",0,-1,1],["Frequency Cutoff","If sliding, the sound will stop at this frequency, to prevent really low notes.  0 means no cuttoff, 1 refers to the starting frequency of the sound. Ignores vibrato.  If the sound trajectory only goes up, this is disabled.","min_frequency_relative_to_starting_frequency",0,0,.99],["Vibrato Depth","Strength of the vibrato effect.","vibratoDepth",0,0,1],["Vibrato Speed","Speed of the vibrato effect (i.e. frequency).","vibratoSpeed",0,0,1],["Pitch Jump Repeat Speed","Larger Values means more pitch jumps, which can be useful for arpeggiation. 0 means a single jump in the whole sound, 1 means 50 jumps a second.","pitch_jump_repeat_speed",0,0,1],["Pitch Jump Amount 1","Jump in pitch, either up or down.","pitch_jump_amount",0,-1,1],["Pitch Jump Onset 1","When the first pitch-jump happens.","pitch_jump_onset_percent",0,0,1],["Pitch Jump Amount 2","Second jump in pitch, either up or down.","pitch_jump_2_amount",0,-1,1],["Pitch Jump Onset 2","When the second pitch-jump happens.","pitch_jump_onset2_percent",0,0,1],["Harmonics","Overlays copies of the waveform with copies and multiples of its frequency.  Good for bulking out or otherwise enriching the texture of the sounds (warning: this is the number 1 cause of bfxr slowdown!).","overtones",0,0,1],["Harmonics Falloff","The rate at which higher overtones should decay.","overtoneFalloff",0,0,1],["Square Duty","Square waveform only : Controls the ratio between the up and down states of the square wave, changing the timbre.","squareDuty",0,0,.99],["Duty Sweep","Square waveform only : Sweeps the duty up or down.","dutySweep",0,-1,1],["Repeat Speed","Speed of the note repeating - certain variables are reset each time (sweeps, pitch slide, delta slide, etc. - doesn't apply to pitch jumps which have their own repeat parameter). 0 means no repeat, 1 means 10 repeats a second.","repeatSpeed",0,0,1],["Flanger Offset","Offsets a second copy of the wave by a small phase, changing the timbre.","flangerOffset",0,-1,1],["Flanger Sweep","Sweeps the phase up or down.","flangerSweep",0,-1,1],["Low-pass Filter Cutoff","Frequency at which the low-pass filter starts attenuating higher frequencies.  Named most likely to result in 'Huh why can't I hear anything?' at her high-school grad. ","lpFilterCutoff",1,.01,1],["Low-pass Filter Cutoff Sweep","Sweeps the low-pass cutoff up or down.","lpFilterCutoffSweep",0,-1,1],["Low-pass Filter Resonance","Changes the attenuation rate for the low-pass filter, changing the timbre.","lpFilterResonance",0,0,1],["High-pass Filter Cutoff","Frequency at which the high-pass filter starts attenuating lower frequencies.","hpFilterCutoff",0,0,1],["High-pass Filter Cutoff Sweep","Sweeps the high-pass cutoff up or down.","hpFilterCutoffSweep",0,-1,1],["Bit Crush","Resamples the audio at a lower frequency.","bitCrush",0,0,1],["Bit Crush Sweep","Sweeps the Bit Crush filter up or down.","bitCrushSweep",0,-1,1]];templates=[["Pickup/Coin","Blips and baleeps.  Try messing with the wave-forms to get your own sound.","generate_pickup_coin","Pickup"],["Laser/Shoot","Pew pew.  Try playing about with the Frequency properties (slide + delta slide especially).  If you want to add some texture, try adding some light, high-frequency vibrato.","generate_laser_shoot","Shoot"],["Explosion","Boom.  To make this louder, try increasing compression, or fiddling with the frequency parameters.  To make this softer, try switching to pink noise or decreasing the frequency.  If you're hearing nothing after messing with parameters, try fiddling with 'frequency cutoff'.","generate_explosion","Boom"],["Powerup","Whoo.  Try messing with the slide + delta slide parameters to make these less unreservedly exhuberant.  Or how about increasing the decay and playing with the Pitch Jump/Onset parameters?","generate_powerup","PowerUp"],["Hit/Hurt","If you want something more crackly, try out a tan wave here.","generate_hit_hurt","Hit"],["Jump","Try turn your jump into a soggy kiss with some bitcrush.","generate_jump","Jump"],["Blip/Select","You might want to make a variation of this with longer decay for blips that accompany fadeouts or animations.","generate_blip_select","Blip"],["Randomize","Talking your life into your hands... (only modifies unlocked parameters)","randomize_params","Random"],["Mutate","Modify each unlocked parameter by a small wee amount... (only modifies unlocked parameters)","mutate_params","Mutant"]];constructor(){super(),this.post_initialize()}generate_sin(){this.reset_params(!0),this.set_param("waveType",1,!0)}generate_pickup_coin(){var e,t;this.reset_params(!0),this.set_param("frequency_start",.4+.5*Math.random(),!0),this.set_param("sustainTime",.1*Math.random(),!0),this.set_param("decayTime",.1+.4*Math.random(),!0),this.set_param("sustainPunch",.3+.3*Math.random(),!0),Math.random()<.5&&(this.set_param("pitch_jump_Speed",.5+.2*Math.random(),!0),e=Math.floor(7*Math.random())+1,t=Math.floor(7*Math.random())+e+2,this.set_param("pitch_jump_amount",e/t,!0))}generate_laser_shoot(){this.reset_params(!0),this.set_param("waveType",3*Math.random()|0,!0),2==this.get_param("waveType")&&Math.random()<.5&&this.set_param("waveType",2*Math.random()|0,!0),Math.random()<.33?(this.set_param("frequency_start",.1+.5*Math.random(),!0),this.set_param("min_frequency_relative_to_starting_frequency",.1*Math.random(),!0),this.set_param("frequency_slide",-.35-.3*Math.random(),!0)):(this.set_param("frequency_start",.5+.5*Math.random(),!0),this.set_param("min_frequency_relative_to_starting_frequency",this.get_param("frequency_start")-.2-.6*Math.random(),!0),this.get_param("min_frequency_relative_to_starting_frequency")<.2&&this.set_param("min_frequency_relative_to_starting_frequency",.2,!0),this.set_param("frequency_slide",-.15-.2*Math.random(),!0)),this.get_param("frequency_start")<.15&&(this.set_param("min_frequency_relative_to_starting_frequency",0,!0),this.set_param("frequency_slide",-.1-.1*Math.random(),!0),console.log("adjusting for low frequency")),Math.random()<.5?(this.set_param("squareDuty",.5*Math.random(),!0),this.set_param("dutySweep",.2*Math.random(),!0)):(this.set_param("squareDuty",.4+.5*Math.random(),!0),this.set_param("dutySweep",.7*-Math.random(),!0)),this.set_param("sustainTime",.1+.2*Math.random(),!0),this.set_param("decayTime",.4*Math.random(),!0),Math.random()<.5&&this.set_param("sustainPunch",.3*Math.random(),!0),Math.random()<.33&&(this.set_param("flangerOffset",.2*Math.random(),!0),this.set_param("flangerSweep",.2*-Math.random(),!0)),Math.random()<.5&&this.set_param("hpFilterCutoff",.3*Math.random(),!0)}generate_explosion(){this.reset_params(!0),Math.random()<.5?this.set_param("waveType",3,!0):this.set_param("waveType",9,!0),Math.random()<.5?(this.set_param("frequency_start",.1+.4*Math.random(),!0),this.set_param("frequency_slide",.4*Math.random()-.1,!0)):(this.set_param("frequency_start",.2+.7*Math.random(),!0),this.set_param("frequency_slide",-.2-.2*Math.random(),!0)),this.set_param("frequency_start",this.get_param("frequency_start")*this.get_param("frequency_start"),!0),Math.random()<.2&&this.set_param("frequency_slide",0,!0),Math.random()<.33&&this.set_param("repeatSpeed",.3+.5*Math.random(),!0),this.set_param("sustainTime",.1+.3*Math.random(),!0),this.set_param("decayTime",.5*Math.random(),!0),this.set_param("sustainPunch",.2+.6*Math.random(),!0),Math.random()<.5&&(this.set_param("flangerOffset",.9*Math.random()-.3,!0),this.set_param("flangerSweep",.3*-Math.random(),!0)),Math.random()<.33&&(this.set_param("pitch_jump_Speed",.6+.3*Math.random(),!0),this.set_param("pitch_jump_amount",.8-1.6*Math.random(),!0))}generate_powerup(){this.reset_params(!0),Math.random()<.5?this.set_param("waveType",1,!0):this.set_param("squareDuty",.6*Math.random(),!0),Math.random()<.5?(this.set_param("frequency_start",.2+.3*Math.random(),!0),this.set_param("frequency_slide",.1+.4*Math.random(),!0),this.set_param("repeatSpeed",.4+.4*Math.random(),!0)):(this.set_param("frequency_start",.2+.3*Math.random(),!0),this.set_param("frequency_slide",.05+.2*Math.random(),!0),Math.random()<.5&&(this.set_param("vibratoDepth",.7*Math.random(),!0),this.set_param("vibratoSpeed",.6*Math.random(),!0))),this.set_param("sustainTime",.4*Math.random(),!0),this.set_param("decayTime",.1+.4*Math.random(),!0)}generate_hit_hurt(){this.reset_params(!0),this.set_param("waveType",this.select_random_wave_type("White","Bitnoise","Saw","Square","Voice"),!0),0==this.get_param("waveType")&&this.set_param("squareDuty",.6*Math.random()),this.set_param("frequency_start",.2+.6*Math.random(),!0),this.set_param("frequency_slide",-.3-.4*Math.random(),!0),this.set_param("sustainTime",.1*Math.random(),!0),this.set_param("decayTime",.1+.2*Math.random(),!0),Math.random()<.5&&this.set_param("hpFilterCutoff",.3*Math.random(),!0)}generate_jump(){this.reset_params(!0),this.set_param("waveType",this.select_random_wave_type("Square","Saw","FMSyn"),!0),this.set_param("squareDuty",.6*Math.random(),!0),this.set_param("frequency_start",.3+.3*Math.random(),!0),this.set_param("frequency_slide",.1+.2*Math.random(),!0),this.set_param("sustainTime",.1+.3*Math.random(),!0),this.set_param("decayTime",.1+.2*Math.random(),!0),Math.random()<.5&&this.set_param("hpFilterCutoff",.3*Math.random(),!0),Math.random()<.5&&this.set_param("lpFilterCutoff",1-.6*Math.random(),!0)}generate_blip_select(){this.reset_params(!0),this.set_param("waveType",this.select_random_wave_type("Square","Saw","FMSyn","Whistle"),!0),0==this.get_param("waveType")&&this.set_param("squareDuty",.6*Math.random(),!0),this.set_param("frequency_start",.2+.4*Math.random(),!0),this.set_param("sustainTime",.1+.1*Math.random(),!0),this.set_param("decayTime",.2*Math.random(),!0),this.set_param("hpFilterCutoff",.1,!0)}static#RandomizationPower={attackTime:4,sustainTime:2,sustainPunch:2,overtones:3,overtoneFalloff:2,vibratoDepth:3,dutySweep:3,flangerOffset:3,flangerSweep:3,lpFilterCutoff:3,lpFilterSweep:3,hpFilterCutoff:5,hpFilterSweep:5,bitCrush:4,bitCrushSweep:5,slide:4,frequency_acceleration:7,frequency_start:4};static#WaveTypeWeights=[1,1,1,1,1,1,1,1,1,1,1];static#WaveTypeIndices={Triangle:4,Sin:2,Square:0,Saw:1,Breaker:8,Tan:6,Whistle:7,White:3,Voice:11,Bitnoise:9,Rasp:5,FMSyn:10};select_random_wave_type(...e){e=e[Math.floor(Math.random()*e.length)];return Bfxr.#WaveTypeIndices[e]}generate_random_centered_around_x(e,t,i){var s;return Math.random()<.5?(s=Math.random(),i+(s=Math.pow(s,2))*(t-i)):(s=Math.random(),i-(s=Math.pow(s,2))*(i-e))}randomize_params(){for(var e in this.params){var t,i,s,n,a;this.locked_params[e]||(t=this.param_min(e),i=this.param_max(e),s=this.param_default(e),n=Math.random(),e in Bfxr.#RandomizationPower&&(n=Math.pow(n,Bfxr.#RandomizationPower[e])),a=Math.random()<.5,t===s&&(a=!0),this.params[e]=(a=i===s?!1:a)?s+(i-s)*n:s-(s-t)*n)}if(!this.locked_params.waveType){for(var r=0,o=0;o<Bfxr.#WaveTypeWeights.length;o++)r+=Bfxr.#WaveTypeWeights[o];for(n=Math.random()*r,o=0;o<Bfxr.#WaveTypeWeights.length;o++)if((n-=Bfxr.#WaveTypeWeights[o])<=0){this.set_param("waveType",o);break}}Math.random()<.5&&this.set_param("repeatSpeed",0,!0),this.set_param("min_frequency_relative_to_starting_frequency",0,!0),this.set_param("compressionAmount",0,!0),this.rectify_params()}mutate_params(){var e,t;Math.random()<.1?(e=Object.keys(Bfxr.#WaveTypeIndices).length,t=Math.floor(Math.random()*(e-1)),t=(this.get_param("waveType")+t)%e,this.set_param("waveType",t,!0)):(super.mutate_params(),this.rectify_params())}rectify_params(){var e,t=this.param_default("frequency_start"),t=(11==this.get_param("waveType")&&(t=.22),this.set_param("frequency_start",this.generate_random_centered_around_x(0,.6,t),!0),this.locked_params.sustainTime||this.locked_params.decayTime||this.get_param("attackTime")+this.get_param("sustainTime")+this.get_param("decayTime")<.2&&(this.set_param("sustainTime",.2+.3*Math.random()),this.set_param("decayTime",.2+.3*Math.random())),Math.random()*Math.random());this.set_param("sustainPunch",t*t,!0),(.7<this.get_param("frequency_start")&&.2<this.get_param("frequency_slide")||this.get_param("frequency_start")<.2&&this.get_param("frequency_slide")<-.05)&&this.set_param("frequency_slide",-this.get_param("frequency_slide"),!0),this.get_param("lpFilterCutoff")<.1&&this.get_param("lpFilterCutoffSweep")<0&&this.set_param("lpFilterCutoffSweep",.2-this.get_param("lpFilterCutoffSweep"),!0),0!==this.get_param("waveType")?(this.set_param("squareDuty",this.param_default("squareDuty"),!0),this.set_param("dutySweep",this.param_default("dutySweep"),!0)):(t=this.get_param("squareDuty"),e=Math.random(),.7<t&&e<.5&&this.set_param("dutySweep",.5*-Math.random(),!0))}generate_sound(){var e=new Bfxr_DSP(this.params,this);e.generate_sound(),this.sound=RealizedSound.from_buffer(e.buffer)}param_is_disabled(e){return 0!==this.get_param("waveType")&&("squareDuty"==e||"dutySweep"==e)||"min_frequency_relative_to_starting_frequency"==e&&0<=this.get_param("frequency_slide")&&0<=this.get_param("frequency_acceleration")}}class Footsteppr extends SynthBase{name="Footsteppr";version="1.0.0";tooltip="Bfxr is a wonderful physical simulation of footstep sounds, originally by Obiwannabe.";canvas_bg_logo="img/logo_footsteppr.png";header_properties=["waveType"];permalocked=["masterVolume"];hide_params=["masterVolume"];param_info=[["Sound Volume","Overall volume of the current sound.","masterVolume",.5,0,1],{type:"BUTTONSELECT",name:"terrain",display_name:"Terrain",tooltip:"",default_value:0,columns:5,header:!0,values:[["Snow","Traipsing around in the snow-blanketed forest.",0],["Grass","Dancing around the summer meadows.",1],["Dirt","The grass is all trampled away.",2],["Gravel","I hope you're not disrespecting anyone's grave!",3],["Wood","Fancy wooden floor - don't scratch it with your caperings.",4]]},["Heel","How hard you strike the ground with your heel.","heel",.5,0,1],["Roll","After making initial contact with the ground, how much you roll your foot to the side.","roll",.5,0,1],["Ball","At the final part of your step, how much you dig the front of your foot into the ground.","ball",.5,0,1],["Swiftness","How quick the step is.","swiftness",.5,0,1]];templates=[["Randomize","Talking your life into your hands... (only modifies unlocked parameters)","randomize_params","Random"],["Mutate","Modify each unlocked parameter by a small wee amount... (only modifies unlocked parameters)","mutate_params","Mutant"]];constructor(){super(),this.post_initialize()}generate_pickup_coin(){return this.params}generate_sound(){var e=this.params.heel,t=this.params.roll,i=this.params.ball,s=this.params.swiftness,n=this.params.masterVolume,s=.1+.7*(1-s),e=(pd_set_stream_length_seconds(s),resize_fn(step(e),0,1,0,.3333)),t=resize_fn(step(t),0,1,.125,.875),i=resize_fn(step(i),0,1,.6667,1),e=pd_fn(resize_fn(add_fns(e,t,i),0,1,0,s)),t=pd_mul(this.generate_terrain_texture(e),pd_c(n));t=pd_mul(pd_clip(t,pd_c(-1),pd_c(1)),pd_c(4)),this.sound=RealizedSound.from_buffer(t)}generate_terrain_texture(e){var t=["snow","grass","dirt","gravel","wood"],t=(this.params.terrain>=t.length&&(step_terrain=0,console.log("step_terrain reset to 0")),t[this.params.terrain]);return console.log("generating terrain texture for "+t),puredata_functions[t](e)}}class Transfxr extends SynthBase{name="Transfxr";version="1.0.0";tooltip="An idea for making simple sounds.";canvas_bg_logo="img/logo_transfxr.png";header_properties=["waveType"];permalocked=["masterVolume"];hide_params=["masterVolume"];param_info=[["Sound Volume","Overall volume of the current sound.","masterVolume",.5,0,1],{type:"KNOB_TRANSITION",name:"roll",display_name:"Filter Sweep",default_value_l:0,default_value_r:1,min:0,max:1,default_tween:"Linear",header:!0},["Heel","How hard you strike the ground with your heel.","heel",.5,0,1],["Ball","At the final part of your step, how much you dig the front of your foot into the ground.","ball",.5,0,1],["Swiftness","How quick the step is.","swiftness",.5,0,1]];templates=[["Randomize","Talking your life into your hands... (only modifies unlocked parameters)","randomize_params","Random"],["Mutate","Modify each unlocked parameter by a small wee amount... (only modifies unlocked parameters)","mutate_params","Mutant"]];static tweenfunctions=[["Linear",e=>e],["Ease In",e=>e*e],["Triangle",e=>1-2*Math.abs(e-.5)],["Bounce",e=>e<.5?1-2*e*(2*e):(2*e-1)*(2*e-1)+1],["Cosine",e=>1-(Math.cos(e*Math.PI*2)+1)/2],["Accelerating Sine",e=>Math.sin(e*Math.PI*2)*e],["Decelerating Sine",e=>Math.sin(e*Math.PI*2)*(1-e)]];generateTweenImages(){var t=window.getComputedStyle(document.body);for(let e=0;e<Transfxr.tweenfunctions.length;e++){var[i,s]=Transfxr.tweenfunctions[e],n=t.getPropertyValue("--tween-canvas-width"),a=t.getPropertyValue("--tween-canvas-height"),r=document.createElement("canvas"),o=(r.width=n,r.height=a,r.getContext("2d")),l=(o.fillStyle="black",n);for(let e=0;e<=l;e++){var h=e/l,d=e,h=Math.round(r.height*(1-s(h))),h=Math.max(0,Math.min(r.height-1,h));o.fillRect(d,h,1,1)}var c=r.toDataURL("image/png"),u=document.createElement("img");u.src=c,u.width=n,u.height=a,u.style.border="1px solid #ccc",u.style.borderRadius="3px",u.style.margin="5px",u.title=i,Transfxr.tweenfunctions[e][2]=u}}constructor(){super(),this.post_initialize(),this.generateTweenImages()}generate_pickup_coin(){return this.params}}var tabs=[];class Tab{active=!1;create_new_sound=!0;play_on_change=!0;selected_file_index=-1;current_params={};files=[];sliders={};lock_buttons={};synth=null;constructor(e){document.addEventListener("keydown",this.on_key_down.bind(this),!1);var t=(this.synth=e).name,i=(this.name=t,SaveLoad.loaded_data[e.name]),i=(i&&(this.files=i.files,this.selected_file_index=i.selected_file_index,0<=this.selected_file_index&&this.synth.apply_params(JSON.parse(this.files[this.selected_file_index][1])),void 0!==i.create_new_sound&&(this.create_new_sound=i.create_new_sound),void 0!==i.play_on_change&&(this.play_on_change=i.play_on_change),void 0!==i.locked_params)&&(this.synth.locked_params=i.locked_params),document.getElementById("tab_bar")),s=document.getElementById("tab_page_manager"),n=0==i.children.length,a=document.createElement("div"),i=(a.innerText=t,a.id="tab_button_"+t,a.classList.add("tab_button"),i.appendChild(a),a.addEventListener("click",this.set_active_tab.bind(this)),document.createElement("div")),s=(i.classList.add("tab_page"),i.id="tab_page_"+t,s.appendChild(i),n&&(a.classList.add("active_tab"),i.classList.add("active_tab_page"),this.active=!0),document.createElement("div")),n=(s.classList.add("left_panel"),i.appendChild(s),document.createElement("div")),a=(n.classList.add("template_list"),s.appendChild(n),document.createElement("div")),r=(a.classList.add("create_new_sound_div"),s.appendChild(a),document.createElement("div")),a=(r.classList.add("padded_item"),a.appendChild(r),document.createElement("input")),a=(a.type="checkbox",a.id=t+"_checkbox_create_new_sound",a.classList.add("normie_checkbox"),r.appendChild(a),a.checked=this.create_new_sound,a.addEventListener("click",this.create_new_sound_clicked.bind(this)),document.createElement("label")),r=(a.innerText="Create new sound",a.setAttribute("for",t+"_checkbox_create_new_sound"),r.appendChild(a),document.createElement("div")),a=(r.classList.add("save_commands"),s.appendChild(r),this.add_button(this.name+"_apply_sfx","Apply Sfx",this.apply_sfx.bind(this),"Apply the current sound to the current sound to the clipboard.")),a=(r.appendChild(a),this.add_button(this.name+"_revert_sfx","Revert Sfx",this.revert_sfx.bind(this),"Revert the current sound to the original sound to the clipboard.")),a=(r.appendChild(a),this.add_button(this.name+"_duplicate_sfx","Duplicate Sfx",this.duplicate_sfx.bind(this),"Duplicate the currently-selected sound in the file list.")),r=(r.appendChild(a),document.createElement("div")),a=(r.classList.add("scroll_container"),r.classList.add("filelist"),r.id=this.name+"_file_list",s.appendChild(r),document.createElement("div")),s=(a.classList.add("centre_panel"),i.appendChild(a),document.createElement("div")),r=(s.classList.add("centre_header"),s.style.display="none",a.appendChild(s),this.centre_header=s,document.createElement("table")),s=(r.classList.add("paramtable"),s.appendChild(r),document.createElement("div")),r=(s.classList.add("centre_params"),s.classList.add("scroll_container"),s.style.display="none",a.appendChild(s),this.centre_params=s,document.createElement("table")),a=(r.classList.add("paramtable"),s.appendChild(r),document.createElement("div")),s=(a.classList.add("right_panel"),i.appendChild(a),document.createElement("div")),r=(s.classList.add("display_canvas_container"),this.synth.canvas_bg_logo&&(s.style.backgroundImage=`url(${this.synth.canvas_bg_logo})`),a.appendChild(s),document.createElement("canvas")),i=(r.classList.add("display_canvas"),r.width="113",r.height="200",s.appendChild(r),r.id=this.name+"_waveform_canvas",document.createElement("div")),s=(a.appendChild(i),document.createElement("input")),r=(s.type="checkbox",s.id=t+"_checkbox_loop",s.classList.add("normie_checkbox"),s.checked=this.play_on_change,s.addEventListener("click",this.play_on_change_clicked.bind(this)),s.title="Whether the sound should play whenever a parameter is changed.",i.appendChild(s),document.createElement("label")),t=(r.innerText="Play on change",r.setAttribute("for",t+"_checkbox_loop"),r.title=s.title,i.appendChild(r),document.createElement("div")),s=(t.classList.add("right_panel_button_list"),a.appendChild(t),this.add_button("play","Play",this.play_button_clicked.bind(this),"Play the current sound")),i=(t.appendChild(s),document.createElement("div")),r=(t.appendChild(i),this.synth.param_min("masterVolume")),a=this.synth.param_max("masterVolume"),s=this.synth.param_default("masterVolume"),o="Adjust the volume of the currently selected sound.",r=(this.setup_slider(i,"masterVolume",r,a,s,this.volume_slider_changed.bind(this),o,!0),document.createElement("span")),a=(r.innerText="Sound Volume",r.title=o,i.appendChild(r),this.add_button("export_wav","<u>E</u>xport WAV",this.export_wav_button_clicked.bind(this),"Export the current sound as a WAV file. [CTRL+E]")),s=(t.appendChild(a),this.add_button("export_all","Export All",this.export_all_button_clicked.bind(this),"Generate all sounds as WAV files and download them as a single zip file.")),o=(t.appendChild(s),this.add_button("save_bfxr","<u>S</u>ave .bfxr",this.save_bfxr_button_clicked.bind(this),"Save the current sound as a .bfxr file. [CTRL+S]")),i=(t.appendChild(o),this.add_button("save_bfxrcol","Save .bcol",this.save_bfxrcol_button_clicked.bind(this),"Save the collection of all sounds in all tabs as a .bcol file.")),r=(t.appendChild(i),this.add_button("open_data","<u>O</u>pen Data",this.open_data_button_clicked.bind(this),"Load the current sound from a .bfxr/.bcol file on your computer. [CTRL+O]")),a=(t.appendChild(r),this.add_button("copy","<u>C</u>opy",this.copy_button_clicked.bind(this),"Copy the current sound [CTRL+C]")),s=(t.appendChild(a),this.add_button("paste","Paste",this.paste_button_clicked.bind(this),"Paste the current sound [CTRL+V]")),o=(t.appendChild(s),this.add_button("copy_link","Copy Link",this.copy_link_button_clicked.bind(this),"Copy the current sound link")),i=(t.appendChild(o),this.add_button("clear_all","Clear All",this.clear_all_button_clicked.bind(this),"Reset everything! Clean slate!")),r=(t.appendChild(i),this.add_button("about","About",this.about_button_clicked.bind(this),"About the current sound"));t.appendChild(r),this.template_list=n,tabs.push(this),this.load_params(e),this.load_templates(e),0==this.files.length?this.create_random_template():this.update_ui()}toggle_all_locks(){var e,t,i=Object.keys(this.lock_buttons),s=!this.synth.locked_param(i[0]);for(e in this.synth.locked_params)this.synth.set_locked_param(e,s);for(t in this.synth.permalocked)this.synth.set_locked_param(t,!0);this.update_locks(),SaveLoad.save_all_collections()}update_ui(){this.update_ui_file_list(),this.update_ui_params(),this.update_ablements(),this.update_locks()}update_ablements(){if(-1!==this.selected_file_index){var e=this.files[this.selected_file_index][1]!=this.files[this.selected_file_index][2];document.getElementById(this.name+"_apply_sfx").disabled=!e,document.getElementById(this.name+"_revert_sfx").disabled=!e;for(var t=0;t<this.files.length;t++){var i=this.files[t],s=(i[0],i[1]),i=i[2],n=document.getElementById(this.name+"_file_list").children[t].children[0];s!=i?n.classList.add("modified_filename"):n.classList.remove("modified_filename")}for(t=0;t<this.synth.param_info.length;t++){var a,r=this.synth.param_info[t];r.constructor===Array&&(r=r[2],a=this.synth.param_is_disabled(r),r=this.sliders[r],a?r.disable():r.enable())}}}update_ui_file_list(){for(var e=document.getElementById(this.name+"_file_list"),t=e.scrollTop,i=(e.innerHTML="",null),s=0;s<this.files.length;s++){var n=this.files[s],a=s==this.selected_file_index,n=this.create_file_entry(n,a);e.appendChild(n),a&&(i=n)}e.scrollTop=t,i&&setVisible(i,e)}update_ui_params(){for(var e=0;e<this.synth.param_info.length;e++){var t=this.synth.param_info[e];if(t.constructor===Array){var i=this.synth.params[t[2]],s=t[2];this.sliders[s].setValue(i)}else switch(t.type){case"BUTTONSELECT":for(var i=this.synth.params[t.name],n=-1,a=0;a<t.values.length;a++)if(t.values[a][2]===i){n=a;break}for(var r=document.getElementById(this.name+"_button_grid_"+t.name),a=0;a<r.children.length;a++){var o=r.children[a];o.disabled=!1,o.classList.contains("selected")&&o.classList.remove("selected")}r.children[n].classList.add("selected"),r.children[n].disabled=!0;break;case"KNOB_TRANSITION":console.error("Knob transition not implemented");break;default:console.error("Unknown param type: "+t.type)}}}update_locks(){for(var e=Object.keys(this.lock_buttons),t=0;t<e.length;t++){var i=e[t],s=this.lock_buttons[i];this.synth.locked_params[i]?s.classList.remove("unlocked"):s.classList.add("unlocked")}}set_active_tab(){for(var e=document.getElementById("tab_page_"+this.name),t=(e.classList.add("active_tab"),document.getElementsByClassName("tab_button")),i=0;i<t.length;i++){var s=t[i];s.id!="tab_button_"+this.name?s.classList.remove("active_tab"):s.classList.contains("active_tab")||s.classList.add("active_tab")}for(var n=document.getElementsByClassName("tab_page"),i=0;i<n.length;i++)(e=n[i]).id!="tab_page_"+this.name?e.classList.remove("active_tab_page"):e.classList.contains("active_tab_page")||e.classList.add("active_tab_page");for(i=0;i<tabs.length;i++){var a=tabs[i];a.active=a.name==this.name}}load_params(e){for(var t=0;t<e.param_info.length;t++){var i,s=e.param_info[t],n=e.get_param_normalized(s);n.name in e.locked_params||(i=!e.permalocked.includes(n.name),this.synth.set_locked_param(n.name,i)),e.hide_params.includes(n.name)||this.load_param(s)}this.update_ui()}load_param(e){if(e.constructor===Array){var t=e[0],i=e[2],s=6<e.length&&!0===e[6];this.add_slider(i,t,e[1],e[4],e[5],e[3],s)}else switch(e.type){case"BUTTONSELECT":this.add_button_grid(e.name,e.display_name,e.tooltip,e.columns,e.default_value,e.values,!0===e.header),i=e.name;break;case"KNOB_TRANSITION":this.add_knob_transition(e.name,e.display_name,e.tooltip,e.default_value_l,e.default_value_r,e.min,e.max,e.default_tween,!0===e.header),i=e.name;break;default:console.error("Unknown param type: "+e.type)}}setup_slider(e,t,i,s,n,a,r,o=!1){for(var l=this.name+"_slider_"+t,h=document.createElement("input"),d=(h.type="text",h.id=l,e.appendChild(h),[]),c=0,u=1e5,p=0;p<=10;p++){var f=i+(s-i)*p/10,f=(d.push(f),Math.abs(f-n));f<u&&(u=f,c=p)}e=new Slider("#"+l,{id:t,min:i,max:s,range:!1,step:.01,value:n,ticks:d,formatter:e=>e.toFixed(2),ticks_snap_bounds:.005,natural_arrow_keys:!0});e.sliderElem.title=r,e.sliderElem.className+=" singleselect",e.sliderElem.getElementsByClassName("slider-tick-container")[0].children[c].classList.add("defaulttick"),!0===o&&e.sliderElem.classList.add("slidernarrow"),e.on("slideStop",a),this.sliders[t]=e}add_button(e,t,i,s){var n=document.createElement("button");return n.classList.add("normie_button"),n.id=e,null!=s&&""!=s&&(n.title=s),n.innerHTML=t,n.addEventListener("click",i),n}create_param_label(e,t){var i=document.createElement("span");return i.classList.add("parameter_name"),null!=t&&""!=t&&(i.title=t),i.innerText=e,i}add_knob_transition(e,t,i,s,n,a,r,o,l=!1){l=l?this.centre_header:this.centre_params;l.style.display="block";var l=l.children[0].insertRow(),h=l.insertCell(),d=(h.classList.add("lockcolumn"),this.generate_lock_button(e)),t=(h.appendChild(d),""!==t&&((h=l.insertCell()).classList.add("labelcolumn"),d=this.create_param_label(t,i),h.appendChild(d)),l.insertCell()),i=(t.classList.add("transition_container"),this.new_knob(e+"_l",s,a,r,.01)),c=(t.appendChild(i),this.name+"_dropdown_content_"+e),h=Transfxr.tweenfunctions[0][2],d=document.createElement("img"),u=(d.src=h.src,d.classList.add("tween_select_canvas"),d.classList.add("dropdown"),d.id=e+"_tween_select_canvas",t.appendChild(d),d.addEventListener("click",()=>{document.getElementById(c).classList.toggle("show")}),document.createElement("div"));u.classList.add("dropdown-content"),u.id=c,t.appendChild(u);for(var p=0;p<Transfxr.tweenfunctions.length;p++){var f=Transfxr.tweenfunctions[p][2],m=document.createElement("img");m.src=f.src,m.classList.add("tween_select_canvas"),u.appendChild(m)}l=this.new_knob(e+"_r",n,a,r,.01);t.appendChild(l)}new_knob(e,t,i,s,n){var a=document.createElement("input"),e=this.name+"_knob_"+e;return a.id=e,a.type="range",a.classList.add("input-knob"),a.dataset.width="32",a.dataset.height="32",a.dataset.bgcolor="#b7a480",a.dataset.fgcolor="#3c3831",a.value=t,a.min=i,a.max=s,a.step=n,a.addEventListener("input",()=>{this.knob_transition_changed(parameter_name,knob_l.value,knob_r.value)}),a}add_button_grid(t,e,i,s,n,a,r=!1){r=r?this.centre_header:this.centre_params;r.style.display="block";var r=r.children[0].insertRow(),o=r.insertCell(),l=(o.classList.add("lockcolumn"),this.generate_lock_button(t)),o=(o.appendChild(l),1),i=(""!==e?((l=r.insertCell()).classList.add("labelcolumn"),e=this.create_param_label(e,i),l.appendChild(e)):o=2,r.insertCell()),h=(i.rowSpan=o,document.createElement("div")),d=(h.classList.add("button_grid_"+s+"c"),this.name+"_button_grid_"+t);h.id=d,i.appendChild(h);for(let e=0;e<a.length;e++){var c=document.createElement("button"),u=(c.classList.add("button_grid_button"),c.id=d+"_"+a[e][0],c.innerText=a[e][0],a[e][1]),u=(c.title=u,a[e][2]);c.addEventListener("click",this.button_grid_button_clicked.bind(this,c,t,e,u)),h.appendChild(c)}}add_slider(e,t,i,s,n,a,r=!1){this.name;r=r?this.centre_header:this.centre_params;r.style.display="block";var r=r.children[0].insertRow(),o=r.insertCell(),l=(o.classList.add("lockcolumn"),this.generate_lock_button(e)),o=(o.appendChild(l),1),l=(""!==t?((l=r.insertCell()).classList.add("labelcolumn"),t=this.create_param_label(t,i),l.appendChild(t)):o=2,r.insertCell());l.classList.add("slider_container"),l.rowSpan=o,this.setup_slider(l,e,s,n,a,this.slider_changed.bind(this,e),i)}generate_lock_button(t){var i=document.createElement("div");return i.classList.add("lockimage"),i.title="Lock/unlock parameter.  This prevents it from being changed when you hit Randomize/Mutate.  Press L to toggle lock on *all* parameters.",this.synth.locked_params[t]||i.classList.add("unlocked"),i.addEventListener("click",()=>{var e=!!i.classList.contains("unlocked");this.lock_param_clicked(i,t,e)}),this.lock_buttons[t]=i}find_unique_filename(e,t=-1){for(var i=e.replace(/[^a-zA-Z0-9_-]/g,""),s=(0==i.length&&(i="Sfx"),!1),n=0;n<this.files.length;n++)if(n!==t&&this.files[n][0]==i){s=!0;break}if(s){for(;0<i.length&&!isNaN(i[i.length-1]);)i=i.slice(0,-1);0==i.length&&(i="Sfx");for(var a,r=-1,o=!0;o;){o=!1,a=i,0!==++r&&(a=i+r);for(n=0;n<this.files.length;n++)if(n!=t&&this.files[n][0].toLowerCase()==a.toLowerCase()){o=!0;break}}i=a}return i}delete_file(e){for(var t,i=-1,s=0;s<this.files.length;s++)if(this.files[s][0]==e){i=s,this.files.splice(s,1);break}this.selected_file_index>=i&&(this.selected_file_index--,this.selected_file_index<0&&0<this.files.length&&(this.selected_file_index=0,this.set_selected_file(this.files[0][0])),0<=this.selected_file_index)&&(t=this.files[this.selected_file_index],this.synth.apply_params(JSON.parse(t[1])),this.synth.generate_sound(),this.redraw_waveform(),this.play_on_change)&&this.play_sound(),this.update_ui(),SaveLoad.save_all_collections()}get_current_file_name(){return-1===this.selected_file_index?null:this.files[this.selected_file_index][0]}set_selected_file(e){for(var t=0;t<this.files.length;t++)if(this.files[t][0]==e){if(this.selected_file_index===t)return!1;this.selected_file_index=t;break}for(var i=document.getElementById(this.name+"_file_list"),t=0;t<i.children.length;t++)(s=i.children[t]).classList.remove("file_selected"),s.children[0].contentEditable=!1;(s=i.children[this.selected_file_index]).classList.add("file_selected");var s,n=s.children[0],n=(n.contentEditable=!0,n.focus(),JSON.parse(this.files[this.selected_file_index][1]));return this.synth.apply_params(n),this.update_ui_params(),this.update_ablements(),!0}create_file_entry(e,t){var i=e[1]!==e[2],s=e[0],e=s,n=document.createElement("div"),a=(n.classList.add("file_item"),t&&n.classList.add("file_selected"),document.createElement("span")),e=(a.classList.add("file_item_name"),a.innerText=e,i&&a.classList.add("modified_filename"),t&&(a.contentEditable=!0),a.addEventListener("blur",e=>{a.innerText!==s&&(s=this.file_item_renamed(s,a.innerText),a.innerText=s)}),n.appendChild(a),a.addEventListener("click",e=>{this.file_item_click(s,e.target)}),document.createElement("button"));return e.classList.add("delete_button"),e.innerHTML="<img src='./img/delete.png' alt='Delete'>",e.addEventListener("click",e=>{this.delete_file(s)}),n.appendChild(e),n}load_templates(e){for(var t=0;t<e.templates.length;t++){var i=e.templates[t];this.add_generator(i)}}create_random_template(){var[e,t]=this.synth.create_random_template();this.create_new_sound_from_params(e,t)}create_new_sound_from_params(e,t,i=!1){this.synth.apply_params(t),this.create_new_sound||0==this.files.length||-1===this.selected_file_index||i?(this.current_params=t,i=this.find_unique_filename(e),this.files.push([i,JSON.stringify(t),JSON.stringify(t)]),this.selected_file_index=this.files.length-1,SaveLoad.save_all_collections()):(this.current_params=t,this.files[this.selected_file_index][1]=JSON.stringify(t)),this.play_on_change&&this.play_sound(),this.update_ui()}add_generator(e){var t=e[0],i=e[1],e=e[2],s=this.name+"_generator_"+e,s=this.add_button(s,t,this.template_clicked.bind(this,e),i);this.template_list.appendChild(s)}add_template(e,t,i){var s=this.name+"_template_"+e,s=this.add_button(s,e,i,t);this.template_list.appendChild(s)}serialize_params(){var e=this.files[this.selected_file_index],t=e[0],e=JSON.parse(e[1]),i={};return i.synth_type=this.name,i.version=this.synth.version,i.file_name=t,i.params=e,JSON.stringify(i,null,2)}template_clicked(e){console.log("Template clicked: "+e);for(var t=null,i=0;i<this.synth.templates.length;i++)if(this.synth.templates[i][2]==e){t=this.synth.templates[i];break}var s="mutate_params"===e?this.get_current_file_name():t[3];this.synth[t[2]].bind(this.synth)(),this.create_new_sound_from_params(s,this.synth.params)}create_new_sound_clicked(e){this.create_new_sound=e.target.checked,console.log("Create new sound: "+this.create_new_sound)}play_on_change_clicked(e){console.log("Play on change clicked"),this.play_on_change=e.target.checked}play_button_clicked(){console.log("Play button clicked"),this.play_sound()}slider_changed(e,t){console.log("Slider changed "+e+" to "+t),this.synth.set_param(e,t),this.files[this.selected_file_index][1]=JSON.stringify(this.synth.params),this.update_ablements(),this.play_on_change&&this.play_sound()}volume_slider_changed(e){this.slider_changed("masterVolume",e)}export_wav_button_clicked(){var e=this.synth.generate_sound_uri(),t=document.createElement("a");t.href=e,t.download=this.files[this.selected_file_index][0]+".wav",t.click(),t.remove()}async export_all_button_clicked(){console.log("Export all button clicked");for(var e=new JSZip,t=(document.getElementById("export-dialog").showModal(),document.getElementById("export-progress")),i=document.getElementById("export-download-link"),s=document.getElementById("export-progress-text"),n=(i.style.display="none",t.value=0),a=0;a<tabs.length;a++)n+=tabs[a].files.length;t.max=n+1;for(var r=0,a=0;a<tabs.length;a++){for(var o=tabs[a],l=o.selected_file_index,h=e.folder(o.name),d=0;d<o.files.length;d++){var c=o.files[d],u=c[0],c=(s.innerText=r+"/"+n+"(generating "+u+")",JSON.parse(c[1]));o.synth.apply_params(c),o.synth.generate_sound(),await new Promise(e=>setTimeout(e,10));c=o.synth.generate_sound_uri().split(",")[1];h.file(u+".wav",c,{base64:!0}),r++,t.value=r}l=o.files[l],l=(l[0],JSON.parse(l[1]));o.synth.apply_params(l),o.synth.generate_sound()}console.log("Generated files: "+[].length),s.innerText="generating zip file...",e.generateAsync({type:"blob"}).then(function(e){i.href=URL.createObjectURL(e),i.style.display="block",t.value=t.max,s.innerText="zip file generated!"})}save_bfxr_button_clicked(){console.log("Save bfxr button clicked");var e=this.serialize_params(),t=this.files[this.selected_file_index][0]+".bfxr",i=document.createElement("a");i.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),i.download=t,i.click()}save_bfxrcol_button_clicked(){console.log("Save bfxrcol button clicked");var e=SaveLoad.serialize_collection(),t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download="collection.bcol",t.click()}open_data_button_clicked(){console.log("Load data button clicked");var e=document.createElement("input");e.type="file",e.accept=".bfxr,.bcol",e.multiple=!1,e.addEventListener("change",e=>{console.log("File selected: "+e.target.files[0].name);var t=e.target.files[0],e=new FileReader;e.onload=e=>{t.name.endsWith(".bfxr")?SaveLoad.load_serialized_synth(e.target.result):t.name.endsWith(".bcol")&&SaveLoad.load_serialized_collection(e.target.result)},e.readAsText(t)}),e.click()}copy_button_clicked(){console.log("Copy button clicked");var e=this.serialize_params();navigator.clipboard.writeText(e)}paste_button_clicked(){navigator.clipboard.readText().then(e=>{SaveLoad.load_serialized_synth(e)})}copy_link_button_clicked(){console.log("Copy link button clicked");var e=this.files[this.selected_file_index],e=e[0],t=this.synth.params,e=SaveLoad.shallow_dict_serialize(this.name,e,t),t=encodeURIComponent(e),e=window.location.href.split("?")[0];navigator.clipboard.writeText(e+"?sfx="+t)}clear_all_button_clicked(){confirm("Are you sure you want to clear all data in this synth (THIS DELETES ALL SOUNDS FROM THIS TAB)?")&&(console.log("Clear all button clicked"),this.files=[],this.selected_file_index=-1,this.update_ui(),SaveLoad.save_all_collections())}about_button_clicked(){console.log("About button clicked"),document.getElementById("about-dialog").showModal()}apply_sfx(){this.files[this.selected_file_index][2]!==this.files[this.selected_file_index][1]&&(console.log("Apply sfx"),this.files[this.selected_file_index][2]=this.files[this.selected_file_index][1],document.getElementById(this.name+"_file_list").children[this.selected_file_index].children[0].classList.remove("modified_filename"),this.update_ablements(),SaveLoad.save_all_collections())}revert_sfx(){var e,t;this.files[this.selected_file_index][2]!==this.files[this.selected_file_index][1]&&(console.log("Revert sfx"),e=this.files[this.selected_file_index][2],t=JSON.parse(e),this.synth.apply_params(t),this.files[this.selected_file_index][1]=e,document.getElementById(this.name+"_file_list").children[this.selected_file_index].children[0].classList.add("modified_filename"),this.update_ui_params(),this.update_ablements(),this.play_on_change&&this.play_sound(),SaveLoad.save_all_collections())}duplicate_sfx(){var e,t;console.log("Duplicate sfx"),t=(e=-1===this.selected_file_index?(t="Sfx",JSON.stringify(this.synth.params)):(t=(e=this.files[this.selected_file_index])[0],e[1]),[this.find_unique_filename(t),e,e]),this.files.splice(this.selected_file_index+1,0,t),this.selected_file_index++,this.update_ui(),SaveLoad.save_all_collections()}lock_param_clicked(e,t,i){console.log("Lock param "+t+" clickedwith value "+i),(i=!i)?e.classList.add("unlocked"):e.classList.remove("unlocked"),this.synth.locked_params[t]=!i,SaveLoad.save_all_collections()}button_grid_button_clicked(e,t,i,s){console.log("Button grid button clicked for "+t+" with value "+s);this.name;for(var n=0;n<e.parentElement.children.length;n++){var a=e.parentElement.children[n];i===n?(a.classList.add("selected"),a.disabled=!0):(a.classList.remove("selected"),a.disabled=!1)}this.synth.set_param(t,s),this.files[this.selected_file_index][1]=JSON.stringify(this.synth.params),this.update_ablements(),this.play_on_change&&this.play_sound()}file_item_click(e,t){console.log("File item clicked: "+e),this.set_selected_file(e)&&this.play_on_change&&this.play_sound()}file_item_renamed(e,t){for(var i=-1,s=0;s<this.files.length;s++)if(this.files[s][0]==e){i=s;break}return t=this.find_unique_filename(t,i),this.files[i][0]=t,console.log("File item renamed: "+e+" to "+t),SaveLoad.save_all_collections(),t}play_sound(){this.synth.play(),this.redraw_waveform()}redraw_waveform(){var e=document.getElementById(this.name+"_waveform_canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),this.synth.drawWaveform(t)}on_key_down(e){var t=!1;if(console.log(this.name+" sKey down: "+e.key),this.active){if(document.activeElement.classList.contains("file_item_name"))return;var i,s=e.key.toUpperCase(),n=(console.log(this.name+" Key down: "+e.key),e.ctrlKey||e.metaKey);switch(s){case"C":n&&(this.copy_button_clicked(),t=!0);break;case"V":n&&(this.paste_button_clicked(),t=!0);break;case"S":n&&(this.save_bfxr_button_clicked(),t=!0);break;case"E":n&&(this.export_wav_button_clicked(),t=!0);break;case"O":n&&(this.load_data_button_clicked(),t=!0);break;case"L":n||(this.toggle_all_locks(),t=!0);break;case"ENTER":case"NUMPADENTER":case" ":n||"button"!==(i=document.activeElement.nodeName.toLowerCase())&&"a"!==i&&(this.play_sound(),t=!0)}}return!t||(e.preventDefault(),e.stopPropagation(),!1)}}class SaveLoad{static collection_save_enabled=!0;static loaded_data={};static save_all_collections(){var e;SaveLoad.collection_save_enabled&&(e=SaveLoad.serialize_collection(),localStorage.setItem("save_data",e),console.log("saved all collections (length "+e.length+")"))}static load_all_collections(){localStorage.getItem("save_data")&&(SaveLoad.loaded_data=JSON.parse(localStorage.getItem("save_data")))}static check_url_for_sfxr_params(){window.location.href;var t,e,i,s=window.location.search,s=new URLSearchParams(s);s.has("sfx")&&(e=s.get("sfx"),[t,e,s]=SaveLoad.shallow_dict_deserialize(e),(i=tabs.find(e=>e.synth.name==t))?(i.set_active_tab(),i.create_new_sound_from_params(e,s,!0),i=window.location.href.split("?")[0],window.history.replaceState({},"",i)):console.error("No tab found for synth_name: "+t))}static shallow_dict_serialize(e,t,i){var s=e+"~"+t+"~",n=Object.keys(i);console.log("exporting keys: "+n),n.sort();for(var a=0;a<n.length;a++)s+=i[n[a]]+"~";return s=s.slice(0,-1)}static shallow_dict_deserialize(e){var t=e.split("~"),i=t[0],e=t[1],s=tabs.find(e=>e.synth.name==i);if(s){for(var s=s.synth.default_params(),n=Object.keys(s),a=(n.sort(),console.log("importing keys: "+n),{}),r=0;r<n.length;r++)a[n[r]]=parseFloat(t[r+2]);return[i,e,a]}console.error("No tab found for synth_name: "+i)}static load_serialized_synth(e){var e=JSON.parse(e),t=e.synth_type,i=e.file_name,e=e.params,s=tabs.find(e=>e.synth.name==t);s?(s.set_active_tab(),s.create_new_sound_from_params(i,e,!0)):console.error("No tab found for synth_name: "+t)}static load_serialized_collection(e){for(var t=JSON.parse(e),e=t.active_tab_index,i=0;i<tabs.length;i++){var s=tabs[i],n=t[s.synth.name].files,a=t[s.synth.name].selected_file_index,r=t[s.synth.name].create_new_sound,o=t[s.synth.name].play_on_change,l=t[s.synth.name].locked_params;s.files=n,s.selected_file_index=-1,s.create_new_sound=r,s.play_on_change=o,s.synth.locked_params=l,s.update_ui(),null!=n[a]&&0<n[a].length&&(s.set_selected_file(n[a][0]),s.synth.generate_sound(),s.redraw_waveform()),s.update_ui()}tabs[e].set_active_tab()}static serialize_collection(){for(var e={},t=-1,i=0;i<tabs.length;i++){var s=tabs[i],n={files:s.files,selected_file_index:s.selected_file_index,create_new_sound:s.create_new_sound,play_on_change:s.play_on_change,locked_params:s.synth.locked_params};e[s.synth.name]=n,s.active&&(t=i)}return e.active_tab_index=t,JSON.stringify(e)}}function register_tabs(){SaveLoad.load_all_collections(),SaveLoad.collection_save_enabled=!1;new Tab(new Bfxr),new Tab(new Footsteppr);SaveLoad.collection_save_enabled=!0,set_tab_from_loaded_data(),SaveLoad.save_all_collections()}function set_tab_from_loaded_data(){var e;SaveLoad.loaded_data&&0<=(e=SaveLoad.loaded_data.active_tab_index)&&tabs[e].set_active_tab()}function bfxr_draw_visualisation(e){}function bfxr_generate_sound(e){}function showDropZone(){document.getElementById("dropzone").style.display="flex"}function hideDropZone(){document.getElementById("dropzone").style.display="none"}function register_drop_handlers(){document.addEventListener("drop",e=>{if(e.preventDefault(),hideDropZone(),1===e.dataTransfer.files.length&&e.dataTransfer.files[0].name.endsWith(".bcol")){var t=e.dataTransfer.files[0];(i=new FileReader).onload=e=>{SaveLoad.load_serialized_collection(e.target.result),SaveLoad.save_all_collections()},i.readAsText(t)}else for(var i,s=0;s<e.dataTransfer.files.length;s++)e.dataTransfer.files[s].name.endsWith(".bfxr")?(t=e.dataTransfer.files[s],(i=new FileReader).onload=e=>{SaveLoad.load_serialized_synth(e.target.result),SaveLoad.save_all_collections()},i.readAsText(t)):console.error("Only .bfxr and .bcol files are supported, but you dropped a file with the following name: "+e.dataTransfer.files[s].name)}),document.addEventListener("dragover",e=>{e.dataTransfer.dropEffect="copy   ",e.preventDefault(),showDropZone()}),document.addEventListener("dragleave",e=>{console.log("dragleave"),console.log(e),null==e.fromElement&&hideDropZone()}),document.addEventListener("dragend",e=>{hideDropZone()})}window.onload=function(){register_tabs(),SaveLoad.check_url_for_sfxr_params(),register_drop_handlers()},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".dialog-tab").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".dialog-tab").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".tab-content").forEach(e=>e.classList.remove("active")),t.classList.add("active");var e=document.getElementById(t.dataset.tab+"-tab");e&&e.classList.add("active")})})});</script>
        
        <style>.invalid-tooltip,.valid-tooltip{top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;position:absolute}.invalid-tooltip,.tooltip-inner,.valid-tooltip{color:#fff;border-radius:.25rem}.slider-selection,.slider-track-high,.slider-track-low{-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.slider-handle:hover,.slider-tick,.slider-track,.tab_button{cursor:pointer}.lockcolumn,.parameter_name,body{user-select:none}#about-dialog,dialog{width:fit-content;padding:var(--ui-margin)}.display_canvas_container,img{image-rendering:pixelated}.data-tooltip,.dropzone,.slider .tooltip{pointer-events:none}.input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback){margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}.valid-tooltip{background-color:rgba(25,135,84,.9)}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.invalid-tooltip{background-color:rgba(220,53,69,.9)}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.tooltip{z-index:1070;display:block;margin:0;font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;opacity:0}.tooltip.show{opacity:.9}.tooltip .tooltip-arrow{position:absolute;display:block;width:.8rem;height:.4rem}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:transparent;border-style:solid}.bs-tooltip-auto[data-popper-placement^=bottom],.bs-tooltip-auto[data-popper-placement^=top],.bs-tooltip-bottom,.bs-tooltip-top{padding:.4rem 0}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow,.bs-tooltip-top .tooltip-arrow{bottom:0}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before,.bs-tooltip-top .tooltip-arrow::before{top:-1px;border-width:.4rem .4rem 0;border-top-color:#000}.bs-tooltip-auto[data-popper-placement^=left],.bs-tooltip-auto[data-popper-placement^=right],.bs-tooltip-end,.bs-tooltip-start{padding:0 .4rem}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow,.bs-tooltip-end .tooltip-arrow{left:0;width:.4rem;height:.8rem}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before,.bs-tooltip-end .tooltip-arrow::before{right:-1px;border-width:.4rem .4rem .4rem 0;border-right-color:#000}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow,.bs-tooltip-bottom .tooltip-arrow{top:0}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before,.bs-tooltip-bottom .tooltip-arrow::before{bottom:-1px;border-width:0 .4rem .4rem;border-bottom-color:#000}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow,.bs-tooltip-start .tooltip-arrow{right:0;width:.4rem;height:.8rem}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before,.bs-tooltip-start .tooltip-arrow::before{left:-1px;border-width:.4rem 0 .4rem .4rem;border-left-color:#000}.tooltip-inner{max-width:200px;padding:.25rem .5rem;text-align:center;background-color:#000}.data-tooltip,.tooltip-inner{color:var(--tooltip-text-color)}.slider-selection,.slider-track,.slider-track-high,.slider-track-low{-webkit-border-radius:4px;-moz-border-radius:4px}/*! =======================================================
                      VERSION  11.0.2              
========================================================= *//*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * bootstrap-slider is released under the MIT License
 * Copyright (c) 2019 Kyle Kemp, Rohit Kalkur, and contributors
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * ========================================================= */.slider{display:inline-block;vertical-align:middle;position:relative}.slider.slider-horizontal{width:210px;height:20px}.slider.slider-horizontal .slider-track{height:10px;margin-top:-5px}.slider.slider-horizontal .slider-selection,.slider.slider-horizontal .slider-track-high,.slider.slider-horizontal .slider-track-low{height:100%;top:0;bottom:0}.slider.slider-horizontal .slider-handle,.slider.slider-horizontal .slider-tick{margin-left:-10px}.slider.slider-horizontal .slider-handle.triangle,.slider.slider-horizontal .slider-tick.triangle{position:relative;top:50%;transform:translateY(-50%);border-width:0 10px 10px;width:0;height:0;border-bottom-color:#036fa5;margin-top:0}.slider.slider-horizontal .slider-tick-container{white-space:nowrap;position:absolute;top:0;left:0;width:100%}.slider.slider-horizontal .slider-tick-label-container{white-space:nowrap;margin-top:20px}.slider.slider-horizontal .slider-tick-label-container .slider-tick-label{display:inline-block;text-align:center}.slider.slider-horizontal.slider-rtl .slider-tick-container,.slider.slider-horizontal.slider-rtl .slider-track,.slider.slider-vertical.slider-rtl .slider-selection{left:initial;right:0}.slider.slider-horizontal.slider-rtl .slider-handle,.slider.slider-horizontal.slider-rtl .slider-tick{margin-left:initial;margin-right:-10px}.slider.slider-vertical{height:210px;width:20px}.slider.slider-vertical .slider-track{width:10px;height:100%;left:25%;top:0}.slider.slider-vertical .slider-selection{width:100%;left:0;top:0;bottom:0}.slider.slider-vertical .slider-track-high,.slider.slider-vertical .slider-track-low{width:100%;left:0;right:0}.slider.slider-vertical .slider-handle,.slider.slider-vertical .slider-tick{margin-top:-10px}.slider.slider-vertical .slider-handle.triangle,.slider.slider-vertical .slider-tick.triangle{border-width:10px 0 10px 10px;width:1px;height:1px;border-left-color:#036fa5;margin-left:0}.slider.slider-vertical .slider-tick-label-container{white-space:nowrap}.slider.slider-vertical .slider-tick-label-container .slider-tick-label{padding-left:4px}.slider.slider-vertical.slider-rtl .slider-track{left:initial;right:25%}.slider.slider-vertical.slider-rtl .slider-handle.triangle,.slider.slider-vertical.slider-rtl .slider-tick.triangle{border-width:10px 10px 10px 0}.slider.slider-horizontal .max-slider-handle,.slider.slider-horizontal .min-slider-handle{border-top:var(--border-thickness) solid var(--col-black);border-bottom:var(--border-thickness) solid var(--col-black)}.slider.slider-vertical.slider-rtl .slider-tick-label-container .slider-tick-label{padding-left:initial;padding-right:4px}.slider.slider-disabled .slider-handle{background-color:#cfcfcf;background-image:-moz-linear-gradient(top,#dfdfdf,#bebebe);background-image:-webkit-gradient(linear,0 0,0 100%,from(#dfdfdf),to(#bebebe));background-image:-webkit-linear-gradient(top,#dfdfdf,#bebebe);background-image:-o-linear-gradient(top,#dfdfdf,#bebebe);background-image:linear-gradient(to bottom,#dfdfdf,#bebebe);background-repeat:repeat-x}.slider .hide,.slider input,.tab-content,.timevarying_expanded>.slidercell>div{display:none}.slider .tooltip-inner{white-space:nowrap;max-width:none}.slider .bs-tooltip-bottom .tooltip-inner,.slider .bs-tooltip-top .tooltip-inner{position:relative;left:-50%}.slider.bs-tooltip-left .tooltip-inner,.slider.bs-tooltip-right .tooltip-inner{position:relative;top:-100%}.slider .tooltip.bs-tooltip-bottom .arrow,.slider .tooltip.bs-tooltip-top .arrow{left:-.4rem}.slider .tooltip.bs-tooltip-bottom{margin-top:2px}.slider .tooltip.bs-tooltip-left,.slider .tooltip.bs-tooltip-right{margin-top:-14px}.slider .tooltip.bs-tooltip-left .arrow,.slider .tooltip.bs-tooltip-right .arrow{top:8px}.slider-track{background-repeat:repeat-x;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);-moz-box-shadow:inset 0 1px 2px rgba(0,0,0,.1);box-shadow:inset 0 1px 2px rgba(0,0,0,.1);position:absolute}.slider-selection{-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-sizing:border-box;position:absolute}.slider-selection.tick-slider-selection{background-color:#46c1fe;background-image:-moz-linear-gradient(top,#52c5ff,#3abcfd);background-image:-webkit-gradient(linear,0 0,0 100%,from(#52c5ff),to(#3abcfd));background-image:-webkit-linear-gradient(top,#52c5ff,#3abcfd);background-image:-o-linear-gradient(top,#52c5ff,#3abcfd);background-image:linear-gradient(to bottom,#52c5ff,#3abcfd);background-repeat:repeat-x}.slider-track-high,.slider-track-low{box-sizing:border-box;position:absolute;background:0 0}.slider-handle{background-image:-moz-linear-gradient(top,#0480be,#036fa5);background-image:-webkit-gradient(linear,0 0,0 100%,from(#0480be),to(#036fa5));background-image:-webkit-linear-gradient(top,#0480be,#036fa5);background-image:-o-linear-gradient(top,#0480be,#036fa5);background-image:linear-gradient(to bottom,#0480be,#036fa5);background-repeat:repeat-x;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);position:absolute;top:0;width:20px;height:20px;background-color:#0480be;border:0 solid transparent}.slider-handle.round{-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px}.slider-handle.custom,.slider-handle.triangle,.slider-tick.custom,.slider-tick.triangle{background:0 0}.slider-handle.custom::before,.slider-tick.custom::before{line-height:20px;font-size:20px;content:'\2605';color:#726204}.slider-tick{background-color:#f7f7f7;background-image:-moz-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-webkit-gradient(linear,0 0,0 100%,from(#f5f5f5),to(#f9f9f9));background-image:-webkit-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:-o-linear-gradient(top,#f5f5f5,#f9f9f9);background-image:linear-gradient(to bottom,#f5f5f5,#f9f9f9);background-repeat:repeat-x;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;width:20px;height:20px;filter:none;opacity:.8;border:0 solid transparent}#myInput,.dropzone,.slider-border{box-sizing:border-box}.slider-handle,.slider.slider-horizontal{height:var(--sliderheight)}.tab_page,dialog{filter:drop-shadow(10px 10px 20px rgba(0, 0, 0, .5))}.slider-tick.round{border-radius:50%}.slider-tick.in-selection{background-color:#46c1fe;background-image:-moz-linear-gradient(top,#52c5ff,#3abcfd);background-image:-webkit-gradient(linear,0 0,0 100%,from(#52c5ff),to(#3abcfd));background-image:-webkit-linear-gradient(top,#52c5ff,#3abcfd);background-image:-o-linear-gradient(top,#52c5ff,#3abcfd);background-image:linear-gradient(to bottom,#52c5ff,#3abcfd);background-repeat:repeat-x;opacity:1}:root{--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--sliderheight:15px;--sliderwidth:150px;--sliderwidthnarrow:106px;--col-white:#ffffff;--col-tanlight:#dbaf85;--col-tan:#c89057;--col-lightbrown:#a96742;--col-mediumbrown:#8f563b;--col-shadowbrown:#824e37;--col-shadowbrowner:#7a4836;--col-darkbrown:#663931;--col-lipflesh:#964e41;--col-black:#201010;--border-thickness:1px;--slider-border-color:var(--col-darkbrown);--slider-tick-defaultval-color:var(--col-tan);--slider-tick-color:var(--col-lipflesh);--slider-background-color:var(--col-tanlight);--col-sliderhandle:var(--col-darkbrown);--tooltip-background-color:#fdfdcc;--page-background-color:#ccbda1;--panel-background-color:#ccbda1;--panel-border-color:#5c574c;--panel-text-color:#black;--panel-disabled-text-color:#675f51;--tab-background-color-unselected:#887c66;--tab-unselected-border-color:#3c3831;--tab-background-color-selected:var(--panel-background-color);--tab-selected-border-color:var(--panel-border-color);--panel-border-thickness:1px;--ui-margin:5px;--font-size:16px;--font-size-small:12px;--font-size-bigger:24px;--file-item-selected-background-color:#a8c6ee;--tick-width:2px;--slider-border-color:var(--tab-selected-border-color);--slider-tick-color:#0000002c;--slider-tick-defaultval-color:#5c574c;--slider-background-color:transparent;--col-sliderhandle:black;--alternating-table-row-color:#e7d1a7;--button-background-color:var(--panel-background-color);--button-pressed-background-color:#e7d1a7;--tween-canvas-width:75;--tween-canvas-height:32;--buttongrid-pressed-background-color:grey;--about-dialog-width:300px;--about-dialog-backdrop-color:#ccbda188}.btn-outline-primary.active,.btn-outline-primary.dropdown-toggle.show,.btn-outline-primary:active,.slidercell .btn-check:active+.btn-outline-primary,.slidercell .btn-check:checked+.btn-outline-primary{background-color:var(--col-lipflesh)}.slider.slider-horizontal{margin-left:1.5px;margin-right:1.5px;position:relative;top:-4px;width:var(--sliderwidth)}.slider-track{background-image:none;background-color:transparent;border-radius:0;outline-offset:-3px;box-shadow:none}.slider.slider-disabled{opacity:.3}.slider.slider-disabled .slider-track{background-repeat:repeat-x;cursor:not-allowed;background-color:transparent;background-image:none}.slider.slider-disabled .slider-tick{cursor:not-allowed}.slider.slider-horizontal .slider-handle{border-radius:0;width:6px;margin-left:0;box-shadow:none}.slider.slider-horizontal.slidernarrow{width:var(--sliderwidthnarrow);height:var(--sliderheight)}.slider.slider-horizontal .min-slider-handle{background-image:none;background-color:transparent;border-left:var(--border-thickness) solid var(--col-black);margin-left:-4.5px}.slider.slider-horizontal .max-slider-handle{background-image:none;background-color:transparent;border-right:var(--border-thickness) solid var(--col-black);margin-left:-1.5px}.slider.slider-horizontal .slider-track{width:100%;margin-top:calc(var(--sliderheight)/ -2);top:50%;left:0}.slider.slider-horizontal .slider-tick.round{border-radius:0;background-color:var(--slider-tick-color);background-image:none;width:3px;margin-left:-1.5px;margin-top:var(--sliderheight);box-shadow:none;height:4px;opacity:1}.slider.slider-horizontal .slider-tick.round.defaulttick{background-color:var(--slider-tick-defaultval-color);height:4px}.slider-track-high,.slider-track-low{background-color:transparent;border-radius:0;display:none;box-shadow:none}.slider-selection{background:0 0;border-radius:0;display:none;box-shadow:none}.slider.slider-horizontal .slider-selection{background:var(--col-lipflesh);border-radius:0;display:block;top:5px;height:calc(var(--sliderheight) - 10px);outline:2.2px solid var(--col-lipflesh)}.slider.slider-horizontal.singleselect .slider-selection{background:#2b242457;border-radius:0;display:block;top:5px;height:calc(var(--sliderheight) - 10px);outline:transparent solid 2.2px}.slider-border,.slidernarrow>.slider-border{position:relative;float:left;left:-4.5px;border:var(--border-thickness) solid var(--slider-border-color);height:100%}.slider.slider-horizontal.singleselect .min-slider-handle{background-image:none;background-color:var(--col-sliderhandle);border:none;margin-left:-1.5px;top:3px;width:3px;height:calc(var(--sliderheight) - 6px)}.slider.slider-horizontal .slider-track{height:calc(var(--sliderheight))}.slider.slider-horizontal .slider-rangeHighlight.category1{background:var(--col-tanlight);border:1.5px solid var(--col-tanlight);transform:translate(-1.5px,0);outline:0;top:3px;height:calc(var(--sliderheight) - 6px)}.slider-border{width:calc(var(--sliderwidth) + 9px);background-color:var(--slider-background-color)}.slidernarrow>.slider-border{width:calc(var(--sliderwidthnarrow) + 9px)}.slider-horizontal{margin-bottom:3px;margin-top:6px}.slidercell{width:calc(var(--sliderwidth) + 13px);padding-right:0!important;border-right:none}.globalvolsliderdiv>.fieldtext{font-weight:500;color:var(--col-black)}.tableborder.slidercell{border-left:0;border-right:0}.tab_button,.tab_button.active_tab{border-style:solid;border-width:var(--panel-border-thickness)}.globalvolsliderdiv{margin-left:3px;margin-bottom:6px}.slider .tooltip.bs-tooltip-top{margin-top:-36px}.data-tooltip{position:absolute;display:block;max-width:200px;opacity:0;content:attr(data-tooltip);transform:translate(-50%,calc(-100% - 10px));width:max-content;background:var(--tooltip-background-color);z-index:100;border-radius:3px;padding:5px;margin-left:4px;transition:opacity .3s ease-in-out 0ms;box-shadow:0 0 10px 0 rgba(0,0,0,.5)}#myInput,.display_canvas_container,.lockimage{background-repeat:no-repeat}.lockcolumn:hover>.data-tooltip,.parameter_name:hover>.data-tooltip,button:hover>.data-tooltip{opacity:1;transition-delay:0.5s}.right_col_label{text-align:left;width:100%}.tooltip-inner{background-color:var(--tooltip-background-color)}.slidernarrow{padding-left:2px}body{width:100%;height:100%;margin:0;padding:0;background-color:var(--page-background-color);background-image:url("../img/bg.png");font-size:var(--font-size);overflow-y:auto;display:flex;flex-direction:column;justify-content:center}#main_container{width:fit-content;background-color:transparent;display:flex;flex-direction:column;margin:0 auto}#tab_bar{padding-left:10px;height:50px;width:100%;background-color:transparent;display:flex;flex-direction:row}#footer,.centre_params .paramtable tr:nth-child(odd),.paramtable tr:nth-child(2n){background-color:var(--alternating-table-row-color)}.tab_button{margin-top:15px;padding-left:10px;padding-right:10px;font-size:var(--font-size-bigger);background-color:var(--tab-background-color-unselected);border-color:var(--tab-unselected-border-color);border-bottom:none;margin-left:5px;margin-right:5px;padding-top:3px}.dialog-tab:first-child,.tab_button:first-child{margin-left:0}.dialog-tab:last-child,.tab_button:last-child{margin-right:0}.tab_button.active_tab{margin-top:10px;background-color:var(--tab-background-color-selected);border-color:var(--tab-selected-border-color);border-bottom:none;margin-bottom:calc(-1*var(--panel-border-thickness));z-index:1;padding-top:6px;cursor:default}.dialog-tab,.tab_page{border-width:var(--panel-border-thickness)}.tab_page{width:100%;background-color:var(--panel-background-color);border-style:solid;border-color:var(--panel-border-color);display:none;flex-direction:row;height:606px;overflow-y:clip;overflow-x:visible}.centre_panel,.right_panel{background-color:transparent}.left_panel,.save_commands,.template_list{flex-direction:column;display:flex;gap:var(--ui-margin)}.tab_page.active_tab_page{display:flex}#footer{height:fit-content;width:fit-content;text-align:center;margin:5px auto 0;border-radius:5px;padding:5px 10px;box-shadow:0 0 3px 0 var(--alternating-table-row-color)}.left_panel{width:150px}.save_commands,.template_list{margin:var(--ui-margin)}.right_panel_button_list{display:flex;flex-direction:column;gap:var(--ui-margin);margin:var(--ui-margin);margin-left:0}.centre_panel{width:350px;max-height:600px;margin-top:var(--ui-margin);margin-bottom:0;margin-left:0;margin-right:var(--ui-margin);border:var(--panel-border-thickness) solid var(--panel-border-color);border-bottom:none;display:flex;flex-direction:column}.centre_header{border-bottom:var(--panel-border-thickness) solid var(--panel-border-color);margin-top:var(--ui-margin);padding-bottom:var(--ui-margin);padding-right:var(--ui-margin)}.right_panel{width:120px}.scroll_container{overflow-x:hidden;overflow-y:auto}.filelist{position:relative;padding-top:var(--ui-margin);display:flex;flex-direction:column;height:100%;border-style:solid;border-width:0;border-color:var(--panel-border-color);border-top-width:var(--panel-border-thickness);scrollbar-gutter:stable;padding-right:13px}.display_canvas_container,.tween_select_canvas,dialog{border:var(--panel-border-thickness) solid var(--panel-border-color)}.file_item{display:flex;padding:0;padding-right:var(--ui-margin)}.file_item.modified{color:var(--panel-disabled-text-color)}.file_item.file_selected{background-color:var(--file-item-selected-background-color)}.file_item_name{padding-left:3px;display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:calc(100% - 18px);height:100%}.file_item_name.modified_filename{color:#4e4e4e;font-style:italic}.file_item_name.modified_filename::after{content:"*"}.delete_button{display:flex;font-size:var(--font-size);padding:0;margin:0;width:15px;height:15px;text-align:center}.padded_item,.slider_container,.transition_container{padding-right:var(--ui-margin);padding-left:var(--ui-margin)}.delete_button img{width:10px;height:10px}table.paramtable{width:100%;border-collapse:collapse}.centre_params .paramtable tr{border-bottom:var(--panel-border-thickness) solid var(--panel-border-color)}.centre_params .paramtable tr:nth-child(2n){background-color:var(--panel-background-color)}.padded_item{white-space:nowrap}.button_grid_3c,.button_grid_4c{width:100%;display:grid;grid-template-columns:repeat(4,1fr);gap:var(--ui-margin)}.button_grid_5c{width:100%;display:grid;grid-template-columns:repeat(5,1fr);gap:var(--ui-margin)}.lock_icon.unlocked{opacity:.4}.slider_container,.transition_container{position:relative;width:var(--sliderwidth)}.parameter_slider{width:100%;margin:0;position:relative;z-index:2}.slider_ticks,.tooltip{position:absolute}.slider_ticks{top:20px;left:0;right:0;display:flex;justify-content:space-between;padding:0 10px}.slider_tick{width:var(--tick-width);height:10px;background-color:var(--panel-border-color)}td.lockcolumn{width:15px}td.labelcolumn{width:max-content}.centre_params{position:relative;height:100%;width:100%}.parameter_name{float:right;font-size:var(--font-size-small);width:100%;text-align:right;cursor:default}.display_canvas_container{margin-top:var(--ui-margin);margin-right:var(--ui-margin);margin-bottom:var(--ui-margin);background-size:cover}.normie_checkbox{margin:0;margin-right:var(--ui-margin)}.padleft{padding-left:var(--ui-margin)}.lockimage{width:15px;height:15px;margin:0;padding:0;margin-left:var(--ui-margin);background-image:url("../img/locked.png");background-position:center}.tween_select_canvas,dialog h2{margin-top:var(--ui-margin)}.lockimage.unlocked{background-image:url("../img/unlocked.png");opacity:.4}input[type=range].input-knob:focus,input[type=range].input-slider:focus{outline:0;box-shadow:none}.tween_select_canvas{background-color:transparent;display:inline-block;width:var(--tween-canvas-width);height:var(--tween-canvas-height);object-fit:contain;object-position:center}#myInput,.dropbtn{font-size:16px;border:none}.dropbtn{background-color:#04aa6d;color:#fff;padding:16px;cursor:pointer}.dropdown-content,dialog{background-color:var(--panel-background-color)}.dropbtn:focus,.dropbtn:hover{background-color:#3e8e41}#myInput{background-image:url('searchicon.png');background-position:14px 12px;padding:14px 20px 12px 45px;border-bottom:1px solid #ddd}#myInput:focus{outline:#ddd solid 3px}.dropdown{position:relative;display:inline-block}.dropdown-content{padding:0;display:none;position:absolute;z-index:1;flex-direction:row;gap:0}.dropdown-content .tween_select_canvas{padding:0;margin:0}.dropdown-content img:hover{background-color:var(--button-pressed-background-color)}.dropdown-content a{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content a:hover{background-color:#f1f1f1}.dropdown-content.show{left:0;transform:translateX(50%);width:var(--tween-canvas-width);display:flex;flex-direction:column;gap:0}.dropdown-content img,.tab-content.active,dialog button{display:block}.dropdown-content img:not(:last-child){border-bottom:none}form{display:inline;padding:0;margin:0;display:flex;flex-direction:column}::backdrop{background-color:var(--about-dialog-backdrop-color);backdrop-filter:blur(5px)}dialog button{margin-left:auto;margin-right:auto;margin-bottom:var(--ui-margin)}#about-dialog{height:fit-content;overflow:hidden}.dialog-tabs{display:flex;padding-left:10px;background-color:transparent}.dialog-tab{margin-top:0;padding-left:10px;padding-right:10px;font-size:var(--font-size);background-color:var(--tab-background-color-unselected);border-style:solid;border-color:var(--tab-unselected-border-color);border-bottom:none;margin-left:5px;margin-right:5px;padding-top:3px;cursor:pointer}.dialog-tab:not(.active){transform:translateY(var(--ui-margin))}.dialog-tab.active{background-color:var(--tab-background-color-selected);border-color:var(--tab-selected-border-color);margin-bottom:calc(-1*var(--panel-border-thickness));z-index:1;padding-top:6px;cursor:default}.dialog-content{height:320px;width:400px;overflow-y:auto;overflow-x:hidden;border-style:solid;border-color:var(--panel-border-color);border-width:var(--panel-border-thickness);padding:var(--ui-margin)}#about-dialog button[autofocus]{margin:var(--ui-margin) auto}.shortcuts-list{display:grid;grid-template-columns:max-content auto;grid-gap:10px}.shortcuts-list dt{grid-column-start:1;margin:0}.shortcuts-list dd{grid-column-start:2;margin:0}.dropzone{position:fixed;z-index:99999;width:20em;height:20em;left:50%;top:50%;transform:translate(-50%,-50%);background-color:var(--panel-background-color);border:5px dashed var(--panel-border-color);border-radius:10px;opacity:.8;display:none;align-items:center;justify-content:center;font-size:var(--font-size-bigger)}</style>
    </head>
    <body>
        <div id="dropzone" class="dropzone">Drag file to load</div>
        <div id="main_container">
            <div id="tab_bar">
            </div>
            <div id="tab_page_manager">
            </div>
            <div id="footer">
                <a href="http://www.increpare.com">increpare</a> · <a href="https://github.com/sponsors/increpare">sponsor</a> · <a href="https://paypal.me/increparegames">paypal</a> · <a href="https://github.com/increpare/bfxr2">source code</a> · <a href="https://www.bfxr.net/v1">old flash version</a>
            </div>
        </div>
        <dialog id="about-dialog">
            <div class="dialog-tabs">
                <button class="dialog-tab active" data-tab="about">About</button>
                <button class="dialog-tab" data-tab="shortcuts">Shortcuts</button>
            </div>
            <div class="dialog-content">
                <div id="about-tab" class="tab-content active">
                    <h2>About Bfxr</h2>
                    <p>Make sound effects for your games!</p>
                    <p>Bfxr is an open-source tool based on <a href="https://drpetter.se/" target="_blank">drpetter's</a> <a href="https://www.drpetter.se/project_sfxr.html" target="_blank">sfxr</a>, written by <a href="https://increpare.com/" target="_blank">your friendly neighbourhood increpare</a>.</p>
                    <p>Footsteppr is a port of <a href="https://obiwannabe.co.uk/" target="_blank">obiwannabe's</a> <a href="https://gist.github.com/increpare/dc5d54d7484211b259de9ef9fb0d140c" target="_blank">footstep generator</a>, originally written in puredata.</p>
                    <p>You can find out much more about where bfxr came from <a href="https://github.com/increpare/bfxr2?tab=readme-ov-file#archaeology" target="_blank">here</a>.</p>
                </div>
                <div id="shortcuts-tab" class="tab-content">
                    <h2>Keyboard Shortcuts</h2>
                    <dl class="shortcuts-list">
                        <dt>SPACE/ENTER</dt>
                        <dd>Play currently selected sound</dd>
                        <dt>CTRL+O</dt>
                        <dd>Open .bfxr/.bcol file from disk</dd>
                        <dt>CTRL+E</dt>
                        <dd>Export current sound as WAV file.</dd>
                        <dt>CTRL+S</dt>
                        <dd>Save current sound as .bfxr file</dd>                        
                        <dt>CTRL+C</dt>
                        <dd>Copy current sound</dd>
                        <dt>CTRL+V</dt>
                        <dd>Paste current sound</dd>
                        <dt>L</dt>
                        <dd>Lock/unlock all parameters</dd>
                        <dt>R</dt>
                        <dd>Randomize all parameters</dd>
                        <dt>M</dt>
                        <dd>Mutate current sound</dd>
                    </dl>
                </div>
            </div>
            <button autofocus onclick="document.getElementById('about-dialog').close()">Close</button>
        </dialog>

        <dialog id="export-dialog">
            <h2>Generating Catalogue...</h2>
            <label for="export-progress">Progress</label>
            <progress id="export-progress" value="0" max="100">0%</progress>
            <div id="export-progress-text">0/0 files generated</div>
            <a id="export-download-link" href="#" download="all_sounds.zip">Download</a>
            <button autofocus onclick="document.getElementById('export-dialog').close()">Close</button>
        </dialog>
    </body>
</html>
